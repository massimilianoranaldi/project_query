[
  {
    "id": "1",
    "nomeCapitolo": "REPORT BONFANTI",
    "paragrafi": [
      {
        "id": "1.1",
        "nomeParagrafo": "Estrazione Dati",
        "codicePlSql": "-- fine del report (tot circa 50k)\nSELECT count(*) FROM report_com_new where id = (select max(id) from report_com_new);\n\n-- Estrazione dettaglio\nSELECT csv_text FROM report_com_new where id = (select max(id) from report_com_new);",
        "outPutSql": "REQUEST ID\tORDER ID CRM\tNAME\tSTATUS\tTS START\tTS END\tAGING (DAYS)\tTIPO\tSOTTOTIPO\tCHANNEL\tSTATO ORDINE CRM\tCOUNTER ITEMS CRM INVIATO\tFLAG CVP\tFLAG WCALL\tWIRELESS\tCPE FONIA\tBUNDLE\tBASKET\tOFFICE SMART\tCTRB\tMICROSOFT\tGREENWICH MNP\tGREENWICH NO MNP\tNO GREENWICH MNP\tNO GREENWICH NO MNP\tCPE LOGISTIC\tOUTCOME\tAGING (DAYS)\tOUTCOME\tAGING (DAYS)\tOUTCOME\tAGING (DAYS)\tLOGISTIC OUTCOME\tLOGISTIC AGING (DAYS)\tSERVICE ORDER SOM OUTCOME\tSERVICE ORDER SOM AGING (DAYS)\tMNP OUTCOME\tMNP AGING (DAYS)\tMNP DCO CRM\tMNP DCO MOG\tMNP RICHIESTE ACCETTATE\tMNP RICHIESTE SCARTATE\tCHANGE NUMBER MNP OUTCOME\tCHANGE NUMBER MNP MAX AGING FAILED\tFAILS COM CRM\tFAILS COM IGP\t FAILS COM BILLING\tFAILS COM OTHERS\tFAILS ON BILLING\tMISSING ON BILLING\tBATCH CLUSTERIZATION\n929410\tN/A\tMnpDonor\tWP\t01/08/2024 20:46\tN/A\t20\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\t1\t0\t0\t0\t0\t0\t0\t0\t1\t0\t0\t0\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\t0\t0\t0\t0\t0\t0\tTO CLUSTERIZE\n929409\tN/A\tMnpDonor\tWP\t01/08/2024 20:46\tN/A\t20\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\t1\t0\t0\t0\t0\t0\t0\t0\t1\t0\t0\t0\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\t0\t0\t0\t0\t0\t0\tTO CLUSTERIZE"
      }
    ]
  },
  {
    "id": "2",
    "nomeCapitolo": "ANALISI SCARTI",
    "paragrafi": [
      {
        "id": "2.1",
        "nomeParagrafo": "Estrazione KO sui Trasferimenti Credito : forsce la descrizione scarto siebel",
        "codicePlSql": "select a.request_id,--b.*,fd.* ,\n--regexp_match(fd.document_xml, '{\"code\":(.*?)}') codice_errore,--recupera i ko som\nregexp_match(fd.document_xml, '<ns:ErrorDescription>(.*?)</ns:ErrorDescription>') codice_errore--recupera i ko som\nfrom action a, fault b,fault_doc fd  where \nb.action_id=a.id and \n--a.name='Receive Unlock Order' and \na.status='FA' and\nfd.id=b.document_id and \nb.ts_resolution is null and\n--fd.document_xml like '%Asset non trovato%'and\na.id in (\nselect id from action where status='FA' and request_id in \n(971809,\n970585,\n970582,\n970393,\n970585,\n970582,\n970393,\n968323,\n968219,\n968118,\n966299,\n965991,\n965936,\n965934,\n964131,\n963961,\n963956,\n955029,\n942666,\n942654,\n942652,\n942651,\n942625,\n942624,\n942616,\n942613,\n942605,\n942593,\n942591,\n942585,\n942564,\n942558,\n942552,\n942540,\n942534,\n942533,\n942532,\n942530,\n942529,\n942527,\n942525,\n942210,\n942201,\n942193,\n942191,\n942174,\n942167,\n942165,\n942162,\n942155,\n942144,\n942143,\n942142,\n942129,\n939026,\n939014,\n938948,\n932042,\n932037,\n926817,\n926417,\n926413,\n926405,\n926402,\n926396,\n926394,\n926385,\n926381,\n926369,\n926368,\n926353,\n926352,\n926335,\n926333,\n926323,\n926321,\n926318,\n926303,\n926302,\n926300,\n926299,\n926296,\n926284,\n926275,\n926261,\n919848,\n919847,\n919845,\n919844,\n919843,\n919842,\n919840,\n919837,\n919835,\n919833,\n919461,\n919445,\n919374,\n919307,\n919287,\n893685,\n893674,\n893654,\n893633,\n893632,\n893631,\n875114,\n833444,\n827164,\n817972,\n817966,\n817964,\n817957,\n817943,\n817971,\n817959,\n817954,\n817946,\n817944,\n817942,\n814051,\n813696\n))",
        "outPutSql": "\"request_id\"\t\"codice_errore\"\n970393\t\"{\"\"Errore nella creazione del SubCase\"\"}\"\n970582\t\"{\"\"Richiesta non trovata\"\"}\"\n970585\t\"{\"\"Richiesta non trovata\"\"}\"\n971809\t\"{\"\"Asset non trovato\"\"}\""
      },
      {
        "id": "2.2",
        "nomeParagrafo": "Estrazione cut-over mog per MnpDonor",
        "codicePlSql": "\nselect a.request_id,\nregexp_match(b.message_xml, '<tns:DATA__CUT__OVER>(.*?)</tns:DATA__CUT__OVER>') cut_off_mog--recupera i ko som\nfrom action a,action_msg b  where \na.status='SA' and \nb.id=a.message_id and \na.name='Receive Request Mnp Donor' and \na.request_id in (929410,929409,\n929408,\n929407,\n929406,\n929405,\n929404,\n929403,\n929402,\n929401,\n929400,\n929399,\n929398,\n929397,\n929396,\n929395,\n929394,\n929393,\n929392,\n929391,\n929390,\n929389,\n929388,\n929387,\n929386,\n929385,\n929384,\n929383,\n929382,\n929381,\n929380,\n929379,\n929378,\n929377,\n929376,\n929375,\n929374,\n929373,\n929372,\n929371,\n929370,\n929369,\n929368,\n929367,\n929366,\n929365,\n929364,\n929363,\n929362,\n929361,\n929360,\n929359,\n929358,\n929357,\n929356,\n902255,\n902254,\n902253,\n902252,\n902251,\n902250,\n902249,\n902248,\n902247,\n902246,\n902245,\n902244,\n902243,\n902242,\n902241,\n902240,\n902239,\n902238,\n902237,\n902236,\n902235,\n902234,\n902233,\n902232,\n902231,\n902230,\n902229,\n902228,\n902227,\n902226,\n902225,\n902224,\n902223,\n902222,\n902221,\n902220,\n902219,\n902218,\n902217,\n902216,\n902215,\n957204,\n957178,\n957159,\n957157,\n957143,\n957135,\n957128,\n957122,\n957111,\n902214,\n902213,\n902212,\n902211,\n929413,\n929412,\n929411,\n929425,\n929424,\n929423,\n929422,\n929421,\n929420,\n929419,\n929418,\n929417,\n929416,\n929415,\n929414,\n902257,\n902256) order by 1",
        "outPutSql": "\"request_id\"\t\"cut_off_mog\"\n902211\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902212\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902213\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902214\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902215\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902216\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902217\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902218\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902219\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902220\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902221\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902222\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902223\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902224\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902225\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902226\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902227\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902228\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902229\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902230\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902231\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902232\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902233\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902234\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902235\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902236\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902237\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902238\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902239\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902240\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902241\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902242\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902243\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902244\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902245\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902246\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902247\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902248\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902249\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902250\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902251\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902252\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902253\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902254\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902255\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902256\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902257\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n929356\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929357\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929358\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929359\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929360\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929361\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929362\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929363\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929364\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929365\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929366\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929367\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929368\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929369\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929370\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929371\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929372\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929373\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929374\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929375\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929376\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929377\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929378\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929379\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929380\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929381\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929382\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929383\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929384\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929385\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929386\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929387\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929388\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929389\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929390\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929391\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929392\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929393\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929394\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929395\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929396\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929397\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929398\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929399\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929400\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929401\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929402\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929403\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929404\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929405\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929406\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929407\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929408\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929409\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929410\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929411\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929412\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929413\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929414\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929415\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929416\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929417\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929418\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929419\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929420\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929421\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929422\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929423\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929424\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929425\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n957111\t\"{\"\"2024-08-13 00:00:00.0\"\"}\"\n957122\t\"{\"\"2024-08-13 00:00:00.0\"\"}\"\n957128\t\"{\"\"2024-08-13 00:00:00.0\"\"}\"\n957135\t\"{\"\"2024-08-13 00:00:00.0\"\"}\"\n957143\t\"{\"\"2024-08-13 00:00:00.0\"\"}\"\n957157\t\"{\"\"2024-08-13 00:00:00.0\"\"}\"\n957159\t\"{\"\"2024-08-13 00:00:00.0\"\"}\"\n957178\t\"{\"\"2024-08-13 00:00:00.0\"\"}\"\n957204\t\"{\"\"2024-08-13 00:00:00.0\"\"}\""
      },
      {
        "id": "2.3",
        "nomeParagrafo": "Estrazione KO SOM su Mixed Order",
        "codicePlSql": "\n--mixed order\nselect a.request_id,--b.*,fd.* ,\n--regexp_match(fd.document_xml, '{\"code\":(.*?)}') codice_errore,--recupera i ko som\nregexp_match(fd.document_xml, '{\"code\":\"(.*?)}') codice_errore--recupera i ko som\nfrom action a, fault b,fault_doc fd  where \nb.action_id=a.id and \n--a.name='Receive Unlock Order' and \na.status='FA' and\nfd.id=b.document_id and \nb.ts_resolution is null and\n--fd.document_xml like '%Asset non trovato%'and\na.id in (\nselect id from action where status='FA' and request_id in \n(970015,\n966042,\n939489,\n922181,\n915601,\n898864\n))",
        "outPutSql": "\"request_id\"\t\"codice_errore\"\n898864\t\"{\"\"EOC_ERROR_1014\\\"\",\\\"\"reason\\\"\":\\\"\"Request cannot be processed reason: Product id=1588140343725 specified in order not found in SR for customer.\\\"\",\\\"\"status\\\"\":\\\"\"404\\\"\"\"\"}\"\n915601\t\"{\"\"EOC_W3_ORDER_0002\\\"\",\\\"\"reason\\\"\":\\\"\"MSISDN Already Active!\\\"\",\\\"\"message\\\"\":\\\"\"CustomerId/ MSISDN already exits in service registry, Onboarding order cannot be submitted\\\"\",\\\"\"status\\\"\":\\\"\"400\\\"\"\"\"}\"\n939489\t\"{\"\"EOC_W3_ORDER_0002\\\"\",\\\"\"reason\\\"\":\\\"\"MSISDN Already Active!\\\"\",\\\"\"message\\\"\":\\\"\"CustomerId/ MSISDN already exits in service registry, Onboarding order cannot be submitted\\\"\",\\\"\"status\\\"\":\\\"\"400\\\"\"\"\"}\"\n970015\t\"{\"\"EOC_W3_ORDER_0002\\\"\",\\\"\"reason\\\"\":\\\"\"MSISDN Already Active!\\\"\",\\\"\"message\\\"\":\\\"\"CustomerId/ MSISDN already exits in service registry, Onboarding order cannot be submitted\\\"\",\\\"\"status\\\"\":\\\"\"400\\\"\"\"\"}\""
      }
    ]
  },
  {
    "id": "3",
    "nomeCapitolo": "CAP 2 - Query utilità generale(DIN1717335096082)",
    "paragrafi": [
      {
        "id": "3.1",
        "nomeParagrafo": "PAR 2.1 - Estrazione EMF a partire da action e request name\n            (DIN1717335490633)",
        "codicePlSql": "select c.name,c.id,d.name,d.id from action c,action_msg b ,request d\nwhere \n 1=1 \nand b.message_xml like '%PHX80022%'\nand c.name='Send Service Order'\nand c.message_id=b.id\nand c.status ='SA'\nand d.name='Mixed Order' \nand d.id=c.request_id\nand d.ts_created  > current_date -90 \n--and d.id=631390\nlimit 3",
        "outPutSql": "name;id;name;id\nSend Service Order;620.154.755.316;Mixed Order;686.180\nSend Service Order;620.154.803.876;Mixed Order;691.315\nSend Service Order;620.155.048.956;Mixed Order;714.856"
      },
      {
        "id": "3.2",
        "nomeParagrafo": "PAR 2.2 - Estrazione id ordine a partire dall'action id\n            (DIN1717336002931)",
        "codicePlSql": "select b.ts_created,d.value,a.id,a.name,b.id,b.name from action a, request b , item2detail c , detail d\nwhere --a.system='som'\n1=1 and a.id in (620154177587,\n620153588096,\n620153680678)\nand b.id=a.request_id\nand b.id=c.request_id\nand c.detail_id=d.id\nand d.name='id_odl_crm'\nlimit 3",
        "outPutSql": "ts_created;value;id;name;id;name\n2024-02-21 16:18:12.997 +0100;1-618008268690;620.153.588.096;Send Service Order;579.665;Mixed Order\n2024-02-21 16:18:12.997 +0100;1-618008268690;620.153.588.096;Send Service Order;579.665;Mixed Order\n2024-04-22 15:22:18.251 +0200;1-622831680560;620.154.177.587;Send Service Order;631.390;Mixed Order"
      },
      {
        "id": "3.3",
        "nomeParagrafo": "PAR 2.3 - Estrae un dettaglio di una certa action a partire da\n            id_ordine (DIN1717337127952)",
        "codicePlSql": "select ''''||c.value||''',',c.* from action a, item2detail b , detail c ,request d\nwhere \na.request_id=d.id and \nd.root_id in (select root_id from detail where name='id_odl_crm' and value='1-622426643036') and \na.name='Notify ICCID' and \nb.action_id=a.id and\nc.id=b.detail_id and\nc.name='iccid'",
        "outPutSql": "?column?;id;name;value;cfg_id;pos;root_id\n'8939880825112013764',;1.371.286;iccid;8939880825112013764;47;0;619.699\n'8939880825112013780',;1.371.288;iccid;8939880825112013780;47;1;619.699\n'8939880825112013798',;1.371.290;iccid;8939880825112013798;47;2;619.699\n'8939880825112013806',;1.371.292;iccid;8939880825112013806;47;3;619.699\n'8939880825112013814',;1.371.294;iccid;8939880825112013814;47;4;619.699\n'8939880825112013822',;1.371.296;iccid;8939880825112013822;47;5;619.699\n'8939880825112013830',;1.371.298;iccid;8939880825112013830;47;6;619.699\n'8939880825112013848',;1.371.300;iccid;8939880825112013848;47;7;619.699\n'8939880825112013855',;1.371.302;iccid;8939880825112013855;47;8;619.699\n'8939880825112013863',;1.371.304;iccid;8939880825112013863;47;9;619.699\n'8939880825112013871',;1.371.306;iccid;8939880825112013871;47;10;619.699\n'8939880825112013889',;1.371.308;iccid;8939880825112013889;47;11;619.699\n'8939880825112013897',;1.371.310;iccid;8939880825112013897;47;12;619.699\n'8939880825112013905',;1.371.312;iccid;8939880825112013905;47;13;619.699\n'8939880825112013913',;1.371.314;iccid;8939880825112013913;47;14;619.699\n'8939880825112014010',;1.371.316;iccid;8939880825112014010;47;15;619.699\n'8939880825112014028',;1.371.318;iccid;8939880825112014028;47;16;619.699\n'8939880825112014036',;1.371.320;iccid;8939880825112014036;47;17;619.699\n'8939880825112014044',;1.371.322;iccid;8939880825112014044;47;18;619.699"
      },
      {
        "id": "3.4",
        "nomeParagrafo": "PAR 2.4 - Estrae ordini per i quali a fronte di una richiesta SOM\n            non è stata ricevuta risposta (DIN1717338322350)",
        "codicePlSql": "select \n(select zz.value from detail zz where zz.root_id=d.root_id and zz.name='id_odl_crm' limit 1),\nd.*,a.*\nfrom \naction a, \naction_msg b,\nrequest c,request d\nwhere b.id=a.message_id \nand a.name='Send Service Order' \nand a.system='som' \nand a.ts_created>current_date -20\nand c.id=a.request_id \nand c.root_id=d.id \nand not exists (select 1 from action z where z.request_id=c.id and z.name='Receive mobile provisioning result')\n--and d.root_id in (select root_id from detail where name='id_odl_crm' and value='1-622831680560')\n--and d.id=598149\n--1nd b.message_xml like  '%po_ANB_SecureEnf%'\n--and d.name='Change Order'\nlimit 5",
        "outPutSql": "value;id;name;direction;system;status;ts_created;ts_end;case_id;queue_prefix;document_id;cfg_id;parent_id;root_id;area;release;substatus;bpme_process_id;request_detail;id;name;direction;status;ts_requested;ts_created;ts_enqueued;ts_first_start;ts_start;ts_end;priority;ts_todo;queue;request_id;message_id;system;cfg_id;handler;response_id;adb_source;result\n1-624926682931;672.508;Order reactivation;inbound;crm;SA;2024-05-13 15:34:37.098 +0200;2024-05-13 15:35:41.721 +0200;36434;;112.906;10;;672.508;Order;;;p:0a201acty;Riattivazione-Riattivazione;620.154.607.137;Send Service Order;outbound;SA;2024-05-13 15:35:02.555 +0200;2024-05-13 15:34:47.010 +0200;;2024-05-13 15:35:02.000 +0200;2024-05-13 15:35:02.000 +0200;2024-05-13 15:35:07.000 +0200;;;som-publisher-out;672.510;878.716;som;25;com2som-itf-out.module/com2som_itf_out.processes.businessProcess.productOrder.SendProductOrder;0;;\n1-625007545428;674.138;OutOrder;inbound;crm;SA;2024-05-14 09:47:49.967 +0200;2024-05-14 09:48:43.952 +0200;37062;;114.313;8;;674.138;Order;;;p:0a201b0no;DEACTIVATION-DEACTIVATION;620.154.626.073;Send Service Order;outbound;SA;2024-05-14 09:48:14.559 +0200;2024-05-14 09:48:04.588 +0200;;2024-05-14 09:48:14.000 +0200;2024-05-14 09:48:14.000 +0200;2024-05-14 09:48:17.000 +0200;;;som-publisher-out;674.139;891.429;som;25;com2som-itf-out.module/com2som_itf_out.processes.businessProcess.productOrder.SendProductOrder;0;;\n1-624904435223;672.273;Activation Order;inbound;crm;SA;2024-05-13 13:13:40.603 +0200;2024-05-30 02:14:58.743 +0200;36245;;112.705;1;;672.273;Order;;;p:0a201a93v;ACTIVATION-ACTIVATION;620.154.608.374;Send Service Order;outbound;SA;2024-05-13 16:04:51.379 +0200;2024-05-13 16:04:29.416 +0200;;2024-05-13 16:04:51.000 +0200;2024-05-13 16:04:51.000 +0200;2024-05-13 16:04:52.000 +0200;;;som-publisher-out;672.628;879.546;som;25;com2som-itf-out.module/com2som_itf_out.processes.businessProcess.productOrder.SendProductOrder;0;;\n1-625016899919;680.185;Activation Order;inbound;crm;SA;2024-05-16 12:46:19.127 +0200;2024-06-01 02:18:04.703 +0200;39211;;119.351;1;;680.185;Order;;;p:0a201dbl6;ACTIVATION-ACTIVATION_MNP;620.154.695.989;Send Service Order;outbound;SA;2024-05-16 14:54:14.610 +0200;2024-05-16 14:50:46.127 +0200;;2024-05-16 14:54:14.000 +0200;2024-05-16 14:54:14.000 +0200;2024-05-16 14:54:16.000 +0200;;;som-publisher-out;680.614;939.127;som;25;com2som-itf-out.module/com2som_itf_out.processes.businessProcess.productOrder.SendProductOrder;0;;\n1-624894234556;671.726;Activation Order;inbound;crm;SA;2024-05-13 10:53:57.123 +0200;2024-05-27 11:33:10.248 +0200;36070;;112.145;1;;671.726;Order;;;p:0a201a11p;ACTIVATION-ACTIVATION;620.154.609.090;Send Service Order;outbound;SA;2024-05-13 16:24:08.521 +0200;2024-05-13 16:18:54.640 +0200;;2024-05-13 16:24:08.000 +0200;2024-05-13 16:24:08.000 +0200;2024-05-13 16:24:10.000 +0200;;;som-publisher-out;672.690;880.219;som;25;com2som-itf-out.module/com2som_itf_out.processes.businessProcess.productOrder.SendProductOrder;0"
      },
      {
        "id": "3.5",
        "nomeParagrafo": "PAR 2.5 - Estrae informazioni dalla cfg_action (query 1)\n            (DIN1717338466444)",
        "codicePlSql": "select * from cfg_action where system='crm' and direction='outbound' and name='VerifyUpdateDataCutOver'",
        "outPutSql": "name;direction;handler;system;request_id;id;priority;endpoint;flag_lock;substatus_request;substatus_request_root;flag_job_shv;flag_exclude_cmf;mercato;area\nVerifyUpdateDataCutOver;outbound;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.VerifyDataCutOver;crm;1;85;;crm-publisher-out;N;;;Y;N;B2B;Order\nVerifyUpdateDataCutOver;outbound;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.VerifyDataCutOver;crm;2;396;;crm-publisher-out;N;;;Y;N;B2B;Order\nVerifyUpdateDataCutOver;outbound;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.VerifyDataCutOver;crm;15;275;;crm-publisher-out;N;;;Y;N;B2B;Order\nVerifyUpdateDataCutOver;outbound;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.VerifyDataCutOver;crm;19;375;;crm-publisher-out;N;;;Y;N;B2B;Order\nVerifyUpdateDataCutOver;outbound;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.VerifyDataCutOver;crm;4;643;;crm-publisher-out;N;;;Y;N;B2B;Order"
      },
      {
        "id": "3.6",
        "nomeParagrafo": "PAR 2.6 - Estrae EMD della action SOM a partire da id_ordine\n            (DIN1717338756343)",
        "codicePlSql": "select z.id,z.name,zz.* from \n      request z,action zz,action_msg x where zz.request_id=z.id and z.name='Network' and zz.name='Send Service Order' and \n      z.root_id      in (select root_id from detail where value in ('1-619821002400')) and \n      zz.message_id=x.id",
        "outPutSql": "id;name;id;name;direction;status;ts_requested;ts_created;ts_enqueued;ts_first_start;ts_start;ts_end;priority;ts_todo;queue;request_id;message_id;system;cfg_id;handler;response_id;adb_source;result\n622.399;Network;620.154.080.781;Send Service Order;outbound;SA;2024-04-17 08:12:09.627 +0200;2024-04-17 08:12:00.402 +0200;;2024-04-17 08:12:09.000 +0200;2024-04-17 08:12:09.000 +0200;2024-04-17 08:12:12.000 +0200;;;som-publisher-out;622.399;527.751;som;25;com2som-itf-out.module/com2som_itf_out.processes.businessProcess.productOrder.SendProductOrder;0;;\n622.400;Network;620.154.080.782;Send Service Order;outbound;SA;2024-04-17 08:14:08.494 +0200;2024-04-17 08:12:00.399 +0200;;2024-04-17 08:14:08.000 +0200;2024-04-17 08:14:08.000 +0200;2024-04-17 08:14:10.000 +0200;;;som-publisher-out;622.400;527.812;som;25;com2som-itf-out.module/com2som_itf_out.processes.businessProcess.productOrder.SendProductOrder;0;;\n624.402;Network;620.154.102.569;Send Service Order;outbound;SA;2024-04-18 04:11:05.716 +0200;2024-04-18 04:10:52.935 +0200;;2024-04-18 04:11:05.000 +0200;2024-04-18 04:11:05.000 +0200;2024-04-18 04:11:09.000 +0200;;;som-publisher-out;624.402;542.772;som;25;com2som-itf-out.module/com2som_itf_out.processes.businessProcess.productOrder.SendProductOrder;0;;\n624.442;Network;620.154.102.974;Send Service Order;outbound;SA;2024-04-18 04:12:01.143 +0200;2024-04-18 04:11:46.389 +0200;;2024-04-18 04:12:01.000 +0200;2024-04-18 04:12:01.000 +0200;2024-04-18 04:12:03.000 +0200;;;som-publisher-out;624.442;543.047;som;25;com2som-itf-out.module/com2som_itf_out.processes.businessProcess.productOrder.SendProductOrder;0"
      },
      {
        "id": "3.7",
        "nomeParagrafo": "PAR 2.7 - Estrae tutte le action verso COMB a partire da id_ordine\n            (DIN1717338860913)",
        "codicePlSql": "select b.name,b.id,a.root_id,b.status,a.* from request a, action  b\n      where \n      b.request_id=a.id and \n      a.root_id \n      --in (585076      ) \nin (select root_id from detail where value in ('1-619821002400'))\n      and b.system='billing' \n      and b.direction='outbound'",
        "outPutSql": "name;id;root_id;status;id;name;direction;system;status;ts_created;ts_end;case_id;queue_prefix;document_id;cfg_id;parent_id;root_id;area;release;substatus;bpme_process_id;request_detail\nActive Service Instance;620.154.080.757;616.306;SA;618.568;Logistics;outbound;gsi;SA;2024-04-12 21:41:11.252 +0200;2024-04-17 08:11:50.845 +0200;900;;65.509;5;616.306;616.306;Order;;;p:0a20pp5x;562636824\nActive Service Instance;620.154.080.755;616.306;SA;618.568;Logistics;outbound;gsi;SA;2024-04-12 21:41:11.252 +0200;2024-04-17 08:11:50.845 +0200;900;;65.509;5;616.306;616.306;Order;;;p:0a20pp5x;562636824\nActive Service Instance;620.154.080.832;616.306;SA;622.399;Network;outbound;som;SA;2024-04-17 08:12:00.402 +0200;2024-04-19 06:02:19.228 +0200;6062;;68.977;3;616.306;616.306;Order;;;p:0a20rbbs;ACTIVATION | 3206648991\nActive Service Instance;620.154.081.099;616.306;SA;622.400;Network;outbound;som;SA;2024-04-17 08:12:00.399 +0200;2024-04-19 04:08:50.228 +0200;6063;;69.005;3;616.306;616.306;Order;;;p:0a20rbbt;ACTIVATION | 3206648676\nChange Number Service Instance;620.154.129.237;616.306;SA;624.402;Network;outbound;som;SA;2024-04-18 04:10:52.935 +0200;2024-04-19 04:08:25.980 +0200;6063;;70.827;3;616.306;616.306;Order;;;p:0a20s2cf;CHANGE_NUMBER_MNP | DCO: 19-04-2024 | FROM: 3206648676 TO:\n                  3287199235\nChange Number Service Instance;620.154.130.968;616.306;SA;624.442;Network;outbound;som;SA;2024-04-18 04:11:46.389 +0200;2024-04-19 06:01:56.712 +0200;6062;;70.859;3;616.306;616.306;Order;;;p:0a20s2sh;CHANGE_NUMBER_MNP | DCO: 19-04-2024 | FROM: 3206648991 TO:\n                  3316422906"
      },
      {
        "id": "3.8",
        "nomeParagrafo": "PAR 2.8 - Estrazione action a partire dalla rootId o id_ordine\n            (DIN1717413558006)",
        "codicePlSql": "select A.ID,A.ROOT_ID,b.* from request a, action b \nwhere a.root_id=598149 --in (select distinct root_id from detail where value='1-619807037680')\nand b.request_id=a.id \n--AND b.SYSTEM='billing'\n--AND b.status <>'SA'",
        "outPutSql": "id;root_id;id;name;direction;status;ts_requested;ts_created;ts_enqueued;ts_first_start;ts_start;ts_end;priority;ts_todo;queue;request_id;message_id;system;cfg_id;handler;response_id;adb_source;result\n598.149;598.149;620.153.804.648;Send Welcome Call;outbound;RD;2024-03-20 18:42:11.242 +0100;2024-03-20 18:42:11.247 +0100;;2024-03-20 18:42:11.000 +0100;2024-03-20 18:42:11.000 +0100;2024-03-20 18:42:13.000 +0100;;;crm-publisher-out;598.149;339.769;crm;50;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm;0;;\n598.149;598.149;620.153.826.614;Receive Unlock Order;inbound;RD;2024-03-21 22:41:28.315 +0100;2024-03-21 22:41:28.320 +0100;;2024-03-21 22:41:28.000 +0100;2024-03-21 22:41:28.000 +0100;2024-03-21 22:41:30.000 +0100;;;crm-publisher-in;598.149;354.619;crm;56;com2crm-itf-in.module/com2crm_itf_in.processes.businessProcess.orderManagement.RecUnlockOrder;0;;\n598.149;598.149;620.153.804.642;Receive Activation Order;inbound;RD;2024-03-20 18:42:02.902 +0100;2024-03-20 18:42:02.907 +0100;;2024-03-20 18:42:03.000 +0100;2024-03-20 18:42:03.000 +0100;2024-03-20 18:42:03.000 +0100;;;crm-publisher-in;598.149;339.765;crm;1;com2crm-itf-in.module/com2crm_itf_in.processes.businessProcess.orderManagement.starter.StartActivationOrder;0;;\n598.149;598.149;620.153.804.644;Send draft produts to Subscribers;outbound;RD;2024-03-20 18:42:04.525 +0100;2024-03-20 18:42:04.531 +0100;;2024-03-20 18:42:04.000 +0100;2024-03-20 18:42:04.000 +0100;2024-03-20 18:42:05.000 +0100;;;igpSub-publisher-out;598.149;339.766;igp;7;com2igp-sub.module/com2igp_sub.processes.businessProcess.orderManagement.NotifyDraftProduct;0;;\n598.149;598.149;620.153.804.646;VerifyUpdateDataCutOverIn;inbound;RD;2024-03-20 18:42:05.000 +0100;2024-03-20 18:42:05.190 +0100;;2024-03-20 18:42:06.000 +0100;2024-03-20 18:42:06.000 +0100;2024-03-20 18:42:08.000 +0100;;;crm-publisher-in;598.149;339.768;crm;86;com2crm-itf-in.module/com2crm_itf_in.processes.businessProcess.orderManagement.VerifyDataCutOverIn;0;;\n598.149;598.149;620.153.804.645;VerifyUpdateDataCutOver;outbound;RD;2024-03-20 18:42:05.066 +0100;2024-03-20 18:42:05.071 +0100;;2024-03-20 18:42:05.000 +0100;2024-03-20 18:42:05.000 +0100;2024-03-20 18:42:05.000 +0100;;;crm-publisher-out;598.149;339.767;crm;85;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.VerifyDataCutOver;0;;\n598.149;598.149;620.153.804.647;Simulates results for Welcome Call;outbound;RD;2024-03-20 18:42:08.684 +0100;2024-03-20 18:42:08.688 +0100;;2024-03-20 18:42:08.000 +0100;2024-03-20 18:42:08.000 +0100;2024-03-20 18:42:11.000 +0100;;;com-publisher-out;598.149;0;com;52;com-commons-process.module/com-commons-process.processes.businessService.orderManagement.SimulateResultSiebel;0;;\n598.149;598.149;620.153.826.619;Create Request Logistics;outbound;RD;2024-03-21 22:41:31.377 +0100;2024-03-21 22:41:31.381 +0100;;2024-03-21 22:41:31.000 +0100;2024-03-21 22:41:31.000 +0100;2024-03-21 22:41:33.000 +0100;;;com-publisher-out;598.149;0;com;83;com-commons-process.module/com-commons-process.processes.businessService.orderManagement.createRequestLogistic;0;;\n598.149;598.149;620.153.804.649;Receive Welcome Call Response;inbound;RD;2024-03-20 18:42:13.000 +0100;2024-03-20 18:42:11.461 +0100;;2024-03-20 18:42:13.000 +0100;2024-03-20 18:42:13.000 +0100;2024-03-20 18:42:13.000 +0100;;;crm-publisher-in;598.149;339.770;crm;51;com2crm-itf-in.module/com2crm_itf_in.processes.businessProcess.orderManagement.ResponseIntermediateResultsFromCrm;0;;\n598.149;598.149;620.153.804.643;Update bpme process id on request;outbound;RD;2024-03-20 18:42:03.822 +0100;2024-03-20 18:42:03.826 +0100;;2024-03-20 18:42:03.000 +0100;2024-03-20 18:42:03.000 +0100;2024-03-20 18:42:04.000 +0100;;;com-publisher-out;598.149;0;com;521;com-commons-process.module/com-commons-process.bpme.MarkBpmeProcessIdOnRequest;0;;\n600.133;598.149;620.153.826.621;Send Logistic Order to GSI;outbound;RD;2024-03-21 22:41:34.390 +0100;2024-03-21 22:41:34.395 +0100;;2024-03-21 22:41:34.000 +0100;2024-03-21 22:41:34.000 +0100;2024-03-21 22:41:35.000 +0100;;;gsi-publisher-out;600.133;354.624;gsi;84;com2gsi.module/com2gsi.processes.businessProcess.SendOrderOut;0;;\n600.133;598.149;620.153.826.622;GSI ACQ result OK;inbound;RD;2024-03-21 22:41:35.000 +0100;2024-03-21 22:41:34.568 +0100;;2024-03-21 22:41:35.000 +0100;2024-03-21 22:41:35.000 +0100;2024-03-21 22:41:35.000 +0100;;;gsi-publisher-in;600.133;354.625;gsi;74;com2gsi.module/com2gsi.processes.businessProcess.NotificaGSIAcqIn;0;;\n600.133;598.149;620.153.826.620;Update bpme process id on request;outbound;RD;2024-03-21 22:41:34.032 +0100;2024-03-21 22:41:34.038 +0100;;2024-03-21 22:41:34.000 +0100;2024-03-21 22:41:34.000 +0100;2024-03-21 22:41:34.000 +0100;;;com-publisher-out;600.133;0;com;525;com-commons-process.module/com-commons-process.bpme.MarkBpmeProcessIdOnRequest;0"
      },
      {
        "id": "3.9",
        "nomeParagrafo": "PAR 2.9 - Estrazione dettagli fallimento a partire dalla actionId\n            (DIN1717413650316)",
        "codicePlSql": "select a.id,a.name,a.status,fd.* from action a, fault b,fault_doc fd  where \na.id=620153592235 and \nb.action_id=a.id and \n--a.name='Receive Unlock Order' and \na.status='FA' and\nfd.id=b.document_id",
        "outPutSql": "id;name;status;document_xml;ts_created;ts_last_updated;last_modifier;id;reprocess_error;header_xml\n620.153.324.462;Notify Start SOM to CRM;FA;Error on bwGeneralOutboundITF\nMessage:\nERROR on General Interface Outbound calling Business Service\nGST input:\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<pfx7:input\n                  xmlns:ns6=\"http://phoenix.wind.it/resource/xsd/bwGetActionAdditionalInfo.xsd\"\n                  xmlns:pfx7=\"http:/phoenix.wind.it/resource/xsd/ITFOutbound/ITFOutbound.xsd\"\n                  xmlns:pfx2=\"http://phoenix.wind.it/resource/xsd/ITFInbound/ITFInbound.xsd\"\n                  xmlns:ns=\"http://phoenix.wind.it/resource/xsd/bwGetAction.xsd\"\n                  xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\n                  xmlns:ns3=\"http://phoenix.wind.it/resource/xsd/api/bwEnqueue.xsd\"\n                  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<pfx7:root_id>204</pfx7:root_id>\n<pfx7:request_id>205</pfx7:request_id>\n<pfx7:action_id>620153324462</pfx7:action_id>\n<pfx7:action_name>Notify Start SOM to\n                  CRM</pfx7:action_name>\n<pfx7:action_handler>com2crm_itf_out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm</pfx7:action_handler>\n<pfx7:sequence_key>205</pfx7:sequence_key>\n<pfx7:system>crm</pfx7:system>\n<pfx7:keyName>package_id</pfx7:keyName>\n<pfx7:keyValue>205</pfx7:keyValue>\n<pfx7:caseId>13</pfx7:caseId>\n</pfx7:input>\nMessageCode: MSGCODE_UNDEF\nerrorDescription: version [] not found.\nBwClassException: ActivityFault\nProcessStack:\n                  com2crm_itf_out.processes.ftlSubscriber.SubscribeFtlCrmOut/bwGeneralOutboundITF->wind3.com-architecture.shared.gst.bwGeneralOutboundITF/BusinessServices\nexceptionType: technical\nStackTrace:\nBX-600017: Package [com2crm_itf_out.module] version [] not\n                  found.\n;at\n                  com.tibco.bw.core.runtime.bx.BWBxEngineContext.customizeFaultDetails(BWBxEngineContext.java:617)\n;at\n                  com.tibco.bx.core.BxSystemImpl.customizeFaultDetails(BxSystemImpl.java:2122)\n;at\n                  com.tibco.bx.core.behaviors.activity.BxCatchAllBehavior.processExtensionAttributes(BxCatchAllBehavior.java:86)\n;at\n                  com.tibco.bx.core.behaviors.link.BxLinkBehavior.eval(BxLinkBehavior.java:111)\n;at\n                  com.tibco.bx.core.behaviors.link.BxLinkBehavior.enter(BxLinkBehavior.java:74)\n;at\n                  com.tibco.bx.core.behaviors.link.BxLinkBehavior.enter(BxLinkBehavior.java:1)\n;at\n                  com.tibco.pvm.infra.api.impl.util.director.IpmEventDirectorBase.handleModelEvent(IpmEventDirectorBase.java:192)\n;at\n                  com.tibco.pvm.im.rt.xm.util.work.ImxEventDirector.invokeModelEvent(ImxEventDirector.java:30)\n;at\n                  com.tibco.pvm.im.rt.xm.util.work.ImxProcessWork.invokeModelEvent(ImxProcessWork.java:125)\n;at\n                  com.tibco.pvm.im.rt.xm.ImxInstControl.invokeModelEvent(ImxInstControl.java:145)\n;at\n                  com.tibco.bx.core.behaviors.activity.BxActivityBaseBehavior.invokeEnterOnErrorTransition(BxActivityBaseBehavior.java:3402)\n;at\n                  com.tibco.bx.core.behaviors.activity.BxActivityBaseBehavior.onFault(BxActivityBaseBehavior.java:2640)\n;at\n                  com.tibco.bx.core.behaviors.activity.BxActivityBaseBehavior.handleModelEvent(BxActivityBaseBehavior.java:1222)\n;at\n                  com.tibco.bx.core.behaviors.activity.BxActivityBaseBehavior.handleModelEvent(BxActivityBaseBehavior.java:1)\n;at\n                  com.tibco.pvm.infra.api.impl.util.director.IpmEventDirectorBase.handleModelEvent(IpmEventDirectorBase.java:204)\n;at\n                  com.tibco.pvm.infra.api.impl.util.director.IpmEventDirectorBase.handleEvent(IpmEventDirectorBase.java:111)\n;at\n                  com.tibco.pvm.infra.support.work.impl.WorkItemAbstract.execute(WorkItemAbstract.java:189)\n;at\n                  com.tibco.pvm.im.rt.xm.util.work.ImxSTWorkRunnable.doWorkBlock(ImxSTWorkRunnable.java:170)\n;at\n                  com.tibco.pvm.infra.services.engine.impl.STWorkRunnable.run(STWorkRunnable.java:50)\n;at\n                  com.tibco.pvm.im.rt.xm.util.work.ImxSTWorkRunnable.run(ImxSTWorkRunnable.java:62)\n;at\n                  java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n;at\n                  java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n;at java.base/java.lang.Thread.run(Thread.java:834)\nCaused by: java.lang.IllegalArgumentException: BX-600017:\n                  Package [com2crm_itf_out.module] version [] not found.\n;at\n                  com.tibco.bx.core.behaviors.activity.BxCallProcessBehavior.findProcessDefinition(BxCallProcessBehavior.java:313)\n;at\n                  com.tibco.bx.core.behaviors.activity.BxCallProcessBehavior.createSubProcess(BxCallProcessBehavior.java:187)\n;at\n                  com.tibco.bx.core.behaviors.activity.BxCallProcessBehavior.doEval(BxCallProcessBehavior.java:81)\n;at\n                  com.tibco.bx.core.behaviors.activity.BxActivityBaseBehavior.eval(BxActivityBaseBehavior.java:892)\n;at\n                  com.tibco.bx.core.behaviors.activity.BxActivityBaseBehavior.eval(BxActivityBaseBehavior.java:1)\n;at\n                  com.tibco.pvm.infra.api.impl.util.director.IpmEventDirectorBase.handleModelEvent(IpmEventDirectorBase.java:195)\n;... 8 more\n\nBlockMark:\n\nITFOutBound input:\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<pfx7:input\n                  xmlns:ns6=\"http://phoenix.wind.it/resource/xsd/bwGetActionAdditionalInfo.xsd\"\n                  xmlns:pfx7=\"http:/phoenix.wind.it/resource/xsd/ITFOutbound/ITFOutbound.xsd\"\n                  xmlns:pfx2=\"http://phoenix.wind.it/resource/xsd/ITFInbound/ITFInbound.xsd\"\n                  xmlns:ns=\"http://phoenix.wind.it/resource/xsd/bwGetAction.xsd\"\n                  xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\n                  xmlns:ns3=\"http://phoenix.wind.it/resource/xsd/api/bwEnqueue.xsd\"\n                  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<pfx7:root_id>204</pfx7:root_id>\n<pfx7:request_id>205</pfx7:request_id>\n<pfx7:action_id>620153324462</pfx7:action_id>\n<pfx7:action_name>Notify Start SOM to\n                  CRM</pfx7:action_name>\n<pfx7:action_handler>com2crm_itf_out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm</pfx7:action_handler>\n<pfx7:sequence_key>205</pfx7:sequence_key>\n<pfx7:system>crm</pfx7:system>\n<pfx7:keyName>package_id</pfx7:keyName>\n<pfx7:keyValue>205</pfx7:keyValue>\n<pfx7:caseId>13</pfx7:caseId>\n</pfx7:input>;2024-02-08 15:35:00.271 +0100;2024-02-08 15:53:59.015 +0100;wind3.com-architecture.shared.gst.bwGeneralOutboundITF;59.496;;Error on Insert Header"
      }
    ]
  },
  {
    "id": "4",
    "nomeCapitolo": "CAP 3 - Estrazioni provisioning SOM(DIN1717339283017)",
    "paragrafi": [
      {
        "id": "4.1",
        "nomeParagrafo": "PAR 3.1 - Esegue parsing dell'errore sui fallimenti SOM\n            (DIN1717339748096)",
        "codicePlSql": "select \n          regexp_match(fd.document_xml, '{\"code\":(.*?)}') codice_errore,--recupera i ko som\n          z.name,z.id,z.system,fd.* from action z,fault a,fault_doc fd,request b  \n          where \n      z.status='FA' and\n      b.id=z.request_id and \n      b.root_id in (select b.root_id from action a,request b where a.status='FA' \n      and a.system='som' \n      and a.direction='outbound'\n      and a.request_id=b.id\n)and\n      a.action_id =z.id and\n      fd.id =a.document_id and z.system='som'\n      limit 4",
        "outPutSql": "codice_errore;name;id;system\n{\"\\\"EOC_ERROR_1002\\\",\\\"reason\\\":\\\"Missing mandatory field\n                  paymentType : null for poName :\n                  po_CB_T_P65_NA_001.\\\",\\\"message\\\":\\\"Order will not be created\n                  due to incomplete or incorrect data\\\",\\\"status\\\":\\\"400\\\"\"};Send Service Order;620.153.324.379;som\n;Send Service Order;620.153.324.379;som\n{\"\\\"EOC_ERROR_1002\\\",\\\"reason\\\":\\\"Missing mandatory field\n                  RelatedEntity_IMSI.\\\",\\\"message\\\":\\\"Order will not be created\n                  due to incomplete or incorrect data\\\",\\\"status\\\":\\\"400\\\"\"};Send Service Order;620.153.481.214;som\n{\"\\\"EOC_W3_ORDER_0003\\\",\\\"reason\\\":\\\"MSISDN Not\n                  Active!\\\",\\\"message\\\":\\\"This order will not be created because\n                  the customerId does not exist in SR\\\",\\\"status\\\":\\\"400\\\"\"};Send Service Order;620.153.925.995;som"
      },
      {
        "id": "4.2",
        "nomeParagrafo": "PAR 3.2 - Estrae array ed elementi da un EMF di SOM\n            (DIN1717355961753)",
        "codicePlSql": "select \nb.message_xml::json rootJson\n,b.message_xml::json->'externalId' externalId\n,b.message_xml::json->'attrs' attrs --ritorna tutti gli elementi dell'array specificato attrs\n,b.message_xml::json->'attrs'->0->'name' ext --ritorna tutti gli elementi dell'array specificato attrs\n,b.message_xml::json->'attrs'->1 attrsElement --ritorna un elemento dell'array specificato attrs\n,b.message_xml::json->'productOrderItem' tuttoArray--ritorna tutti gli elementi dell'array specificato productOrderItem\n,b.message_xml::json->'productOrderItem'->0 elementoArray0-- ritorna l'elemento uno(pos 0) dell'array specificato productOrderItem\n,b.message_xml::json->'productOrderItem'->1 elementoArray1-- ritorna l'elemento due(pos 1) dell'array specificato productOrderItem\n,(b.message_xml::json->'productOrderItem'->0->>'product')::json#>>'{productCharacteristic,0}' --estrae l'elemento primo (pos 0) dell'array productCharacteristic\n,(b.message_xml::json->'productOrderItem'->0->>'product')::json#>>'{productCharacteristic,1}' --estrae l'elemento primo (pos 1) dell'array productCharacteristic\nfrom action  a ,action_msg b ,request c,request d\nwhere \n1=1 and\nb.message_xml like '%\"ProductOrder\"%' and\na.ts_created>current_date -90 and\nb.id=a.message_id and\nc.id=a.request_id and \nd.id=c.root_id and \n--d.name='Sim/Handset Change' and \nc.name='Network'and\na.name='Send Service Order' and \na.status='SA' AND \nc.id in (\nselect z.id\n--,zz.* \nfrom \n      request z,action zz,action_msg x where zz.request_id=z.id and z.name='Network' and zz.name='Send Service Order' and \n      z.root_id      in (select root_id from detail where value in ('1-619821002400')) and \n      zz.message_id=x.id\n      )",
        "outPutSql": "rootjson;externalid;attrs;ext;attrselement;tuttoarray;elementoarray0;elementoarray1;?column?;?column?\n{\"externalId\":\"1-619821002400\",\"channel\":[{\"id\":\"PHX\"}],\"productOrderItem\":[{\"id\":\"620154080781_517736867\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"simType\",\"value\":\"voice\"},{\"name\":\"famiglia\",\"value\":\"sim\"},{\"name\":\"serialNumber\",\"value\":\"8939880845100546336\"},{\"name\":\"ctype\",\"value\":\"PREPAGATO\"},{\"name\":\"commercialOfferName\",\"value\":\"PHX00033\"},{\"name\":\"isEnelVpnEnabled\",\"value\":\"0\"},{\"name\":\"technology\",\"value\":\"UMTS\"},{\"name\":\"isVpnEnabled\",\"value\":\"0\"},{\"name\":\"customerSegment\",\"value\":\"Business\"},{\"name\":\"imsi\",\"value\":\"222885451054643\"}],\"externalId\":\"1620302984012\"},\"productOffering\":{\"id\":\"bpo_Father_0001\"}},{\"id\":\"620154080781_14070302\",\"action\":\"Add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX00034\"},{\"name\":\"MSISDN\",\"value\":\"3206648991\"},{\"name\":\"numberClass\",\"value\":\"Regular\"},{\"name\":\"famiglia\",\"value\":\"sim\"}],\"externalId\":\"1620302984037\"},\"productOffering\":{\"id\":\"po_ANB_MSISDN\"}},{\"id\":\"620154080781_2114079556\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"famiglia\",\"value\":\"securityEnforcement\"},{\"name\":\"targetAPN\",\"value\":\"securityEnforcement\"},{\"name\":\"commercialOfferName\",\"value\":\"PHX80093\"}],\"externalId\":\"1620302984093\"},\"productOffering\":{\"id\":\"po_ANB_SecureEnf\"}},{\"id\":\"620154080781_2111702365\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX30017\"},{\"name\":\"famiglia\",\"value\":\"datiSim\"}],\"externalId\":\"1620302984088\"},\"productOffering\":{\"id\":\"po_ANB_EnableMMS\"}},{\"id\":\"620154080781_1042672548\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"voiceMailType\",\"value\":\"A\"},{\"name\":\"password\",\"value\":\"1111\"},{\"name\":\"famiglia\",\"value\":\"serviziSim\"},{\"name\":\"language\",\"value\":\"1\"},{\"name\":\"commercialOfferName\",\"value\":\"PHX00041\"}],\"externalId\":\"1620302984046\"},\"productOffering\":{\"id\":\"po_ANB_VoiceMail\"}},{\"id\":\"620154080781_280589919\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX00042\"},{\"name\":\"famiglia\",\"value\":\"serviziSim\"}],\"externalId\":\"1620302984049\"},\"productOffering\":{\"id\":\"po_ANB_EnableSMSOutgoing\"}},{\"id\":\"620154080781_689704645\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"serviceVideostreaming\",\"value\":\"0\"},{\"name\":\"serviceWap\",\"value\":\"0\"},{\"name\":\"serviceLeonardoPushMail\",\"value\":\"0\"},{\"name\":\"serviceInternetBIZ\",\"value\":\"1\"},{\"name\":\"famiglia\",\"value\":\"serviziSim,addsOn\"},{\"name\":\"commercialOfferName\",\"value\":\"PHX30014\"},{\"name\":\"serviceWapBIZ\",\"value\":\"1\"},{\"name\":\"serviceInternet\",\"value\":\"0\"}],\"externalId\":\"1620302984087\"},\"productOffering\":{\"id\":\"po_ANB_APN_001\"}},{\"id\":\"620154080781_2094397895\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX00039\"},{\"name\":\"famiglia\",\"value\":\"serviziSim\"}],\"externalId\":\"1620302984044\"},\"productOffering\":{\"id\":\"po_ANB_EnableVoiceRoaming\"}},{\"id\":\"620154080781_1049929219\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX00040\"},{\"name\":\"famiglia\",\"value\":\"serviziSim\"}],\"externalId\":\"1620302984045\"},\"productOffering\":{\"id\":\"po_ANB_EnableVoiceInternational\"}},{\"id\":\"620154080781_83722056\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"famiglia\",\"value\":\"serviziSim\"},{\"name\":\"commercialOfferName\",\"value\":\"PHX50805\"}],\"externalId\":\"1620304314250\"},\"productOffering\":{\"id\":\"po_ANB_MobileAccess4G\"}},{\"id\":\"620154080781_183146451\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"numberOfRenewal\",\"value\":\"-1\"},{\"name\":\"refillAmount\",\"value\":\"1000\"},{\"name\":\"refillThreshold\",\"value\":\"500\"},{\"name\":\"commercialOfferName\",\"value\":\"PHX00089\"}],\"externalId\":\"1620302984050\"},\"productOffering\":{\"id\":\"po_CB_ATR_NA_NA_001\"}},{\"id\":\"620154080781_1128030619\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"voiceNatOgOffnet\",\"value\":\"0\"},{\"name\":\"numberOfRenewal_1\",\"value\":\"-1\"},{\"name\":\"dataRoam_1\",\"value\":\"250MB\"},{\"name\":\"zoneName_3\",\"value\":\"Zona\n                  3\"},{\"name\":\"tokenAmount_4\",\"value\":\"3500\"},{\"name\":\"voiceRoamIcOg_4\",\"value\":\"100\"},{\"name\":\"resourceduration_4\",\"value\":\"Daily\"},{\"name\":\"resourceduration_2\",\"value\":\"Daily\"},{\"name\":\"resourceduration_1\",\"value\":\"Daily\"},{\"name\":\"addonRLAH\",\"value\":[\"CH\"]},{\"name\":\"optoutVoiceFlag\",\"value\":\"0\"},{\"name\":\"recfeeduration\",\"value\":\"Monthly\"},{\"name\":\"voiceRoamIcOg\",\"value\":\"0\"},{\"name\":\"zoneName_4\",\"value\":\"Zona\n                  4\"},{\"name\":\"priceRecurrentID\",\"value\":\"ID_PRICE_66\"},{\"name\":\"smsNatOffnet\",\"value\":\"0\"},{\"name\":\"barPPUDat\",\"value\":\"0\"},{\"name\":\"compkgname\",\"value\":\"PHX70087\"},{\"name\":\"numberOfRenewal_2\",\"value\":\"-1\"},{\"name\":\"optoutSmsFlag\",\"value\":\"0\"},{\"name\":\"billCycleDay\",\"value\":\"1\"},{\"name\":\"smsRoamOg_2\",\"value\":\"100\"},{\"name\":\"renewalCountInDur_1\",\"value\":\"3\"},{\"name\":\"smsRoamOg\",\"value\":\"0\"},{\"name\":\"voiceRoamOg_3\",\"value\":\"0\"},{\"name\":\"smsRoamOg_1\",\"value\":\"100\"},{\"name\":\"dataRoam_2\",\"value\":\"250MB\"},{\"name\":\"voiceRoamIcOg_3\",\"value\":\"100\"},{\"name\":\"voiceNatOgOnnetOffnet\",\"value\":\"Unlimited\"},{\"name\":\"voiceRoamIc_3\",\"value\":\"0\"},{\"name\":\"dataRoam\",\"value\":\"0\"},{\"name\":\"commercialName_3\",\"value\":\"Costo\n                  Daily Pass\"},{\"name\":\"zoneName_1\",\"value\":\"Zona\n                  1\"},{\"name\":\"billCycleMonth\",\"value\":\"1\"},{\"name\":\"voiceRoamOg_2\",\"value\":\"0\"},{\"name\":\"numberOfRenewal_4\",\"value\":\"-1\"},{\"name\":\"tokenAmount_3\",\"value\":\"2500\"},{\"name\":\"commercialName_2\",\"value\":\"Costo\n                  Daily\n                  Pass\"},{\"name\":\"dataNat_RDA\",\"value\":\"0\"},{\"name\":\"commercialName_4\",\"value\":\"Costo\n                  Daily\n                  Pass\"},{\"name\":\"targetGARoam_1\",\"value\":[\"AR\",\"AU\",\"BD\",\"BR\",\"CA\",\"CL\",\"CR\",\"DO\",\"EC\",\"FO\",\"GE\",\"GT\",\"HK\",\"IL\",\"KZ\",\"KR\",\"MX\",\"ME\",\"NZ\",\"NI\",\"PK\",\"PA\",\"PE\",\"SA\",\"LK\",\"CH\",\"TR\",\"UA\",\"US\",\"UY\",\"UZ\",\"VE\",\"VN\"]},{\"name\":\"targetGAIntOg\",\"value\":[\"EXCEPT\",\"DZ\",\"DZ_MB\",\"CU\",\"CU_MB\",\"ME\",\"ME_MB\",\"XK\",\"XK_MB\",\"SN\",\"SN_MB\",\"SO\",\"TN\",\"TN_MB\",\"ZD_XS\",\"_XS\",\"_XT\"]},{\"name\":\"mktpkgname_1\",\"value\":\"Daily\n                  Pass\"},{\"name\":\"smsRoamOg_4\",\"value\":\"100\"},{\"name\":\"targetGARoam_2\",\"value\":[\"DZ\",\"AM\",\"AZ\",\"BH\",\"BY\",\"BJ\",\"CN\",\"CO\",\"CG\",\"EG\",\"GA\",\"GH\",\"GL\",\"HN\",\"ID\",\"JP\",\"KE\",\"KG\",\"KW\",\"MO\",\"MK\",\"MY\",\"MW\",\"MC\",\"NG\",\"OM\",\"PY\",\"PR\",\"RE\",\"RU\",\"SG\",\"ZA\",\"TW\",\"TJ\",\"TZ\",\"TH\",\"UG\",\"ZM\"]},{\"name\":\"communityID\",\"value\":\"255063\"},{\"name\":\"voiceNatOgOnnet\",\"value\":\"0\"},{\"name\":\"numberOfRenewal\",\"value\":\"-1\"},{\"name\":\"numberOfRenewal_3\",\"value\":\"-1\"},{\"name\":\"basePricingId\",\"value\":\"25\"},{\"name\":\"qualityOfService_1\",\"value\":\"256\"},{\"name\":\"voiceIntOg\",\"value\":\"500\"},{\"name\":\"mmsNatOnnet\",\"value\":\"0\"},{\"name\":\"zoneName_2\",\"value\":\"Zona\n                  2\"},{\"name\":\"voiceRoamIc_4\",\"value\":\"0\"},{\"name\":\"voiceRoamIcOg_1\",\"value\":\"100\"},{\"name\":\"qualityOfService_2\",\"value\":\"256\"},{\"name\":\"qualityOfService\",\"value\":\"256\"},{\"name\":\"targetGARoam_3\",\"value\":[\"BO\",\"BA\",\"BN\",\"CV\",\"TD\",\"SV\",\"IN\",\"MD\",\"RS\",\"TN\",\"AE\"]},{\"name\":\"voiceRLAH\",\"value\":\"0\"},{\"name\":\"voiceRoamOg_1\",\"value\":\"0\"},{\"name\":\"renewalCountInDur_2\",\"value\":\"3\"},{\"name\":\"renewalCountInDur_4\",\"value\":\"3\"},{\"name\":\"voiceRoamOg\",\"value\":\"0\"},{\"name\":\"resourceduration_3\",\"value\":\"Daily\"},{\"name\":\"voiceRoamIc\",\"value\":\"0\"},{\"name\":\"smsNatOnnet\",\"value\":\"0\"},{\"name\":\"commercialName_1\",\"value\":\"Costo\n                  Daily\n                  Pass\"},{\"name\":\"paymentType\",\"value\":\"tied\"},{\"name\":\"voiceRoamIcOg_2\",\"value\":\"100\"},{\"name\":\"dataCSD\",\"value\":\"0\"},{\"name\":\"smsRoamOg_3\",\"value\":\"100\"},{\"name\":\"qualityOfService_3\",\"value\":\"256\"},{\"name\":\"smsIntOg\",\"value\":\"0\"},{\"name\":\"renewalCountInDur_3\",\"value\":\"3\"},{\"name\":\"tokenAmount_1\",\"value\":\"500\"},{\"name\":\"smsNatIntRoamOg\",\"value\":\"0\"},{\"name\":\"dataNat\",\"value\":\"Unlimited\"},{\"name\":\"dataRoam_3\",\"value\":\"250MB\"},{\"name\":\"voiceRoamIc_2\",\"value\":\"0\"},{\"name\":\"smsNatOnnetOffnet\",\"value\":\"500\"},{\"name\":\"qualityOfService_4\",\"value\":\"256\"},{\"name\":\"gracePeriodrule\",\"value\":\"0\"},{\"name\":\"voiceRoamIc_1\",\"value\":\"0\"},{\"name\":\"smsNatRoamOg\",\"value\":\"0\"},{\"name\":\"dataRoamAllowance\",\"value\":\"40GB\"},{\"name\":\"voiceRoamOg_4\",\"value\":\"0\"},{\"name\":\"sms_mmsNatOnnet\",\"value\":\"0\"},{\"name\":\"optoutDataFlag\",\"value\":\"0\"},{\"name\":\"tokenAmount_2\",\"value\":\"1500\"},{\"name\":\"dataRoam_4\",\"value\":\"250MB\"},{\"name\":\"targetGARoam_4\",\"value\":[\"AF\",\"AL\",\"AI\",\"AG\",\"BB\",\"KH\",\"KY\",\"DO\",\"GD\",\"MG\",\"MA\",\"MM\",\"NP\",\"NE\",\"QA\",\"SN\",\"KN\",\"LC\",\"VC\",\"TC\",\"VG\",\"YE\"]}],\"externalId\":\"1620302984089\"},\"productOffering\":{\"id\":\"bpo_NA_M_PM_T_001\"}},{\"id\":\"620154080781_1457224210\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX70278\"},{\"name\":\"famiglia\",\"value\":\"datiSim\"}],\"externalId\":\"1620304314269\"},\"productOffering\":{\"id\":\"po_ANB_MobileAccess5G\"}},{\"id\":\"620154080781_1521547611\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"refillAmount\",\"value\":\"500\"},{\"name\":\"famiglia\",\"value\":\"administrative\"}]},\"productOffering\":{\"id\":\"po_AAB_Refill\"}}],\"relatedParty\":[{\"id\":\"3206648991\",\"role\":\"Customer\"}],\"type\":\"ProductOrder\",\"attrs\":[{\"name\":\"journeyType\",\"value\":\"OnBoarding\"},{\"name\":\"journeySubType\",\"value\":\"Standard\"}],\"relatedEntity\":[{\"role\":\"IMSI\",\"reference\":\"222885451054643\"},{\"role\":\"MSISDN\",\"reference\":\"3206648991\"}],\"requester\":\"CRM\",\"requestID\":\"622399\"};\"1-619821002400\";[{\"name\":\"journeyType\",\"value\":\"OnBoarding\"},{\"name\":\"journeySubType\",\"value\":\"Standard\"}];\"journeyType\";{\"name\":\"journeySubType\",\"value\":\"Standard\"};[{\"id\":\"620154080781_517736867\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"simType\",\"value\":\"voice\"},{\"name\":\"famiglia\",\"value\":\"sim\"},{\"name\":\"serialNumber\",\"value\":\"8939880845100546336\"},{\"name\":\"ctype\",\"value\":\"PREPAGATO\"},{\"name\":\"commercialOfferName\",\"value\":\"PHX00033\"},{\"name\":\"isEnelVpnEnabled\",\"value\":\"0\"},{\"name\":\"technology\",\"value\":\"UMTS\"},{\"name\":\"isVpnEnabled\",\"value\":\"0\"},{\"name\":\"customerSegment\",\"value\":\"Business\"},{\"name\":\"imsi\",\"value\":\"222885451054643\"}],\"externalId\":\"1620302984012\"},\"productOffering\":{\"id\":\"bpo_Father_0001\"}},{\"id\":\"620154080781_14070302\",\"action\":\"Add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX00034\"},{\"name\":\"MSISDN\",\"value\":\"3206648991\"},{\"name\":\"numberClass\",\"value\":\"Regular\"},{\"name\":\"famiglia\",\"value\":\"sim\"}],\"externalId\":\"1620302984037\"},\"productOffering\":{\"id\":\"po_ANB_MSISDN\"}},{\"id\":\"620154080781_2114079556\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"famiglia\",\"value\":\"securityEnforcement\"},{\"name\":\"targetAPN\",\"value\":\"securityEnforcement\"},{\"name\":\"commercialOfferName\",\"value\":\"PHX80093\"}],\"externalId\":\"1620302984093\"},\"productOffering\":{\"id\":\"po_ANB_SecureEnf\"}},{\"id\":\"620154080781_2111702365\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX30017\"},{\"name\":\"famiglia\",\"value\":\"datiSim\"}],\"externalId\":\"1620302984088\"},\"productOffering\":{\"id\":\"po_ANB_EnableMMS\"}},{\"id\":\"620154080781_1042672548\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"voiceMailType\",\"value\":\"A\"},{\"name\":\"password\",\"value\":\"1111\"},{\"name\":\"famiglia\",\"value\":\"serviziSim\"},{\"name\":\"language\",\"value\":\"1\"},{\"name\":\"commercialOfferName\",\"value\":\"PHX00041\"}],\"externalId\":\"1620302984046\"},\"productOffering\":{\"id\":\"po_ANB_VoiceMail\"}},{\"id\":\"620154080781_280589919\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX00042\"},{\"name\":\"famiglia\",\"value\":\"serviziSim\"}],\"externalId\":\"1620302984049\"},\"productOffering\":{\"id\":\"po_ANB_EnableSMSOutgoing\"}},{\"id\":\"620154080781_689704645\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"serviceVideostreaming\",\"value\":\"0\"},{\"name\":\"serviceWap\",\"value\":\"0\"},{\"name\":\"serviceLeonardoPushMail\",\"value\":\"0\"},{\"name\":\"serviceInternetBIZ\",\"value\":\"1\"},{\"name\":\"famiglia\",\"value\":\"serviziSim,addsOn\"},{\"name\":\"commercialOfferName\",\"value\":\"PHX30014\"},{\"name\":\"serviceWapBIZ\",\"value\":\"1\"},{\"name\":\"serviceInternet\",\"value\":\"0\"}],\"externalId\":\"1620302984087\"},\"productOffering\":{\"id\":\"po_ANB_APN_001\"}},{\"id\":\"620154080781_2094397895\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX00039\"},{\"name\":\"famiglia\",\"value\":\"serviziSim\"}],\"externalId\":\"1620302984044\"},\"productOffering\":{\"id\":\"po_ANB_EnableVoiceRoaming\"}},{\"id\":\"620154080781_1049929219\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX00040\"},{\"name\":\"famiglia\",\"value\":\"serviziSim\"}],\"externalId\":\"1620302984045\"},\"productOffering\":{\"id\":\"po_ANB_EnableVoiceInternational\"}},{\"id\":\"620154080781_83722056\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"famiglia\",\"value\":\"serviziSim\"},{\"name\":\"commercialOfferName\",\"value\":\"PHX50805\"}],\"externalId\":\"1620304314250\"},\"productOffering\":{\"id\":\"po_ANB_MobileAccess4G\"}},{\"id\":\"620154080781_183146451\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"numberOfRenewal\",\"value\":\"-1\"},{\"name\":\"refillAmount\",\"value\":\"1000\"},{\"name\":\"refillThreshold\",\"value\":\"500\"},{\"name\":\"commercialOfferName\",\"value\":\"PHX00089\"}],\"externalId\":\"1620302984050\"},\"productOffering\":{\"id\":\"po_CB_ATR_NA_NA_001\"}},{\"id\":\"620154080781_1128030619\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"voiceNatOgOffnet\",\"value\":\"0\"},{\"name\":\"numberOfRenewal_1\",\"value\":\"-1\"},{\"name\":\"dataRoam_1\",\"value\":\"250MB\"},{\"name\":\"zoneName_3\",\"value\":\"Zona\n                  3\"},{\"name\":\"tokenAmount_4\",\"value\":\"3500\"},{\"name\":\"voiceRoamIcOg_4\",\"value\":\"100\"},{\"name\":\"resourceduration_4\",\"value\":\"Daily\"},{\"name\":\"resourceduration_2\",\"value\":\"Daily\"},{\"name\":\"resourceduration_1\",\"value\":\"Daily\"},{\"name\":\"addonRLAH\",\"value\":[\"CH\"]},{\"name\":\"optoutVoiceFlag\",\"value\":\"0\"},{\"name\":\"recfeeduration\",\"value\":\"Monthly\"},{\"name\":\"voiceRoamIcOg\",\"value\":\"0\"},{\"name\":\"zoneName_4\",\"value\":\"Zona\n                  4\"},{\"name\":\"priceRecurrentID\",\"value\":\"ID_PRICE_66\"},{\"name\":\"smsNatOffnet\",\"value\":\"0\"},{\"name\":\"barPPUDat\",\"value\":\"0\"},{\"name\":\"compkgname\",\"value\":\"PHX70087\"},{\"name\":\"numberOfRenewal_2\",\"value\":\"-1\"},{\"name\":\"optoutSmsFlag\",\"value\":\"0\"},{\"name\":\"billCycleDay\",\"value\":\"1\"},{\"name\":\"smsRoamOg_2\",\"value\":\"100\"},{\"name\":\"renewalCountInDur_1\",\"value\":\"3\"},{\"name\":\"smsRoamOg\",\"value\":\"0\"},{\"name\":\"voiceRoamOg_3\",\"value\":\"0\"},{\"name\":\"smsRoamOg_1\",\"value\":\"100\"},{\"name\":\"dataRoam_2\",\"value\":\"250MB\"},{\"name\":\"voiceRoamIcOg_3\",\"value\":\"100\"},{\"name\":\"voiceNatOgOnnetOffnet\",\"value\":\"Unlimited\"},{\"name\":\"voiceRoamIc_3\",\"value\":\"0\"},{\"name\":\"dataRoam\",\"value\":\"0\"},{\"name\":\"commercialName_3\",\"value\":\"Costo\n                  Daily Pass\"},{\"name\":\"zoneName_1\",\"value\":\"Zona\n                  1\"},{\"name\":\"billCycleMonth\",\"value\":\"1\"},{\"name\":\"voiceRoamOg_2\",\"value\":\"0\"},{\"name\":\"numberOfRenewal_4\",\"value\":\"-1\"},{\"name\":\"tokenAmount_3\",\"value\":\"2500\"},{\"name\":\"commercialName_2\",\"value\":\"Costo\n                  Daily\n                  Pass\"},{\"name\":\"dataNat_RDA\",\"value\":\"0\"},{\"name\":\"commercialName_4\",\"value\":\"Costo\n                  Daily\n                  Pass\"},{\"name\":\"targetGARoam_1\",\"value\":[\"AR\",\"AU\",\"BD\",\"BR\",\"CA\",\"CL\",\"CR\",\"DO\",\"EC\",\"FO\",\"GE\",\"GT\",\"HK\",\"IL\",\"KZ\",\"KR\",\"MX\",\"ME\",\"NZ\",\"NI\",\"PK\",\"PA\",\"PE\",\"SA\",\"LK\",\"CH\",\"TR\",\"UA\",\"US\",\"UY\",\"UZ\",\"VE\",\"VN\"]},{\"name\":\"targetGAIntOg\",\"value\":[\"EXCEPT\",\"DZ\",\"DZ_MB\",\"CU\",\"CU_MB\",\"ME\",\"ME_MB\",\"XK\",\"XK_MB\",\"SN\",\"SN_MB\",\"SO\",\"TN\",\"TN_MB\",\"ZD_XS\",\"_XS\",\"_XT\"]},{\"name\":\"mktpkgname_1\",\"value\":\"Daily\n                  Pass\"},{\"name\":\"smsRoamOg_4\",\"value\":\"100\"},{\"name\":\"targetGARoam_2\",\"value\":[\"DZ\",\"AM\",\"AZ\",\"BH\",\"BY\",\"BJ\",\"CN\",\"CO\",\"CG\",\"EG\",\"GA\",\"GH\",\"GL\",\"HN\",\"ID\",\"JP\",\"KE\",\"KG\",\"KW\",\"MO\",\"MK\",\"MY\",\"MW\",\"MC\",\"NG\",\"OM\",\"PY\",\"PR\",\"RE\",\"RU\",\"SG\",\"ZA\",\"TW\",\"TJ\",\"TZ\",\"TH\",\"UG\",\"ZM\"]},{\"name\":\"communityID\",\"value\":\"255063\"},{\"name\":\"voiceNatOgOnnet\",\"value\":\"0\"},{\"name\":\"numberOfRenewal\",\"value\":\"-1\"},{\"name\":\"numberOfRenewal_3\",\"value\":\"-1\"},{\"name\":\"basePricingId\",\"value\":\"25\"},{\"name\":\"qualityOfService_1\",\"value\":\"256\"},{\"name\":\"voiceIntOg\",\"value\":\"500\"},{\"name\":\"mmsNatOnnet\",\"value\":\"0\"},{\"name\":\"zoneName_2\",\"value\":\"Zona\n                  2\"},{\"name\":\"voiceRoamIc_4\",\"value\":\"0\"},{\"name\":\"voiceRoamIcOg_1\",\"value\":\"100\"},{\"name\":\"qualityOfService_2\",\"value\":\"256\"},{\"name\":\"qualityOfService\",\"value\":\"256\"},{\"name\":\"targetGARoam_3\",\"value\":[\"BO\",\"BA\",\"BN\",\"CV\",\"TD\",\"SV\",\"IN\",\"MD\",\"RS\",\"TN\",\"AE\"]},{\"name\":\"voiceRLAH\",\"value\":\"0\"},{\"name\":\"voiceRoamOg_1\",\"value\":\"0\"},{\"name\":\"renewalCountInDur_2\",\"value\":\"3\"},{\"name\":\"renewalCountInDur_4\",\"value\":\"3\"},{\"name\":\"voiceRoamOg\",\"value\":\"0\"},{\"name\":\"resourceduration_3\",\"value\":\"Daily\"},{\"name\":\"voiceRoamIc\",\"value\":\"0\"},{\"name\":\"smsNatOnnet\",\"value\":\"0\"},{\"name\":\"commercialName_1\",\"value\":\"Costo\n                  Daily\n                  Pass\"},{\"name\":\"paymentType\",\"value\":\"tied\"},{\"name\":\"voiceRoamIcOg_2\",\"value\":\"100\"},{\"name\":\"dataCSD\",\"value\":\"0\"},{\"name\":\"smsRoamOg_3\",\"value\":\"100\"},{\"name\":\"qualityOfService_3\",\"value\":\"256\"},{\"name\":\"smsIntOg\",\"value\":\"0\"},{\"name\":\"renewalCountInDur_3\",\"value\":\"3\"},{\"name\":\"tokenAmount_1\",\"value\":\"500\"},{\"name\":\"smsNatIntRoamOg\",\"value\":\"0\"},{\"name\":\"dataNat\",\"value\":\"Unlimited\"},{\"name\":\"dataRoam_3\",\"value\":\"250MB\"},{\"name\":\"voiceRoamIc_2\",\"value\":\"0\"},{\"name\":\"smsNatOnnetOffnet\",\"value\":\"500\"},{\"name\":\"qualityOfService_4\",\"value\":\"256\"},{\"name\":\"gracePeriodrule\",\"value\":\"0\"},{\"name\":\"voiceRoamIc_1\",\"value\":\"0\"},{\"name\":\"smsNatRoamOg\",\"value\":\"0\"},{\"name\":\"dataRoamAllowance\",\"value\":\"40GB\"},{\"name\":\"voiceRoamOg_4\",\"value\":\"0\"},{\"name\":\"sms_mmsNatOnnet\",\"value\":\"0\"},{\"name\":\"optoutDataFlag\",\"value\":\"0\"},{\"name\":\"tokenAmount_2\",\"value\":\"1500\"},{\"name\":\"dataRoam_4\",\"value\":\"250MB\"},{\"name\":\"targetGARoam_4\",\"value\":[\"AF\",\"AL\",\"AI\",\"AG\",\"BB\",\"KH\",\"KY\",\"DO\",\"GD\",\"MG\",\"MA\",\"MM\",\"NP\",\"NE\",\"QA\",\"SN\",\"KN\",\"LC\",\"VC\",\"TC\",\"VG\",\"YE\"]}],\"externalId\":\"1620302984089\"},\"productOffering\":{\"id\":\"bpo_NA_M_PM_T_001\"}},{\"id\":\"620154080781_1457224210\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX70278\"},{\"name\":\"famiglia\",\"value\":\"datiSim\"}],\"externalId\":\"1620304314269\"},\"productOffering\":{\"id\":\"po_ANB_MobileAccess5G\"}},{\"id\":\"620154080781_1521547611\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"refillAmount\",\"value\":\"500\"},{\"name\":\"famiglia\",\"value\":\"administrative\"}]},\"productOffering\":{\"id\":\"po_AAB_Refill\"}}];{\"id\":\"620154080781_517736867\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"simType\",\"value\":\"voice\"},{\"name\":\"famiglia\",\"value\":\"sim\"},{\"name\":\"serialNumber\",\"value\":\"8939880845100546336\"},{\"name\":\"ctype\",\"value\":\"PREPAGATO\"},{\"name\":\"commercialOfferName\",\"value\":\"PHX00033\"},{\"name\":\"isEnelVpnEnabled\",\"value\":\"0\"},{\"name\":\"technology\",\"value\":\"UMTS\"},{\"name\":\"isVpnEnabled\",\"value\":\"0\"},{\"name\":\"customerSegment\",\"value\":\"Business\"},{\"name\":\"imsi\",\"value\":\"222885451054643\"}],\"externalId\":\"1620302984012\"},\"productOffering\":{\"id\":\"bpo_Father_0001\"}};{\"id\":\"620154080781_14070302\",\"action\":\"Add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX00034\"},{\"name\":\"MSISDN\",\"value\":\"3206648991\"},{\"name\":\"numberClass\",\"value\":\"Regular\"},{\"name\":\"famiglia\",\"value\":\"sim\"}],\"externalId\":\"1620302984037\"},\"productOffering\":{\"id\":\"po_ANB_MSISDN\"}};{\"name\":\"simType\",\"value\":\"voice\"};{\"name\":\"famiglia\",\"value\":\"sim\"}\n{\"externalId\":\"1-619821002400\",\"channel\":[{\"id\":\"PHX\"}],\"productOrderItem\":[{\"id\":\"620154080782_1960647843\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"simType\",\"value\":\"voice\"},{\"name\":\"famiglia\",\"value\":\"sim\"},{\"name\":\"serialNumber\",\"value\":\"8939880845100546344\"},{\"name\":\"ctype\",\"value\":\"PREPAGATO\"},{\"name\":\"commercialOfferName\",\"value\":\"PHX00033\"},{\"name\":\"isEnelVpnEnabled\",\"value\":\"0\"},{\"name\":\"technology\",\"value\":\"UMTS\"},{\"name\":\"isVpnEnabled\",\"value\":\"0\"},{\"name\":\"customerSegment\",\"value\":\"Business\"},{\"name\":\"imsi\",\"value\":\"222885451054644\"}],\"externalId\":\"1620302984097\"},\"productOffering\":{\"id\":\"bpo_Father_0001\"}},{\"id\":\"620154080782_1077623222\",\"action\":\"Add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX00034\"},{\"name\":\"MSISDN\",\"value\":\"3206648676\"},{\"name\":\"numberClass\",\"value\":\"Regular\"},{\"name\":\"famiglia\",\"value\":\"sim\"}],\"externalId\":\"1620302984122\"},\"productOffering\":{\"id\":\"po_ANB_MSISDN\"}},{\"id\":\"620154080782_906154476\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"famiglia\",\"value\":\"securityEnforcement\"},{\"name\":\"targetAPN\",\"value\":\"securityEnforcement\"},{\"name\":\"commercialOfferName\",\"value\":\"PHX80093\"}],\"externalId\":\"1620302984178\"},\"productOffering\":{\"id\":\"po_ANB_SecureEnf\"}},{\"id\":\"620154080782_979290423\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX30017\"},{\"name\":\"famiglia\",\"value\":\"datiSim\"}],\"externalId\":\"1620302984173\"},\"productOffering\":{\"id\":\"po_ANB_EnableMMS\"}},{\"id\":\"620154080782_1828493471\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"voiceMailType\",\"value\":\"A\"},{\"name\":\"password\",\"value\":\"1111\"},{\"name\":\"famiglia\",\"value\":\"serviziSim\"},{\"name\":\"language\",\"value\":\"1\"},{\"name\":\"commercialOfferName\",\"value\":\"PHX00041\"}],\"externalId\":\"1620302984131\"},\"productOffering\":{\"id\":\"po_ANB_VoiceMail\"}},{\"id\":\"620154080782_485062578\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX00042\"},{\"name\":\"famiglia\",\"value\":\"serviziSim\"}],\"externalId\":\"1620302984134\"},\"productOffering\":{\"id\":\"po_ANB_EnableSMSOutgoing\"}},{\"id\":\"620154080782_1733797629\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"serviceVideostreaming\",\"value\":\"0\"},{\"name\":\"serviceWap\",\"value\":\"0\"},{\"name\":\"serviceLeonardoPushMail\",\"value\":\"0\"},{\"name\":\"serviceInternetBIZ\",\"value\":\"1\"},{\"name\":\"famiglia\",\"value\":\"serviziSim,addsOn\"},{\"name\":\"commercialOfferName\",\"value\":\"PHX30014\"},{\"name\":\"serviceWapBIZ\",\"value\":\"1\"},{\"name\":\"serviceInternet\",\"value\":\"0\"}],\"externalId\":\"1620302984172\"},\"productOffering\":{\"id\":\"po_ANB_APN_001\"}},{\"id\":\"620154080782_698469269\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX00039\"},{\"name\":\"famiglia\",\"value\":\"serviziSim\"}],\"externalId\":\"1620302984129\"},\"productOffering\":{\"id\":\"po_ANB_EnableVoiceRoaming\"}},{\"id\":\"620154080782_1981545684\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX00040\"},{\"name\":\"famiglia\",\"value\":\"serviziSim\"}],\"externalId\":\"1620302984130\"},\"productOffering\":{\"id\":\"po_ANB_EnableVoiceInternational\"}},{\"id\":\"620154080782_1920970661\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"famiglia\",\"value\":\"serviziSim\"},{\"name\":\"commercialOfferName\",\"value\":\"PHX50805\"}],\"externalId\":\"1620304314259\"},\"productOffering\":{\"id\":\"po_ANB_MobileAccess4G\"}},{\"id\":\"620154080782_755004597\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"numberOfRenewal\",\"value\":\"-1\"},{\"name\":\"refillAmount\",\"value\":\"1000\"},{\"name\":\"refillThreshold\",\"value\":\"500\"},{\"name\":\"commercialOfferName\",\"value\":\"PHX00089\"}],\"externalId\":\"1620302984135\"},\"productOffering\":{\"id\":\"po_CB_ATR_NA_NA_001\"}},{\"id\":\"620154080782_741635029\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"voiceNatOgOffnet\",\"value\":\"0\"},{\"name\":\"numberOfRenewal_1\",\"value\":\"-1\"},{\"name\":\"dataRoam_1\",\"value\":\"250MB\"},{\"name\":\"zoneName_3\",\"value\":\"Zona\n                  3\"},{\"name\":\"tokenAmount_4\",\"value\":\"3500\"},{\"name\":\"voiceRoamIcOg_4\",\"value\":\"100\"},{\"name\":\"resourceduration_4\",\"value\":\"Daily\"},{\"name\":\"resourceduration_2\",\"value\":\"Daily\"},{\"name\":\"resourceduration_1\",\"value\":\"Daily\"},{\"name\":\"addonRLAH\",\"value\":[\"CH\"]},{\"name\":\"optoutVoiceFlag\",\"value\":\"0\"},{\"name\":\"recfeeduration\",\"value\":\"Monthly\"},{\"name\":\"voiceRoamIcOg\",\"value\":\"0\"},{\"name\":\"zoneName_4\",\"value\":\"Zona\n                  4\"},{\"name\":\"priceRecurrentID\",\"value\":\"ID_PRICE_66\"},{\"name\":\"smsNatOffnet\",\"value\":\"0\"},{\"name\":\"barPPUDat\",\"value\":\"0\"},{\"name\":\"compkgname\",\"value\":\"PHX70087\"},{\"name\":\"numberOfRenewal_2\",\"value\":\"-1\"},{\"name\":\"optoutSmsFlag\",\"value\":\"0\"},{\"name\":\"billCycleDay\",\"value\":\"1\"},{\"name\":\"smsRoamOg_2\",\"value\":\"100\"},{\"name\":\"renewalCountInDur_1\",\"value\":\"3\"},{\"name\":\"smsRoamOg\",\"value\":\"0\"},{\"name\":\"voiceRoamOg_3\",\"value\":\"0\"},{\"name\":\"smsRoamOg_1\",\"value\":\"100\"},{\"name\":\"dataRoam_2\",\"value\":\"250MB\"},{\"name\":\"voiceRoamIcOg_3\",\"value\":\"100\"},{\"name\":\"voiceNatOgOnnetOffnet\",\"value\":\"Unlimited\"},{\"name\":\"voiceRoamIc_3\",\"value\":\"0\"},{\"name\":\"dataRoam\",\"value\":\"0\"},{\"name\":\"commercialName_3\",\"value\":\"Costo\n                  Daily Pass\"},{\"name\":\"zoneName_1\",\"value\":\"Zona\n                  1\"},{\"name\":\"billCycleMonth\",\"value\":\"1\"},{\"name\":\"voiceRoamOg_2\",\"value\":\"0\"},{\"name\":\"numberOfRenewal_4\",\"value\":\"-1\"},{\"name\":\"tokenAmount_3\",\"value\":\"2500\"},{\"name\":\"commercialName_2\",\"value\":\"Costo\n                  Daily\n                  Pass\"},{\"name\":\"dataNat_RDA\",\"value\":\"0\"},{\"name\":\"commercialName_4\",\"value\":\"Costo\n                  Daily\n                  Pass\"},{\"name\":\"targetGARoam_1\",\"value\":[\"AR\",\"AU\",\"BD\",\"BR\",\"CA\",\"CL\",\"CR\",\"DO\",\"EC\",\"FO\",\"GE\",\"GT\",\"HK\",\"IL\",\"KZ\",\"KR\",\"MX\",\"ME\",\"NZ\",\"NI\",\"PK\",\"PA\",\"PE\",\"SA\",\"LK\",\"CH\",\"TR\",\"UA\",\"US\",\"UY\",\"UZ\",\"VE\",\"VN\"]},{\"name\":\"targetGAIntOg\",\"value\":[\"EXCEPT\",\"DZ\",\"DZ_MB\",\"CU\",\"CU_MB\",\"ME\",\"ME_MB\",\"XK\",\"XK_MB\",\"SN\",\"SN_MB\",\"SO\",\"TN\",\"TN_MB\",\"ZD_XS\",\"_XS\",\"_XT\"]},{\"name\":\"mktpkgname_1\",\"value\":\"Daily\n                  Pass\"},{\"name\":\"smsRoamOg_4\",\"value\":\"100\"},{\"name\":\"targetGARoam_2\",\"value\":[\"DZ\",\"AM\",\"AZ\",\"BH\",\"BY\",\"BJ\",\"CN\",\"CO\",\"CG\",\"EG\",\"GA\",\"GH\",\"GL\",\"HN\",\"ID\",\"JP\",\"KE\",\"KG\",\"KW\",\"MO\",\"MK\",\"MY\",\"MW\",\"MC\",\"NG\",\"OM\",\"PY\",\"PR\",\"RE\",\"RU\",\"SG\",\"ZA\",\"TW\",\"TJ\",\"TZ\",\"TH\",\"UG\",\"ZM\"]},{\"name\":\"communityID\",\"value\":\"255063\"},{\"name\":\"voiceNatOgOnnet\",\"value\":\"0\"},{\"name\":\"numberOfRenewal\",\"value\":\"-1\"},{\"name\":\"numberOfRenewal_3\",\"value\":\"-1\"},{\"name\":\"basePricingId\",\"value\":\"25\"},{\"name\":\"qualityOfService_1\",\"value\":\"256\"},{\"name\":\"voiceIntOg\",\"value\":\"500\"},{\"name\":\"mmsNatOnnet\",\"value\":\"0\"},{\"name\":\"zoneName_2\",\"value\":\"Zona\n                  2\"},{\"name\":\"voiceRoamIc_4\",\"value\":\"0\"},{\"name\":\"voiceRoamIcOg_1\",\"value\":\"100\"},{\"name\":\"qualityOfService_2\",\"value\":\"256\"},{\"name\":\"qualityOfService\",\"value\":\"256\"},{\"name\":\"targetGARoam_3\",\"value\":[\"BO\",\"BA\",\"BN\",\"CV\",\"TD\",\"SV\",\"IN\",\"MD\",\"RS\",\"TN\",\"AE\"]},{\"name\":\"voiceRLAH\",\"value\":\"0\"},{\"name\":\"voiceRoamOg_1\",\"value\":\"0\"},{\"name\":\"renewalCountInDur_2\",\"value\":\"3\"},{\"name\":\"renewalCountInDur_4\",\"value\":\"3\"},{\"name\":\"voiceRoamOg\",\"value\":\"0\"},{\"name\":\"resourceduration_3\",\"value\":\"Daily\"},{\"name\":\"voiceRoamIc\",\"value\":\"0\"},{\"name\":\"smsNatOnnet\",\"value\":\"0\"},{\"name\":\"commercialName_1\",\"value\":\"Costo\n                  Daily\n                  Pass\"},{\"name\":\"paymentType\",\"value\":\"tied\"},{\"name\":\"voiceRoamIcOg_2\",\"value\":\"100\"},{\"name\":\"dataCSD\",\"value\":\"0\"},{\"name\":\"smsRoamOg_3\",\"value\":\"100\"},{\"name\":\"qualityOfService_3\",\"value\":\"256\"},{\"name\":\"smsIntOg\",\"value\":\"0\"},{\"name\":\"renewalCountInDur_3\",\"value\":\"3\"},{\"name\":\"tokenAmount_1\",\"value\":\"500\"},{\"name\":\"smsNatIntRoamOg\",\"value\":\"0\"},{\"name\":\"dataNat\",\"value\":\"Unlimited\"},{\"name\":\"dataRoam_3\",\"value\":\"250MB\"},{\"name\":\"voiceRoamIc_2\",\"value\":\"0\"},{\"name\":\"smsNatOnnetOffnet\",\"value\":\"500\"},{\"name\":\"qualityOfService_4\",\"value\":\"256\"},{\"name\":\"gracePeriodrule\",\"value\":\"0\"},{\"name\":\"voiceRoamIc_1\",\"value\":\"0\"},{\"name\":\"smsNatRoamOg\",\"value\":\"0\"},{\"name\":\"dataRoamAllowance\",\"value\":\"40GB\"},{\"name\":\"voiceRoamOg_4\",\"value\":\"0\"},{\"name\":\"sms_mmsNatOnnet\",\"value\":\"0\"},{\"name\":\"optoutDataFlag\",\"value\":\"0\"},{\"name\":\"tokenAmount_2\",\"value\":\"1500\"},{\"name\":\"dataRoam_4\",\"value\":\"250MB\"},{\"name\":\"targetGARoam_4\",\"value\":[\"AF\",\"AL\",\"AI\",\"AG\",\"BB\",\"KH\",\"KY\",\"DO\",\"GD\",\"MG\",\"MA\",\"MM\",\"NP\",\"NE\",\"QA\",\"SN\",\"KN\",\"LC\",\"VC\",\"TC\",\"VG\",\"YE\"]}],\"externalId\":\"1620302984174\"},\"productOffering\":{\"id\":\"bpo_NA_M_PM_T_001\"}},{\"id\":\"620154080782_1007810493\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX70278\"},{\"name\":\"famiglia\",\"value\":\"datiSim\"}],\"externalId\":\"1620304314278\"},\"productOffering\":{\"id\":\"po_ANB_MobileAccess5G\"}},{\"id\":\"620154080782_1584996227\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"refillAmount\",\"value\":\"500\"},{\"name\":\"famiglia\",\"value\":\"administrative\"}]},\"productOffering\":{\"id\":\"po_AAB_Refill\"}}],\"relatedParty\":[{\"id\":\"3206648676\",\"role\":\"Customer\"}],\"type\":\"ProductOrder\",\"attrs\":[{\"name\":\"journeyType\",\"value\":\"OnBoarding\"},{\"name\":\"journeySubType\",\"value\":\"Standard\"}],\"relatedEntity\":[{\"role\":\"IMSI\",\"reference\":\"222885451054644\"},{\"role\":\"MSISDN\",\"reference\":\"3206648676\"}],\"requester\":\"CRM\",\"requestID\":\"622400\"};\"1-619821002400\";[{\"name\":\"journeyType\",\"value\":\"OnBoarding\"},{\"name\":\"journeySubType\",\"value\":\"Standard\"}];\"journeyType\";{\"name\":\"journeySubType\",\"value\":\"Standard\"};[{\"id\":\"620154080782_1960647843\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"simType\",\"value\":\"voice\"},{\"name\":\"famiglia\",\"value\":\"sim\"},{\"name\":\"serialNumber\",\"value\":\"8939880845100546344\"},{\"name\":\"ctype\",\"value\":\"PREPAGATO\"},{\"name\":\"commercialOfferName\",\"value\":\"PHX00033\"},{\"name\":\"isEnelVpnEnabled\",\"value\":\"0\"},{\"name\":\"technology\",\"value\":\"UMTS\"},{\"name\":\"isVpnEnabled\",\"value\":\"0\"},{\"name\":\"customerSegment\",\"value\":\"Business\"},{\"name\":\"imsi\",\"value\":\"222885451054644\"}],\"externalId\":\"1620302984097\"},\"productOffering\":{\"id\":\"bpo_Father_0001\"}},{\"id\":\"620154080782_1077623222\",\"action\":\"Add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX00034\"},{\"name\":\"MSISDN\",\"value\":\"3206648676\"},{\"name\":\"numberClass\",\"value\":\"Regular\"},{\"name\":\"famiglia\",\"value\":\"sim\"}],\"externalId\":\"1620302984122\"},\"productOffering\":{\"id\":\"po_ANB_MSISDN\"}},{\"id\":\"620154080782_906154476\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"famiglia\",\"value\":\"securityEnforcement\"},{\"name\":\"targetAPN\",\"value\":\"securityEnforcement\"},{\"name\":\"commercialOfferName\",\"value\":\"PHX80093\"}],\"externalId\":\"1620302984178\"},\"productOffering\":{\"id\":\"po_ANB_SecureEnf\"}},{\"id\":\"620154080782_979290423\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX30017\"},{\"name\":\"famiglia\",\"value\":\"datiSim\"}],\"externalId\":\"1620302984173\"},\"productOffering\":{\"id\":\"po_ANB_EnableMMS\"}},{\"id\":\"620154080782_1828493471\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"voiceMailType\",\"value\":\"A\"},{\"name\":\"password\",\"value\":\"1111\"},{\"name\":\"famiglia\",\"value\":\"serviziSim\"},{\"name\":\"language\",\"value\":\"1\"},{\"name\":\"commercialOfferName\",\"value\":\"PHX00041\"}],\"externalId\":\"1620302984131\"},\"productOffering\":{\"id\":\"po_ANB_VoiceMail\"}},{\"id\":\"620154080782_485062578\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX00042\"},{\"name\":\"famiglia\",\"value\":\"serviziSim\"}],\"externalId\":\"1620302984134\"},\"productOffering\":{\"id\":\"po_ANB_EnableSMSOutgoing\"}},{\"id\":\"620154080782_1733797629\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"serviceVideostreaming\",\"value\":\"0\"},{\"name\":\"serviceWap\",\"value\":\"0\"},{\"name\":\"serviceLeonardoPushMail\",\"value\":\"0\"},{\"name\":\"serviceInternetBIZ\",\"value\":\"1\"},{\"name\":\"famiglia\",\"value\":\"serviziSim,addsOn\"},{\"name\":\"commercialOfferName\",\"value\":\"PHX30014\"},{\"name\":\"serviceWapBIZ\",\"value\":\"1\"},{\"name\":\"serviceInternet\",\"value\":\"0\"}],\"externalId\":\"1620302984172\"},\"productOffering\":{\"id\":\"po_ANB_APN_001\"}},{\"id\":\"620154080782_698469269\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX00039\"},{\"name\":\"famiglia\",\"value\":\"serviziSim\"}],\"externalId\":\"1620302984129\"},\"productOffering\":{\"id\":\"po_ANB_EnableVoiceRoaming\"}},{\"id\":\"620154080782_1981545684\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX00040\"},{\"name\":\"famiglia\",\"value\":\"serviziSim\"}],\"externalId\":\"1620302984130\"},\"productOffering\":{\"id\":\"po_ANB_EnableVoiceInternational\"}},{\"id\":\"620154080782_1920970661\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"famiglia\",\"value\":\"serviziSim\"},{\"name\":\"commercialOfferName\",\"value\":\"PHX50805\"}],\"externalId\":\"1620304314259\"},\"productOffering\":{\"id\":\"po_ANB_MobileAccess4G\"}},{\"id\":\"620154080782_755004597\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"numberOfRenewal\",\"value\":\"-1\"},{\"name\":\"refillAmount\",\"value\":\"1000\"},{\"name\":\"refillThreshold\",\"value\":\"500\"},{\"name\":\"commercialOfferName\",\"value\":\"PHX00089\"}],\"externalId\":\"1620302984135\"},\"productOffering\":{\"id\":\"po_CB_ATR_NA_NA_001\"}},{\"id\":\"620154080782_741635029\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"voiceNatOgOffnet\",\"value\":\"0\"},{\"name\":\"numberOfRenewal_1\",\"value\":\"-1\"},{\"name\":\"dataRoam_1\",\"value\":\"250MB\"},{\"name\":\"zoneName_3\",\"value\":\"Zona\n                  3\"},{\"name\":\"tokenAmount_4\",\"value\":\"3500\"},{\"name\":\"voiceRoamIcOg_4\",\"value\":\"100\"},{\"name\":\"resourceduration_4\",\"value\":\"Daily\"},{\"name\":\"resourceduration_2\",\"value\":\"Daily\"},{\"name\":\"resourceduration_1\",\"value\":\"Daily\"},{\"name\":\"addonRLAH\",\"value\":[\"CH\"]},{\"name\":\"optoutVoiceFlag\",\"value\":\"0\"},{\"name\":\"recfeeduration\",\"value\":\"Monthly\"},{\"name\":\"voiceRoamIcOg\",\"value\":\"0\"},{\"name\":\"zoneName_4\",\"value\":\"Zona\n                  4\"},{\"name\":\"priceRecurrentID\",\"value\":\"ID_PRICE_66\"},{\"name\":\"smsNatOffnet\",\"value\":\"0\"},{\"name\":\"barPPUDat\",\"value\":\"0\"},{\"name\":\"compkgname\",\"value\":\"PHX70087\"},{\"name\":\"numberOfRenewal_2\",\"value\":\"-1\"},{\"name\":\"optoutSmsFlag\",\"value\":\"0\"},{\"name\":\"billCycleDay\",\"value\":\"1\"},{\"name\":\"smsRoamOg_2\",\"value\":\"100\"},{\"name\":\"renewalCountInDur_1\",\"value\":\"3\"},{\"name\":\"smsRoamOg\",\"value\":\"0\"},{\"name\":\"voiceRoamOg_3\",\"value\":\"0\"},{\"name\":\"smsRoamOg_1\",\"value\":\"100\"},{\"name\":\"dataRoam_2\",\"value\":\"250MB\"},{\"name\":\"voiceRoamIcOg_3\",\"value\":\"100\"},{\"name\":\"voiceNatOgOnnetOffnet\",\"value\":\"Unlimited\"},{\"name\":\"voiceRoamIc_3\",\"value\":\"0\"},{\"name\":\"dataRoam\",\"value\":\"0\"},{\"name\":\"commercialName_3\",\"value\":\"Costo\n                  Daily Pass\"},{\"name\":\"zoneName_1\",\"value\":\"Zona\n                  1\"},{\"name\":\"billCycleMonth\",\"value\":\"1\"},{\"name\":\"voiceRoamOg_2\",\"value\":\"0\"},{\"name\":\"numberOfRenewal_4\",\"value\":\"-1\"},{\"name\":\"tokenAmount_3\",\"value\":\"2500\"},{\"name\":\"commercialName_2\",\"value\":\"Costo\n                  Daily\n                  Pass\"},{\"name\":\"dataNat_RDA\",\"value\":\"0\"},{\"name\":\"commercialName_4\",\"value\":\"Costo\n                  Daily\n                  Pass\"},{\"name\":\"targetGARoam_1\",\"value\":[\"AR\",\"AU\",\"BD\",\"BR\",\"CA\",\"CL\",\"CR\",\"DO\",\"EC\",\"FO\",\"GE\",\"GT\",\"HK\",\"IL\",\"KZ\",\"KR\",\"MX\",\"ME\",\"NZ\",\"NI\",\"PK\",\"PA\",\"PE\",\"SA\",\"LK\",\"CH\",\"TR\",\"UA\",\"US\",\"UY\",\"UZ\",\"VE\",\"VN\"]},{\"name\":\"targetGAIntOg\",\"value\":[\"EXCEPT\",\"DZ\",\"DZ_MB\",\"CU\",\"CU_MB\",\"ME\",\"ME_MB\",\"XK\",\"XK_MB\",\"SN\",\"SN_MB\",\"SO\",\"TN\",\"TN_MB\",\"ZD_XS\",\"_XS\",\"_XT\"]},{\"name\":\"mktpkgname_1\",\"value\":\"Daily\n                  Pass\"},{\"name\":\"smsRoamOg_4\",\"value\":\"100\"},{\"name\":\"targetGARoam_2\",\"value\":[\"DZ\",\"AM\",\"AZ\",\"BH\",\"BY\",\"BJ\",\"CN\",\"CO\",\"CG\",\"EG\",\"GA\",\"GH\",\"GL\",\"HN\",\"ID\",\"JP\",\"KE\",\"KG\",\"KW\",\"MO\",\"MK\",\"MY\",\"MW\",\"MC\",\"NG\",\"OM\",\"PY\",\"PR\",\"RE\",\"RU\",\"SG\",\"ZA\",\"TW\",\"TJ\",\"TZ\",\"TH\",\"UG\",\"ZM\"]},{\"name\":\"communityID\",\"value\":\"255063\"},{\"name\":\"voiceNatOgOnnet\",\"value\":\"0\"},{\"name\":\"numberOfRenewal\",\"value\":\"-1\"},{\"name\":\"numberOfRenewal_3\",\"value\":\"-1\"},{\"name\":\"basePricingId\",\"value\":\"25\"},{\"name\":\"qualityOfService_1\",\"value\":\"256\"},{\"name\":\"voiceIntOg\",\"value\":\"500\"},{\"name\":\"mmsNatOnnet\",\"value\":\"0\"},{\"name\":\"zoneName_2\",\"value\":\"Zona\n                  2\"},{\"name\":\"voiceRoamIc_4\",\"value\":\"0\"},{\"name\":\"voiceRoamIcOg_1\",\"value\":\"100\"},{\"name\":\"qualityOfService_2\",\"value\":\"256\"},{\"name\":\"qualityOfService\",\"value\":\"256\"},{\"name\":\"targetGARoam_3\",\"value\":[\"BO\",\"BA\",\"BN\",\"CV\",\"TD\",\"SV\",\"IN\",\"MD\",\"RS\",\"TN\",\"AE\"]},{\"name\":\"voiceRLAH\",\"value\":\"0\"},{\"name\":\"voiceRoamOg_1\",\"value\":\"0\"},{\"name\":\"renewalCountInDur_2\",\"value\":\"3\"},{\"name\":\"renewalCountInDur_4\",\"value\":\"3\"},{\"name\":\"voiceRoamOg\",\"value\":\"0\"},{\"name\":\"resourceduration_3\",\"value\":\"Daily\"},{\"name\":\"voiceRoamIc\",\"value\":\"0\"},{\"name\":\"smsNatOnnet\",\"value\":\"0\"},{\"name\":\"commercialName_1\",\"value\":\"Costo\n                  Daily\n                  Pass\"},{\"name\":\"paymentType\",\"value\":\"tied\"},{\"name\":\"voiceRoamIcOg_2\",\"value\":\"100\"},{\"name\":\"dataCSD\",\"value\":\"0\"},{\"name\":\"smsRoamOg_3\",\"value\":\"100\"},{\"name\":\"qualityOfService_3\",\"value\":\"256\"},{\"name\":\"smsIntOg\",\"value\":\"0\"},{\"name\":\"renewalCountInDur_3\",\"value\":\"3\"},{\"name\":\"tokenAmount_1\",\"value\":\"500\"},{\"name\":\"smsNatIntRoamOg\",\"value\":\"0\"},{\"name\":\"dataNat\",\"value\":\"Unlimited\"},{\"name\":\"dataRoam_3\",\"value\":\"250MB\"},{\"name\":\"voiceRoamIc_2\",\"value\":\"0\"},{\"name\":\"smsNatOnnetOffnet\",\"value\":\"500\"},{\"name\":\"qualityOfService_4\",\"value\":\"256\"},{\"name\":\"gracePeriodrule\",\"value\":\"0\"},{\"name\":\"voiceRoamIc_1\",\"value\":\"0\"},{\"name\":\"smsNatRoamOg\",\"value\":\"0\"},{\"name\":\"dataRoamAllowance\",\"value\":\"40GB\"},{\"name\":\"voiceRoamOg_4\",\"value\":\"0\"},{\"name\":\"sms_mmsNatOnnet\",\"value\":\"0\"},{\"name\":\"optoutDataFlag\",\"value\":\"0\"},{\"name\":\"tokenAmount_2\",\"value\":\"1500\"},{\"name\":\"dataRoam_4\",\"value\":\"250MB\"},{\"name\":\"targetGARoam_4\",\"value\":[\"AF\",\"AL\",\"AI\",\"AG\",\"BB\",\"KH\",\"KY\",\"DO\",\"GD\",\"MG\",\"MA\",\"MM\",\"NP\",\"NE\",\"QA\",\"SN\",\"KN\",\"LC\",\"VC\",\"TC\",\"VG\",\"YE\"]}],\"externalId\":\"1620302984174\"},\"productOffering\":{\"id\":\"bpo_NA_M_PM_T_001\"}},{\"id\":\"620154080782_1007810493\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX70278\"},{\"name\":\"famiglia\",\"value\":\"datiSim\"}],\"externalId\":\"1620304314278\"},\"productOffering\":{\"id\":\"po_ANB_MobileAccess5G\"}},{\"id\":\"620154080782_1584996227\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"refillAmount\",\"value\":\"500\"},{\"name\":\"famiglia\",\"value\":\"administrative\"}]},\"productOffering\":{\"id\":\"po_AAB_Refill\"}}];{\"id\":\"620154080782_1960647843\",\"action\":\"add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"simType\",\"value\":\"voice\"},{\"name\":\"famiglia\",\"value\":\"sim\"},{\"name\":\"serialNumber\",\"value\":\"8939880845100546344\"},{\"name\":\"ctype\",\"value\":\"PREPAGATO\"},{\"name\":\"commercialOfferName\",\"value\":\"PHX00033\"},{\"name\":\"isEnelVpnEnabled\",\"value\":\"0\"},{\"name\":\"technology\",\"value\":\"UMTS\"},{\"name\":\"isVpnEnabled\",\"value\":\"0\"},{\"name\":\"customerSegment\",\"value\":\"Business\"},{\"name\":\"imsi\",\"value\":\"222885451054644\"}],\"externalId\":\"1620302984097\"},\"productOffering\":{\"id\":\"bpo_Father_0001\"}};{\"id\":\"620154080782_1077623222\",\"action\":\"Add\",\"product\":{\"id\":\"\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX00034\"},{\"name\":\"MSISDN\",\"value\":\"3206648676\"},{\"name\":\"numberClass\",\"value\":\"Regular\"},{\"name\":\"famiglia\",\"value\":\"sim\"}],\"externalId\":\"1620302984122\"},\"productOffering\":{\"id\":\"po_ANB_MSISDN\"}};{\"name\":\"simType\",\"value\":\"voice\"};{\"name\":\"famiglia\",\"value\":\"sim\"}\n{\"externalId\":\"1-619821002400\",\"channel\":[{\"id\":\"PHX\"}],\"productOrderItem\":[{\"id\":\"620154102569_303686540\",\"action\":\"Modify\",\"product\":{\"id\":\"2000000000000000000000733278885\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX00034\"},{\"name\":\"MSISDN\",\"value\":\"3287199235\"},{\"name\":\"numberClass\",\"value\":\"Regular\"},{\"name\":\"famiglia\",\"value\":\"sim\"}],\"externalId\":\"1620302984122\"},\"productOffering\":{\"id\":\"po_ANB_MSISDN\"}}],\"relatedParty\":[{\"id\":\"3206648676\",\"role\":\"Customer\"}],\"type\":\"ProductOrder\",\"attrs\":[{\"name\":\"journeyType\",\"value\":\"ChangeMSISDN\"},{\"name\":\"journeySubType\",\"value\":\"PortIn\"},{\"name\":\"cutoverDate\",\"value\":\"19/04/2024\"},{\"name\":\"oloCode\",\"value\":\"TIM\"},{\"name\":\"requestId\",\"value\":\"620154080784\"}],\"relatedEntity\":[{\"role\":\"IMSI\",\"reference\":\"222885451054644\"},{\"role\":\"MSISDN\",\"reference\":\"3206648676\"}],\"requester\":\"CRM\",\"requestID\":\"624402\"};\"1-619821002400\";[{\"name\":\"journeyType\",\"value\":\"ChangeMSISDN\"},{\"name\":\"journeySubType\",\"value\":\"PortIn\"},{\"name\":\"cutoverDate\",\"value\":\"19/04/2024\"},{\"name\":\"oloCode\",\"value\":\"TIM\"},{\"name\":\"requestId\",\"value\":\"620154080784\"}];\"journeyType\";{\"name\":\"journeySubType\",\"value\":\"PortIn\"};[{\"id\":\"620154102569_303686540\",\"action\":\"Modify\",\"product\":{\"id\":\"2000000000000000000000733278885\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX00034\"},{\"name\":\"MSISDN\",\"value\":\"3287199235\"},{\"name\":\"numberClass\",\"value\":\"Regular\"},{\"name\":\"famiglia\",\"value\":\"sim\"}],\"externalId\":\"1620302984122\"},\"productOffering\":{\"id\":\"po_ANB_MSISDN\"}}];{\"id\":\"620154102569_303686540\",\"action\":\"Modify\",\"product\":{\"id\":\"2000000000000000000000733278885\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX00034\"},{\"name\":\"MSISDN\",\"value\":\"3287199235\"},{\"name\":\"numberClass\",\"value\":\"Regular\"},{\"name\":\"famiglia\",\"value\":\"sim\"}],\"externalId\":\"1620302984122\"},\"productOffering\":{\"id\":\"po_ANB_MSISDN\"}};;{\"name\":\"commercialOfferName\",\"value\":\"PHX00034\"};{\"name\":\"MSISDN\",\"value\":\"3287199235\"}\n{\"externalId\":\"1-619821002400\",\"channel\":[{\"id\":\"PHX\"}],\"productOrderItem\":[{\"id\":\"620154102974_1007428295\",\"action\":\"Modify\",\"product\":{\"id\":\"2000000000000000000000733125303\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX00034\"},{\"name\":\"MSISDN\",\"value\":\"3316422906\"},{\"name\":\"numberClass\",\"value\":\"Regular\"},{\"name\":\"famiglia\",\"value\":\"sim\"}],\"externalId\":\"1620302984037\"},\"productOffering\":{\"id\":\"po_ANB_MSISDN\"}}],\"relatedParty\":[{\"id\":\"3206648991\",\"role\":\"Customer\"}],\"type\":\"ProductOrder\",\"attrs\":[{\"name\":\"journeyType\",\"value\":\"ChangeMSISDN\"},{\"name\":\"journeySubType\",\"value\":\"PortIn\"},{\"name\":\"cutoverDate\",\"value\":\"19/04/2024\"},{\"name\":\"oloCode\",\"value\":\"TIM\"},{\"name\":\"requestId\",\"value\":\"620154080783\"}],\"relatedEntity\":[{\"role\":\"IMSI\",\"reference\":\"222885451054643\"},{\"role\":\"MSISDN\",\"reference\":\"3206648991\"}],\"requester\":\"CRM\",\"requestID\":\"624442\"};\"1-619821002400\";[{\"name\":\"journeyType\",\"value\":\"ChangeMSISDN\"},{\"name\":\"journeySubType\",\"value\":\"PortIn\"},{\"name\":\"cutoverDate\",\"value\":\"19/04/2024\"},{\"name\":\"oloCode\",\"value\":\"TIM\"},{\"name\":\"requestId\",\"value\":\"620154080783\"}];\"journeyType\";{\"name\":\"journeySubType\",\"value\":\"PortIn\"};[{\"id\":\"620154102974_1007428295\",\"action\":\"Modify\",\"product\":{\"id\":\"2000000000000000000000733125303\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX00034\"},{\"name\":\"MSISDN\",\"value\":\"3316422906\"},{\"name\":\"numberClass\",\"value\":\"Regular\"},{\"name\":\"famiglia\",\"value\":\"sim\"}],\"externalId\":\"1620302984037\"},\"productOffering\":{\"id\":\"po_ANB_MSISDN\"}}];{\"id\":\"620154102974_1007428295\",\"action\":\"Modify\",\"product\":{\"id\":\"2000000000000000000000733125303\",\"productCharacteristic\":[{\"name\":\"commercialOfferName\",\"value\":\"PHX00034\"},{\"name\":\"MSISDN\",\"value\":\"3316422906\"},{\"name\":\"numberClass\",\"value\":\"Regular\"},{\"name\":\"famiglia\",\"value\":\"sim\"}],\"externalId\":\"1620302984037\"},\"productOffering\":{\"id\":\"po_ANB_MSISDN\"}};;{\"name\":\"commercialOfferName\",\"value\":\"PHX00034\"};{\"name\":\"MSISDN\",\"value\":\"3316422906\"}"
      },
      {
        "id": "4.3",
        "nomeParagrafo": "PAR 3.3 - Estrae array ed elementi da un EMF di SOM (query 2)\n            (DIN1717405733228)",
        "codicePlSql": "--json_each(json)  : Espande l'oggetto JSON più esterno in un set di coppie chiave/valore. In input deve ricevere un array (es. {\"a\":\"foo\", \"b\":\"bar\"})\n\n--json_each_text(json) Espande l'oggetto JSON più esterno in un set di coppie chiave/valore. I valori restituiti saranno di tipo testo.\n\nselect \njson_each(b.message_xml::json) arrayObj\n,json_each_text(b.message_xml::json) textObj\n,json_each(b.message_xml::json->'productOrderItem'->1) elementPo\n,json_each(b.message_xml::json->'productOrderItem'->0->'product') product\nfrom action  a ,action_msg b ,request c,request d\nwhere \n1=1 and\nb.message_xml like '%\"ProductOrder\"%' and\na.ts_created>current_date -60 and\nb.id=a.message_id and\nc.id=a.request_id and \nd.id=c.root_id and \n--d.name='Sim/Handset Change' and \nc.name='Network'and\na.name='Send Service Order' and \na.status='SA' AND \nc.id\nin (select z.id\n--,zz.* \nfrom \n      request z,action zz,action_msg x where zz.request_id=z.id and z.name='Network' and zz.name='Send Service Order' and \n      z.root_id      in (select root_id from detail where value in ('1-619821002400')) and \n      zz.message_id=x.id limit 1)",
        "outPutSql": "arrayobj;textobj;elementpo;product\n(externalId,\"\"\"1-619821002400\"\"\");(externalId,1-619821002400);;(id,\"\"\"2000000000000000000000733125303\"\"\")\n(channel,\"[{\"\"id\"\":\"\"PHX\"\"}]\");(channel,\"[{\"\"id\"\":\"\"PHX\"\"}]\");;(productCharacteristic,\"[{\"\"name\"\":\"\"commercialOfferName\"\",\"\"value\"\":\"\"PHX00034\"\"},{\"\"name\"\":\"\"MSISDN\"\",\"\"value\"\":\"\"3316422906\"\"},{\"\"name\"\":\"\"numberClass\"\",\"\"value\"\":\"\"Regular\"\"},{\"\"name\"\":\"\"famiglia\"\",\"\"value\"\":\"\"sim\"\"}]\")\n(productOrderItem,\"[{\"\"id\"\":\"\"620154102974_1007428295\"\",\"\"action\"\":\"\"Modify\"\",\"\"product\"\":{\"\"id\"\":\"\"2000000000000000000000733125303\"\",\"\"productCharacteristic\"\":[{\"\"name\"\":\"\"commercialOfferName\"\",\"\"value\"\":\"\"PHX00034\"\"},{\"\"name\"\":\"\"MSISDN\"\",\"\"value\"\":\"\"3316422906\"\"},{\"\"name\"\":\"\"numberClass\"\",\"\"value\"\":\"\"Regular\"\"},{\"\"name\"\":\"\"famiglia\"\",\"\"value\"\":\"\"sim\"\"}],\"\"externalId\"\":\"\"1620302984037\"\"},\"\"productOffering\"\":{\"\"id\"\":\"\"po_ANB_MSISDN\"\"}}]\");(productOrderItem,\"[{\"\"id\"\":\"\"620154102974_1007428295\"\",\"\"action\"\":\"\"Modify\"\",\"\"product\"\":{\"\"id\"\":\"\"2000000000000000000000733125303\"\",\"\"productCharacteristic\"\":[{\"\"name\"\":\"\"commercialOfferName\"\",\"\"value\"\":\"\"PHX00034\"\"},{\"\"name\"\":\"\"MSISDN\"\",\"\"value\"\":\"\"3316422906\"\"},{\"\"name\"\":\"\"numberClass\"\",\"\"value\"\":\"\"Regular\"\"},{\"\"name\"\":\"\"famiglia\"\",\"\"value\"\":\"\"sim\"\"}],\"\"externalId\"\":\"\"1620302984037\"\"},\"\"productOffering\"\":{\"\"id\"\":\"\"po_ANB_MSISDN\"\"}}]\");;(externalId,\"\"\"1620302984037\"\"\")\n(relatedParty,\"[{\"\"id\"\":\"\"3206648991\"\",\"\"role\"\":\"\"Customer\"\"}]\");(relatedParty,\"[{\"\"id\"\":\"\"3206648991\"\",\"\"role\"\":\"\"Customer\"\"}]\");;\n(type,\"\"\"ProductOrder\"\"\");(type,ProductOrder);;\n(attrs,\"[{\"\"name\"\":\"\"journeyType\"\",\"\"value\"\":\"\"ChangeMSISDN\"\"},{\"\"name\"\":\"\"journeySubType\"\",\"\"value\"\":\"\"PortIn\"\"},{\"\"name\"\":\"\"cutoverDate\"\",\"\"value\"\":\"\"19/04/2024\"\"},{\"\"name\"\":\"\"oloCode\"\",\"\"value\"\":\"\"TIM\"\"},{\"\"name\"\":\"\"requestId\"\",\"\"value\"\":\"\"620154080783\"\"}]\");(attrs,\"[{\"\"name\"\":\"\"journeyType\"\",\"\"value\"\":\"\"ChangeMSISDN\"\"},{\"\"name\"\":\"\"journeySubType\"\",\"\"value\"\":\"\"PortIn\"\"},{\"\"name\"\":\"\"cutoverDate\"\",\"\"value\"\":\"\"19/04/2024\"\"},{\"\"name\"\":\"\"oloCode\"\",\"\"value\"\":\"\"TIM\"\"},{\"\"name\"\":\"\"requestId\"\",\"\"value\"\":\"\"620154080783\"\"}]\");;\n(relatedEntity,\"[{\"\"role\"\":\"\"IMSI\"\",\"\"reference\"\":\"\"222885451054643\"\"},{\"\"role\"\":\"\"MSISDN\"\",\"\"reference\"\":\"\"3206648991\"\"}]\");(relatedEntity,\"[{\"\"role\"\":\"\"IMSI\"\",\"\"reference\"\":\"\"222885451054643\"\"},{\"\"role\"\":\"\"MSISDN\"\",\"\"reference\"\":\"\"3206648991\"\"}]\");;\n(requester,\"\"\"CRM\"\"\");(requester,CRM);;\n(requestID,\"\"\"624442\"\"\");(requestID,624442)"
      },
      {
        "id": "4.4",
        "nomeParagrafo": "PAR 3.4 - Estrazione di tutti i parametri presenti nelle strutture\n            productOrderItem,attrs,productCharacteristic,relatedEntity di un EMF\n            SOM (DIN1717406639623)",
        "codicePlSql": "select \nconcat( re.value::json->'role','-', re.value::json->'reference') RelEntity\n,concat( ss.value::json->'name','-', ss.value::json->'value') ProdCaratt\n,concat( attrs.value::json->'name','-', attrs.value::json->'value') Attrs\nfrom action  a ,action_msg b ,request c,request d\n,json_array_elements(b.message_xml::json->'productOrderItem') prdOI\n,json_array_elements(b.message_xml::json->'attrs') attrs,\njson_array_elements(prdOI::json->'product'->'productCharacteristic') ss\n,json_array_elements(b.message_xml::json->'relatedEntity') re\nwhere \n1=1 and\nb.message_xml like '%\"ProductOrder\"%' and\na.ts_created>current_date -60 and\nb.id=a.message_id and\nc.id=a.request_id and \nd.id=c.root_id and \n--d.name='Sim/Handset Change' and \nc.name='Network'and\na.name='Send Service Order' and \na.status='SA' AND \n--ss.value::json->>'name'='imsi' and\n--re.value::json->>'role'='IMSI' and\nc.id --=622399 -- request Network\nin (\nselect z.id --network \nfrom \n      request z,action zz,action_msg x where zz.request_id=z.id and z.name='Network' and zz.name='Send Service Order' and \n      z.root_id      in (select root_id from detail where value in ('1-619821002400')) and \n      zz.message_id=x.id\n)",
        "outPutSql": "relentity;prodcaratt;attrs\n\"IMSI\"-\"222885451054643\";\"simType\"-\"voice\";\"journeyType\"-\"OnBoarding\"\n\"MSISDN\"-\"3206648991\";\"simType\"-\"voice\";\"journeyType\"-\"OnBoarding\"\n\"IMSI\"-\"222885451054643\";\"famiglia\"-\"sim\";\"journeyType\"-\"OnBoarding\"\n\"MSISDN\"-\"3206648991\";\"famiglia\"-\"sim\";\"journeyType\"-\"OnBoarding\"\n\"IMSI\"-\"222885451054643\";\"serialNumber\"-\"8939880845100546336\";\"journeyType\"-\"OnBoarding\"\n\"MSISDN\"-\"3206648991\";\"serialNumber\"-\"8939880845100546336\";\"journeyType\"-\"OnBoarding\"\n\"IMSI\"-\"222885451054643\";\"ctype\"-\"PREPAGATO\";\"journeyType\"-\"OnBoarding\"\n\"MSISDN\"-\"3206648991\";\"ctype\"-\"PREPAGATO\";\"journeyType\"-\"OnBoarding\"\n\"IMSI\"-\"222885451054643\";\"commercialOfferName\"-\"PHX00033\";\"journeyType\"-\"OnBoarding\"\n\"MSISDN\"-\"3206648991\";\"commercialOfferName\"-\"PHX00033\";\"journeyType\"-\"OnBoarding\""
      },
      {
        "id": "4.5",
        "nomeParagrafo": "PAR 3.5 - Esegue Parsing di un esito SOM a partire dall'EMF entrando\n            per id action (o id ordine) (DIN1717407793613)",
        "codicePlSql": "SELECT \nb.message_xml::json->'event'->'productOrder'->'completionDate' completionDate,\ncharacteristic.value::json->'name' NomeCar\n,characteristic.value::json->'value' ValoreCar\n,item->>'description' BB_descr\nFROM \nACTION a, \naction_msg b ,\n    json_array_elements(b.message_xml::json->'event'->'productOrder'->'productOrderItem') AS item,\n    json_array_elements(item->'product'->'productCharacteristic') AS characteristic\nWHERE \nb.id=a.message_id \n--and (characteristic->>'name'='actualNetworkProvisionDate' or characteristic->>'name'='actualChargingProvisionDate')\n--and item->>'description'='po_ANB_MSISDN'\nand a.id in \n(620154130944)\n/*(\n\tselect cc.id from \n\trequest aa, request bb,action cc \n\twhere \n\taa.name='OutOrder' and \n\taa.ts_created>current_date -2 and\n\taa.id=bb.root_id and \n\tbb.id=cc.request_id and \n\tcc.system='som' and\n\tcc.direction='inbound' and\n\tcc.name='Receive mobile provisioning result' limit 50\n)*/\n/*(\n\tselect  (zz.id) --action inbound SOM\n\tfrom \n\t      request z,action zz where zz.request_id=z.id and z.name='Network' and zz.name='Receive mobile provisioning result' \n\t      and zz.system='som' \n\t      and zz.direction='inbound'\n\t      and z.root_id in (select root_id from detail where value in ('1-619821002400')) limit 1 \n)*/",
        "outPutSql": "completiondate;nomecar;valorecar;bb_descr\n\"2024-04-19T06:01:32+02:00\";\"specificationType\";[\"ProductOffering\"];po_ANB_EnableMMS\n\"2024-04-19T06:01:32+02:00\";\"cbioVersionCreated\";;po_ANB_EnableMMS\n\"2024-04-19T06:01:32+02:00\";\"version\";[\"2.0\"];po_ANB_EnableMMS\n\"2024-04-19T06:01:32+02:00\";\"CW_DISABLEPUBLISH\";[\"false\"];po_ANB_EnableMMS\n\"2024-04-19T06:01:32+02:00\";\"CW_IMPLICITCREATE\";[\"true\"];po_ANB_EnableMMS\n\"2024-04-19T06:01:32+02:00\";\"CW_MDTYPE\";[\"pscm.data.ProductOffering\"];po_ANB_EnableMMS\n\"2024-04-19T06:01:32+02:00\";\"CW_SPECTYPE\";[\"type_ProductOffering\"];po_ANB_EnableMMS\n\"2024-04-19T06:01:32+02:00\";\"CW_URI\";[\"pscm/productoffering/\"];po_ANB_EnableMMS\n\"2024-04-19T06:01:32+02:00\";\"channels\";;po_ANB_EnableMMS\n\"2024-04-19T06:01:32+02:00\";\"storedInSR\";[\"true\"];po_ANB_EnableMMS"
      },
      {
        "id": "4.6",
        "nomeParagrafo": "PAR 3.6 - Estrae i dettagli di un BB dal catalogo SOM\n            (DIN1717414030675)",
        "codicePlSql": "--query per estrarre BB e relativi parametri a fronte di una o più chiavi (PHX) presenti nell'ordine\n \nselect * from (\nselect\n      a.id,\n      a.partnum ,\n      a.id_bb ,\n      b.codicebb,\n      d.nome,\n      d.tipovalore,\n      c.id_attrib,\n      null as valore\nfrom\n      com.associativabb_phx a,\n      com.elencobb b,\n      com.associativabb_attrib c,\n      com.elencoattributi d\nwhere\n      --trim(a.partnum) in ('PHX80022') and\ncodicebb='bpo_NA_SAP_PM_NA_001' and\n      a.id_bb = b.id and \n      c.id_bb = a.id_bb and \n      c.id_attrib = d.id and\n      d.tipovalore = 'Run Time'\nunion \nselect\n      a.id,\n      a.partnum ,\n      a.id_bb ,\n      b.codicebb,\n      d.nome,\n      d.tipovalore,\n      c.id_attrib,\n      e.valore as valore\nfrom\n      com.associativabb_phx a,\n      com.elencobb b,\n      com.associativabb_attrib c,\n      com.elencoattributi d,\n      com.valoreattrib e\nwhere\n      --trim(a.partnum) in ('PHX80022') and\ncodicebb='bpo_NA_SAP_PM_NA_001' and\n      a.id_bb = b.id and \n      c.id_bb = a.id_bb and \n      c.id_attrib = d.id and\n      d.tipovalore = 'Design Time' and \n      e.id_attrib = c.id_attrib and \n      e.id_associativa = a.id\n)a \n--where nome='renewalcountSA_ExCap'",
        "outPutSql": "id;partnum;id_bb;codicebb;nome;tipovalore;id_attrib;valore\n224;PHX70218;17;bpo_NA_SAP_PM_NA_001;commercialName;Design Time;67;Giga Smart Share Extra\n221;PHX70215;17;bpo_NA_SAP_PM_NA_001;numberOfRenewal;Design Time;51;-1\n231;PHX70314;17;bpo_NA_SAP_PM_NA_001;recurrentFee;Design Time;42;\n221;PHX70215;17;bpo_NA_SAP_PM_NA_001;MSISDN;Run Time;22;\n222;PHX70216;17;bpo_NA_SAP_PM_NA_001;dataSA;Design Time;76;5GB\n230;PHX70313;17;bpo_NA_SAP_PM_NA_001;reserveForDeactivation;Run Time;6;\n220;PHX70219;17;bpo_NA_SAP_PM_NA_001;qualityOfService;Design Time;59;256\n222;PHX70216;17;bpo_NA_SAP_PM_NA_001;commercialName;Design Time;67;Giga Smart Share Extra\n221;PHX70215;17;bpo_NA_SAP_PM_NA_001;customerSegment;Run Time;18;\n232;PHX70315;17;bpo_NA_SAP_PM_NA_001;recresourceduration;Design Time;185;Monthly"
      },
      {
        "id": "4.7",
        "nomeParagrafo": "PAR 3.7 - Estrae un esempio di EMF per ogni ordine che va su SOM\n            (DIN1717438952177)",
        "codicePlSql": "select * from \n  (\n\t  select d.name,b.id,a.id\n\t  ,b.message_xml  ,b.message_xml::json->>'externalId' \n\t  from action a, action_msg b , request c , request d where \n\t  c.name='Network' and\n\t  d.name in   (\t'Activation Order') and\n\t  a.name='Send Service Order' and \n\t  a.system='som' and\n\t  a.direction='outbound' and\n\t  a.request_id=c.id and \n\t  c.root_id=d.id and\n\t  a.message_id=b.id limit 1\n  ) att\nunion all \n  select * from \n  (\n\t  select d.name,b.id,a.id\n\t  ,b.message_xml ,b.message_xml::json->>'externalId' \n\t    from action a, action_msg b , request c , request d where \n\t  c.name='Network' and\n\t  d.name in ('Sim/Handset Change')and\n\t  a.name='Send Service Order' and \n\t  a.system='som' and\n\t  a.direction='outbound' and\n \t  a.request_id=c.id and \n\t  c.root_id=d.id and\n\t  a.message_id=b.id limit 1\n  ) changeSim\nunion all\n  select * from \n  (\n\t  select d.name,b.id,a.id\n\t  ,b.message_xml ,b.message_xml::json->>'externalId' \n\t   from action a, action_msg b , request c , request d where \n\t  c.name='Network' and\n\t  d.name in ('Extend Order')and\n\t  a.name='Send Service Order' and \n\t  a.system='som' and\n  \t  a.request_id=c.id and \n\t  c.root_id=d.id and\n\t  a.direction='outbound' and\n\t  a.message_id=b.id  limit 1\n\t) ampl  \nunion all\n  select * from \n  (\n\t  select d.name,b.id,a.id\n\t  ,b.message_xml ,b.message_xml::json->>'externalId' \n\t   from action a, action_msg b , request c , request d where \n\t  c.name='Network' and\n\t  d.name in ('Order reactivation')and\n\t  a.name='Send Service Order' and \n\t  a.system='som' and\n\t  a.direction='outbound' and\n\t  a.request_id=c.id and \n\t  c.root_id=d.id and\t  \n\t  a.message_id=b.id  limit 1\n\t) react  \nunion all\n  select * from \n  (\n\t  select d.name,b.id,a.id\n\t  ,b.message_xml,b.message_xml::json->>'externalId'  \n\t   from action a, action_msg b , request c , request d where \n\t  c.name='Network' and\n\t  d.name in ('Order suspend')and\n\t  a.name='Send Service Order' and \n\t  a.system='som' and\n\t  a.direction='outbound' and\n\t  a.request_id=c.id and \n\t  c.root_id=d.id and\t  \n\t  a.message_id=b.id  limit 1\n\t) sosp  \t\nunion all\n  select * from \n  (\n\t  select d.name,b.id,a.id\n\t  ,b.message_xml ,b.message_xml::json->>'externalId'\n\t    from action a, action_msg b , request c , request d where \n\t  c.name='Network' and\n\t  d.name in ('Change Order')and\n\t  a.name='Send Service Order' and \n\t  a.system='som' and\n\t  a.direction='outbound' and\n\t  a.request_id=c.id and \n\t  c.root_id=d.id and\t  \n\t  a.message_id=b.id  limit 1\n\t) changeOrder  \t\nunion all\n  select * from \n  (\n\t  select d.name,b.id,a.id\n\t  ,b.message_xml,b.message_xml::json->>'externalId' \n\t    from action a, action_msg b , request c , request d where \n\t  c.name='Network' and\n\t  d.name in ('OutOrder')and\n\t  a.name='Send Service Order' and \n\t  a.system='som' and\n\t  a.direction='outbound' and\n\t  a.request_id=c.id and \n\t  c.root_id=d.id and\t  \n\t  a.message_id=b.id  limit 1\n\t) OutOrder",
        "outPutSql": "name\nActivation Order\nSim/Handset Change\nExtend Order\nOrder reactivation\nOrder suspend\nChange Order\nOutOrder"
      },
      {
        "id": "4.8",
        "nomeParagrafo": "PAR 3.8 - Estrae tutti i campi verso il SOM a partire da id_ordine\n            (DIN1717443044244)",
        "codicePlSql": "select  \n--*\nidordine,actionid,idbb,externalid,action,id,caratvalue,attrvalue,caratname,attrname \nfrom (\n\t\t\tselect table_input.*\n\t\t\t,json_array_elements(message_xml::json->'attrs')->'value' attrValue\n\t\t\t,json_array_elements(message_xml::json->'attrs')->'name' attrName\n\t\t\tfrom (\n\t\t\tWITH RECURSIVE table_recursive AS \n\t\t\t(\n\t\t\t  SELECT \n\t\t\t  json_array_elements(message_xml::json->'productOrderItem') AS product_item\n\t\t\t  ,message_xml\n\t\t\t  ,actionId\n\t\t\t  ,idOrdine\n\t\t\t  FROM \n\t\t\t  -- input da inserire action outbound SOM\n\t\t\t  --(select b.message_xml from action a,action_msg b where a.message_id=b.id and a.id=620153549475)\n\t\t\t\t(\n\t\t\t\t\t\tselect distinct\n\t\t\t\t\t\td.message_xml,b.id actionId,a.value idOrdine \n\t\t\t\t\t\tfrom detail a, request b, action c ,action_msg d\n\t\t\t\t\t\twhere a.value='1-604305737940' and \n\t\t\t\t\t\ta.root_id=b.root_id and \n\t\t\t\t\t\tc.request_id=b.id and \n\t\t\t\t\t\tc.system='som' and \n\t\t\t\t\t\tc.direction='outbound' and\n\t\t\t\t\t\td.id=c.message_id\n\t\t\t\t)\n\t\t\t  table_input\n\t\t\t  UNION ALL\n\t\t\t  SELECT \n\t\t\t  json_array_elements(product_item->'productOffering') productOffering\n\t\t\t  ,message_xml\n\t\t\t    ,actionId\n\t\t\t  ,idOrdine\n\t\t\t  FROM table_recursive\n\t\t\t  WHERE product_item->'productOrderItem' IS NOT NULL\n\t\t\t)\n\t\t\tSELECT \n\t\t\tidOrdine\n\t\t\t,actionId\n\t\t\t,message_xml\n\t\t\t,regexp_replace((product_item->'productOffering'->'id')::text,'\"','','g') as idBB\n\t\t\t,regexp_replace((product_item->'product'->'externalId')::text,'\"','','g') as externalId\n\t\t\t,product_item->>'action'as action\n\t\t\t,product_item->>'id'as id\n\t\t\t,regexp_replace((json_array_elements(product_item::json->'product'->'productCharacteristic')->'name')::text,'\"','','g') caratName\n\t\t\t,regexp_replace((json_array_elements(product_item::json->'product'->'productCharacteristic')->'value')::text,'\"','','g') caratValue\n\t\t\tFROM table_recursive\n\t\t\tWHERE product_item->'productOffering' IS NOT null\n\t\t\t) table_input\n) tabella_definitiva \nlimit 10",
        "outPutSql": "idordine;actionid;idbb;externalid;action;id;caratvalue;attrvalue;caratname;attrname\n1-604305737940;5.557;bpo_Father_0001;1604318754380;add;620153341707_306976464;0;\"OnBoarding\";isVpnEnabled;\"journeyType\"\n1-604305737940;5.557;bpo_Father_0001;1604318754380;add;620153341707_306976464;0;\"Standard\";isVpnEnabled;\"journeySubType\"\n1-604305737940;5.557;bpo_Father_0001;1604318754380;add;620153341707_306976464;Business;\"OnBoarding\";customerSegment;\"journeyType\"\n1-604305737940;5.557;bpo_Father_0001;1604318754380;add;620153341707_306976464;Business;\"Standard\";customerSegment;\"journeySubType\"\n1-604305737940;5.557;bpo_Father_0001;1604318754380;add;620153341707_306976464;0;\"OnBoarding\";isEnelVpnEnabled;\"journeyType\"\n1-604305737940;5.557;bpo_Father_0001;1604318754380;add;620153341707_306976464;0;\"Standard\";isEnelVpnEnabled;\"journeySubType\"\n1-604305737940;5.557;bpo_Father_0001;1604318754380;add;620153341707_306976464;sim;\"OnBoarding\";famiglia;\"journeyType\"\n1-604305737940;5.557;bpo_Father_0001;1604318754380;add;620153341707_306976464;sim;\"Standard\";famiglia;\"journeySubType\"\n1-604305737940;5.557;bpo_Father_0001;1604318754380;add;620153341707_306976464;8939880845120947068;\"OnBoarding\";serialNumber;\"journeyType\"\n1-604305737940;5.557;bpo_Father_0001;1604318754380;add;620153341707_306976464;8939880845120947068;\"Standard\";serialNumber;\"journeySubType\""
      },
      {
        "id": "4.9",
        "nomeParagrafo": "PAR 3.9 - Estrae tutti i campi verso il SOM in maniera completa\n            entrando per id_ordine (DIN1717444448355)",
        "codicePlSql": "select * from (\n\t\t\tselect table_input.*\n\t\t\tfrom (\n\t\t\t\t\t\t\t\tWITH RECURSIVE table_recursive AS \n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t\t  SELECT \n\t\t\t\t\t\t\t\t\t\t\t  idOrdine,\n\t\t\t\t\t\t\t\t\t\t\t  actionId,\n\t\t\t\t\t\t\t\t\t\t\t  json_array_elements(message_xml::json->'productOrderItem') AS product_item\n\t\t\t\t\t\t\t\t\t\t\t  FROM \n\t\t\t\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselect distinct\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td.message_xml,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tb.id actionId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ta.value idOrdine \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfrom detail a, request b, action c ,action_msg d\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twhere a.value='1-604305737940' and \n\t\t\t\t\t\t\t\t\t\t\t\t\t\ta.root_id=b.root_id and \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tc.request_id=b.id and \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tc.system='som' and \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tc.direction='outbound' and\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td.id=c.message_id\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t  table_input\n\t\t\t\t\t\t\t\t  UNION ALL\n\t\t\t\t\t\t\t\t\t\t\t  SELECT \n\t\t\t\t\t\t\t\t\t\t\t  idOrdine,\n\t\t\t\t\t\t\t\t\t\t\t  actionId,\n\t\t\t\t\t\t\t\t\t\t\t  json_array_elements(product_item->'productOffering')as product_item\n\t\t\t\t\t\t\t\t\t\t\t  FROM table_recursive\n\t\t\t\t\t\t\t\t\t\t\t  WHERE product_item->'productOrderItem' IS NOT NULL\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\tSELECT \n\t\t\t\t\t\t\t\tidOrdine\n\t\t\t\t\t\t\t\t,actionId\n\t\t\t\t\t\t\t\t,regexp_replace((product_item->'productOffering'->'id')::text,'\"','','g') as idBB\n\t\t\t\t\t\t\t\t,regexp_replace((product_item->'product'->'externalId')::text,'\"','','g') as externalId\n\t\t\t\t\t\t\t\t,product_item->>'action'as action\n\t\t\t\t\t\t\t\t,product_item->>'id'as id\n\t\t\t\t\t\t\t\tFROM table_recursive\n\t\t\t\t\t\t\t\tWHERE product_item->'productOffering' IS NOT null\n\t\t\t) table_input\n) tabella_definitiva \nunion all\n\tselect distinct\n\ta.value ordine \n\t,b.id actid\t\n\t,'attrs' struct\n\t,json_array_elements(message_xml::json->'attrs')->>'name' as names\n  ,json_array_elements(message_xml::json->'attrs')->>'value' as value\n  ,'' as action\n  from detail a, request b, action c ,action_msg d\n\twhere a.value='1-604305737940' and \n\ta.root_id=b.root_id and \n\tc.request_id=b.id and \n\tc.system='som' and \n\tc.direction='outbound' and\n\td.id=c.message_id\n\tunion all \n\tselect distinct a.value ordine \n\t,b.id actid\n\t,'relatedEntity' struct\n\t,json_array_elements(d.message_xml::json->'relatedEntity')->>'reference' as refer\n   ,json_array_elements(message_xml::json->'relatedEntity')->>'role' as roles\n\t  ,'' as action\n\tfrom detail a, request b, action c ,action_msg d\n\twhere a.value='1-604305737940' and \n\ta.root_id=b.root_id and \n\tc.request_id=b.id and \n\tc.system='som' and \n\tc.direction='outbound' and\n\td.id=c.message_id",
        "outPutSql": "idordine;actionid;idbb;externalid;action;id\n1-604305737940;5.557;bpo_Father_0001;1604318754380;add;620153341707_306976464\n1-604305737940;5.557;po_ANB_MSISDN;1604318754397;add;620153341707_1357715757\n1-604305737940;5.557;po_ANB_EnableMMS;1604318754448;add;620153341707_1445120822\n1-604305737940;5.557;po_ANB_VoiceMail;1604318754406;add;620153341707_1658162733\n1-604305737940;5.557;po_ANB_EnableSMSOutgoing;1604318754409;add;620153341707_530169019\n1-604305737940;5.557;po_ANB_APN_001;1604318754447;add;620153341707_824979038\n1-604305737940;5.557;po_ANB_EnableVoiceRoaming;1604318754404;add;620153341707_858934639\n1-604305737940;5.557;po_ANB_EnableVoiceInternational;1604318754405;add;620153341707_97198039\n1-604305737940;5.557;po_ANB_MobileAccess4G;1604318776565;add;620153341707_1089086908\n1-604305737940;5.557;po_CB_ATR_NA_NA_001;1604318754410;add;620153341707_1953500679\n1-604305737940;5.557;bpo_NA_M_PM_T_001;1604318754449;add;620153341707_1383899099\n1-604305737940;5.557;po_CB_A_P80_NA_002;1604318754453;add;620153341707_679126356\n1-604305737940;5.557;po_CB_T_P65_NA_002;1604318754451;add;620153341707_1102148578\n1-604305737940;5.557;po_AAB_Refill;;add;620153341707_1748410781\n1-604305737940;5.559;bpo_Father_0001;1604318754456;add;620153341710_1762946006\n1-604305737940;5.559;po_ANB_MSISDN;1604318754473;add;620153341710_1366950131\n1-604305737940;5.559;po_ANB_EnableMMS;1604318754524;add;620153341710_1199843865\n1-604305737940;5.559;po_ANB_VoiceMail;1604318754482;add;620153341710_751581771\n1-604305737940;5.559;po_ANB_EnableSMSOutgoing;1604318754485;add;620153341710_1494263402\n1-604305737940;5.559;po_ANB_APN_001;1604318754523;add;620153341710_356078934\n1-604305737940;5.559;po_ANB_EnableVoiceRoaming;1604318754480;add;620153341710_1700394860\n1-604305737940;5.559;po_ANB_EnableVoiceInternational;1604318754481;add;620153341710_1610449819\n1-604305737940;5.559;po_ANB_MobileAccess4G;1604318776574;add;620153341710_911752339\n1-604305737940;5.559;po_CB_ATR_NA_NA_001;1604318754486;add;620153341710_1248038209\n1-604305737940;5.559;bpo_NA_M_PM_T_001;1604318754525;add;620153341710_596966817\n1-604305737940;5.559;po_CB_A_P80_NA_002;1604318754529;add;620153341710_941121157\n1-604305737940;5.559;po_CB_T_P65_NA_002;1604318754527;add;620153341710_1675670452\n1-604305737940;5.559;po_AAB_Refill;;add;620153341710_1877531375\n1-604305737940;5.561;bpo_Father_0001;1604318754532;add;620153341713_115498307\n1-604305737940;5.561;po_ANB_MSISDN;1604318754549;add;620153341713_686961033\n1-604305737940;5.561;po_ANB_EnableMMS;1604318754600;add;620153341713_959204151\n1-604305737940;5.561;po_ANB_VoiceMail;1604318754558;add;620153341713_1033550640\n1-604305737940;5.561;po_ANB_EnableSMSOutgoing;1604318754561;add;620153341713_374830717\n1-604305737940;5.561;po_ANB_APN_001;1604318754599;add;620153341713_1140355764\n1-604305737940;5.561;po_ANB_EnableVoiceRoaming;1604318754556;add;620153341713_956550920\n1-604305737940;5.561;po_ANB_EnableVoiceInternational;1604318754557;add;620153341713_1864859086\n1-604305737940;5.561;po_ANB_MobileAccess4G;1604318776583;add;620153341713_1909213147\n1-604305737940;5.561;po_CB_ATR_NA_NA_001;1604318754562;add;620153341713_705959512\n1-604305737940;5.561;bpo_NA_M_PM_T_001;1604318754601;add;620153341713_123784308\n1-604305737940;5.561;po_CB_A_P80_NA_002;1604318754605;add;620153341713_140817291\n1-604305737940;5.561;po_CB_T_P65_NA_002;1604318754603;add;620153341713_722155727\n1-604305737940;5.561;po_AAB_Refill;;add;620153341713_1829311988\n1-604305737940;5.563;bpo_Father_0001;1604318677518;add;620153341716_17367306\n1-604305737940;5.563;po_ANB_MSISDN;1604318754245;add;620153341716_996256370\n1-604305737940;5.563;po_ANB_EnableMMS;1604318754296;add;620153341716_1032369889\n1-604305737940;5.563;po_ANB_VoiceMail;1604318754254;add;620153341716_417230820\n1-604305737940;5.563;po_ANB_EnableSMSOutgoing;1604318754257;add;620153341716_1745079876\n1-604305737940;5.563;po_ANB_APN_001;1604318754295;add;620153341716_438524224\n1-604305737940;5.563;po_ANB_EnableVoiceRoaming;1604318754252;add;620153341716_2085141777\n1-604305737940;5.563;po_ANB_EnableVoiceInternational;1604318754253;add;620153341716_688714289\n1-604305737940;5.563;po_ANB_MobileAccess4G;1604318776547;add;620153341716_406560640\n1-604305737940;5.563;po_CB_ATR_NA_NA_001;1604318754258;add;620153341716_927257658\n1-604305737940;5.563;bpo_NA_M_PM_T_001;1604318754297;add;620153341716_270397733\n1-604305737940;5.563;po_CB_A_P80_NA_002;1604318754301;add;620153341716_964108763\n1-604305737940;5.563;po_CB_T_P65_NA_002;1604318754299;add;620153341716_1036442286\n1-604305737940;5.563;po_AAB_Refill;;add;620153341716_658876134\n1-604305737940;5.565;bpo_Father_0001;1604318754681;add;620153341719_2018928247\n1-604305737940;5.565;po_ANB_MSISDN;1604318754698;add;620153341719_1912619004\n1-604305737940;5.565;po_ANB_EnableMMS;1604318754749;add;620153341719_2108843901\n1-604305737940;5.565;po_ANB_VoiceMail;1604318754707;add;620153341719_875118919\n1-604305737940;5.565;po_ANB_EnableSMSOutgoing;1604318754710;add;620153341719_2106656273\n1-604305737940;5.565;po_ANB_APN_001;1604318754748;add;620153341719_973745335\n1-604305737940;5.565;po_ANB_EnableVoiceRoaming;1604318754705;add;620153341719_1480737218\n1-604305737940;5.565;po_ANB_EnableVoiceInternational;1604318754706;add;620153341719_1912820128\n1-604305737940;5.565;po_ANB_MobileAccess4G;1604318776611;add;620153341719_296454818\n1-604305737940;5.565;po_CB_ATR_NA_NA_001;1604318754711;add;620153341719_1876269754\n1-604305737940;5.565;bpo_NA_M_PM_T_001;1604318754750;add;620153341719_2013044105\n1-604305737940;5.565;po_ANB_MobileAccess5G;1604318776640;add;620153341719_1627140596\n1-604305737940;5.565;po_AAB_Refill;;add;620153341719_1008903299\n1-604305737940;5.567;bpo_Father_0001;1604318754608;add;620153341730_1302398499\n1-604305737940;5.567;po_ANB_MSISDN;1604318754625;add;620153341730_1764056964\n1-604305737940;5.567;po_ANB_EnableMMS;1604318754676;add;620153341730_678999771\n1-604305737940;5.567;po_ANB_VoiceMail;1604318754634;add;620153341730_1959391141\n1-604305737940;5.567;po_ANB_EnableSMSOutgoing;1604318754637;add;620153341730_851560649\n1-604305737940;5.567;po_ANB_APN_001;1604318754675;add;620153341730_374118606\n1-604305737940;5.567;po_ANB_EnableVoiceRoaming;1604318754632;add;620153341730_1299968457\n1-604305737940;5.567;po_ANB_EnableVoiceInternational;1604318754633;add;620153341730_281023350\n1-604305737940;5.567;po_ANB_MobileAccess4G;1604318776592;add;620153341730_1493105033\n1-604305737940;5.567;po_CB_ATR_NA_NA_001;1604318754638;add;620153341730_1599437720\n1-604305737940;5.567;bpo_NA_M_PM_T_001;1604318754677;add;620153341730_1778137839\n1-604305737940;5.567;po_ANB_MobileAccess5G;1604318776631;add;620153341730_750027987\n1-604305737940;5.567;po_AAB_Refill;;add;620153341730_1243570132\n1-604305737940;5.569;bpo_Father_0001;1604318754304;add;620153341733_2033579214\n1-604305737940;5.569;po_ANB_MSISDN;1604318754321;add;620153341733_127543181\n1-604305737940;5.569;po_ANB_EnableMMS;1604318754372;add;620153341733_362308810\n1-604305737940;5.569;po_ANB_VoiceMail;1604318754330;add;620153341733_1614109573\n1-604305737940;5.569;po_ANB_EnableSMSOutgoing;1604318754333;add;620153341733_1090435370\n1-604305737940;5.569;po_ANB_APN_001;1604318754371;add;620153341733_1392614246\n1-604305737940;5.569;po_ANB_EnableVoiceRoaming;1604318754328;add;620153341733_894469992\n1-604305737940;5.569;po_ANB_EnableVoiceInternational;1604318754329;add;620153341733_1275252897\n1-604305737940;5.569;po_ANB_MobileAccess4G;1604318776556;add;620153341733_1997155934\n1-604305737940;5.569;po_CB_ATR_NA_NA_001;1604318754334;add;620153341733_1637026517\n1-604305737940;5.569;bpo_NA_M_PM_T_001;1604318754373;add;620153341733_2072341259\n1-604305737940;5.569;po_CB_A_P80_NA_002;1604318754377;add;620153341733_2100313581\n1-604305737940;5.569;po_CB_T_P65_NA_002;1604318754375;add;620153341733_1420138602\n1-604305737940;5.569;po_AAB_Refill;;add;620153341733_674015109\n1-604305737940;5.687;po_ANB_MSISDN;1604318754549;Modify;620153342297_366014274\n1-604305737940;5.689;po_ANB_MSISDN;1604318754397;Modify;620153342309_600321777\n1-604305737940;5.690;po_ANB_MSISDN;1604318754473;Modify;620153342314_1406960209\n1-604305737940;5.691;po_ANB_MSISDN;1604318754321;Modify;620153342315_2022574617\n1-604305737940;6.064;po_ANB_MSISDN;1604318754625;Modify;620153345048_686001977\n1-604305737940;5.557;attrs;journeyType;OnBoarding;\n1-604305737940;5.691;attrs;oloCode;01;\n1-604305737940;5.569;attrs;journeyType;OnBoarding;\n1-604305737940;5.687;attrs;journeyType;ChangeMSISDN;\n1-604305737940;5.689;attrs;cutoverDate;18/09/2023;\n1-604305737940;6.064;attrs;oloCode;01;\n1-604305737940;5.691;attrs;requestId;620153341734;\n1-604305737940;5.689;attrs;journeySubType;PortIn;\n1-604305737940;5.561;attrs;journeySubType;Standard;\n1-604305737940;6.064;attrs;journeyType;ChangeMSISDN;\n1-604305737940;5.565;attrs;journeyType;OnBoarding;\n1-604305737940;5.690;attrs;oloCode;01;\n1-604305737940;5.687;attrs;oloCode;01;\n1-604305737940;5.559;attrs;journeyType;OnBoarding;\n1-604305737940;5.689;attrs;oloCode;01;\n1-604305737940;5.569;attrs;journeySubType;Standard;\n1-604305737940;5.567;attrs;journeyType;OnBoarding;\n1-604305737940;5.563;attrs;journeySubType;Standard;\n1-604305737940;5.557;attrs;journeySubType;Standard;\n1-604305737940;6.064;attrs;requestId;620153341731;\n1-604305737940;5.565;attrs;journeySubType;Standard;\n1-604305737940;5.689;attrs;requestId;620153341708;\n1-604305737940;6.064;attrs;journeySubType;PortIn;\n1-604305737940;5.563;attrs;journeyType;OnBoarding;\n1-604305737940;5.561;attrs;journeyType;OnBoarding;\n1-604305737940;5.687;attrs;cutoverDate;18/09/2023;\n1-604305737940;5.690;attrs;requestId;620153341711;\n1-604305737940;5.567;attrs;journeySubType;Standard;\n1-604305737940;5.690;attrs;journeyType;ChangeMSISDN;\n1-604305737940;5.687;attrs;requestId;620153341714;\n1-604305737940;5.691;attrs;journeyType;ChangeMSISDN;\n1-604305737940;5.687;attrs;journeySubType;PortIn;\n1-604305737940;5.690;attrs;journeySubType;PortIn;\n1-604305737940;5.690;attrs;cutoverDate;18/09/2023;\n1-604305737940;5.691;attrs;journeySubType;PortIn;\n1-604305737940;5.691;attrs;cutoverDate;18/09/2023;\n1-604305737940;6.064;attrs;cutoverDate;19/09/2023;\n1-604305737940;5.559;attrs;journeySubType;Standard;\n1-604305737940;5.689;attrs;journeyType;ChangeMSISDN;\n1-604305737940;5.690;relatedEntity;3284563623;MSISDN;\n1-604305737940;5.567;relatedEntity;3274268702;MSISDN;\n1-604305737940;5.689;relatedEntity;222885452388196;IMSI;\n1-604305737940;5.565;relatedEntity;3274296037;MSISDN;\n1-604305737940;5.569;relatedEntity;3200292138;MSISDN;\n1-604305737940;5.691;relatedEntity;3200292138;MSISDN;\n1-604305737940;5.559;relatedEntity;3284563623;MSISDN;\n1-604305737940;5.567;relatedEntity;222885452388202;IMSI;\n1-604305737940;5.687;relatedEntity;222885452388198;IMSI;\n1-604305737940;5.689;relatedEntity;3292848436;MSISDN;\n1-604305737940;5.563;relatedEntity;3274277657;MSISDN;\n1-604305737940;5.691;relatedEntity;222885452388199;IMSI;\n1-604305737940;5.569;relatedEntity;222885452388199;IMSI;\n1-604305737940;6.064;relatedEntity;3274268702;MSISDN;\n1-604305737940;5.557;relatedEntity;222885452388196;IMSI;\n1-604305737940;5.563;relatedEntity;222885452388200;IMSI;\n1-604305737940;5.559;relatedEntity;222885452388197;IMSI;\n1-604305737940;5.557;relatedEntity;3292848436;MSISDN;\n1-604305737940;5.690;relatedEntity;222885452388197;IMSI;\n1-604305737940;5.561;relatedEntity;222885452388198;IMSI;\n1-604305737940;5.687;relatedEntity;3200149073;MSISDN;\n1-604305737940;6.064;relatedEntity;222885452388202;IMSI;\n1-604305737940;5.565;relatedEntity;222885452388201;IMSI;\n1-604305737940;5.561;relatedEntity;3200149073;MSISDN"
      },
      {
        "id": "4.10",
        "nomeParagrafo": "PAR 3.10 - Estrazione di tutti i campi pubblicati al SOM per\n            id_ordine (***) (DIN1717487503180)",
        "codicePlSql": "select * from (\n\t\t\tselect table_input.*\n\t\t\tfrom (\n\t\t\t\t\t\t\t\tWITH RECURSIVE table_recursive AS \n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t\t  SELECT \n\t\t\t\t\t\t\t\t\t\t\t  idOrdine,\n\t\t\t\t\t\t\t\t\t\t\t  actionId,\n\t\t\t\t\t\t\t\t\t\t\t  json_array_elements(message_xml::json->'productOrderItem') AS product_item\n\t\t\t\t\t\t\t\t\t\t\t  FROM \n\t\t\t\t\t\t\t\t\t\t\t\t(--estrae tutte le action outbound som\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselect distinct\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td.message_xml,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tc.id actionId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ta.value idOrdine \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfrom detail a, request b, action c ,action_msg d\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twhere a.value='1-604305737940' and \n\t\t\t\t\t\t\t\t\t\t\t\t\t\ta.root_id=b.root_id and \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tc.request_id=b.id and \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tc.system='som' and \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tc.direction='outbound' and\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td.id=c.message_id\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t  table_input\n\t\t\t\t\t\t\t\t  UNION ALL\n\t\t\t\t\t\t\t\t\t\t\t  SELECT \n\t\t\t\t\t\t\t\t\t\t\t  idOrdine,\n\t\t\t\t\t\t\t\t\t\t\t  actionId,\n\t\t\t\t\t\t\t\t\t\t\t  json_array_elements(product_item->'productOffering')as product_item\n\t\t\t\t\t\t\t\t\t\t\t  FROM table_recursive\n\t\t\t\t\t\t\t\t\t\t\t  WHERE product_item->'productOrderItem' IS NOT null\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\tSELECT \n\t\t\t\t\t\t\t\tidOrdine\n\t\t\t\t\t\t\t\t,actionId\n\t\t\t\t\t\t\t\t,'idbb:   '||(product_item->'productOffering'->'id')::text as field1\n\t\t\t\t\t\t\t\t,'externalIdbb:   '||(product_item->'product'->'externalId')::text as fiedl2\n\t\t\t\t\t\t\t\t,'productCharacteristic.name:   '||(json_array_elements(product_item->'product'->'productCharacteristic')->'name')::text as field3\n\t\t\t\t\t\t\t\t,'productCharacteristic.value:   '||(json_array_elements(product_item->'product'->'productCharacteristic')->'value')::text as fiedl4\n\t\t\t\t\t\t\t\t,'productOrItem.action:   '||(product_item->>'action')::text as field5\n\t\t\t\t\t\t\t\t,'productOrItem.id:   '||(product_item->>'id')::text as field6\n\t\t\t\t\t\t\t\tFROM table_recursive\n\t\t\t\t\t\t\t\tWHERE product_item->'productOffering' IS NOT null\n\t\t\t) table_input\n) tabella_definitiva \nunion all\n\tselect distinct\n\ta.value as idOrdine \n\t,c.id as actionId\t\n\t,'' as field1\n\t,'' as field2\n\t,'attrs.name:   '||(json_array_elements(message_xml::json->'attrs')->>'name')::text as field3\n    ,'attrs.value:   '||(json_array_elements(message_xml::json->'attrs')->>'value')::text as field4\n    ,'' as field5\n    ,'' as field6\n    from detail a, request b, action c ,action_msg d\n\twhere a.value='1-604305737940' and \n\ta.root_id=b.root_id and \n\tc.request_id=b.id and \n\tc.system='som' and \n\tc.direction='outbound' and\n\td.id=c.message_id\nunion all \n\tselect distinct \n\ta.value as idOrdine \n\t,c.id as actionId\n\t,'' as field1\n\t,'' as field2\n\t,'relatedEntity.reference:   '||(json_array_elements(d.message_xml::json->'relatedEntity')->>'reference')::text as field3\n    ,'relatedEntity.role:   '||(json_array_elements(message_xml::json->'relatedEntity')->>'role')::text as field4\n    ,'' as field5\n    ,'' as field6\n\tfrom detail a, request b, action c ,action_msg d\n\twhere a.value='1-604305737940' and \n\ta.root_id=b.root_id and \n\tc.request_id=b.id and \n\tc.system='som' and \n\tc.direction='outbound' and\n\td.id=c.message_id",
        "outPutSql": "idordine;actionid;field1;fiedl2;field3;fiedl4;field5;field6\n1-604305737940;620.153.341.707;idbb: \"bpo_Father_0001\";externalIdbb: \"1604318754380\";productCharacteristic.name: \"isVpnEnabled\";productCharacteristic.value: \"0\";productOrItem.action: add;productOrItem.id: 620153341707_306976464\n1-604305737940;620.153.341.707;idbb: \"bpo_Father_0001\";externalIdbb: \"1604318754380\";productCharacteristic.name: \"customerSegment\";productCharacteristic.value: \"Business\";productOrItem.action: add;productOrItem.id: 620153341707_306976464\n1-604305737940;620.153.341.707;idbb: \"bpo_Father_0001\";externalIdbb: \"1604318754380\";productCharacteristic.name: \"isEnelVpnEnabled\";productCharacteristic.value: \"0\";productOrItem.action: add;productOrItem.id: 620153341707_306976464\n1-604305737940;620.153.341.707;idbb: \"bpo_Father_0001\";externalIdbb: \"1604318754380\";productCharacteristic.name: \"famiglia\";productCharacteristic.value: \"sim\";productOrItem.action: add;productOrItem.id: 620153341707_306976464\n1-604305737940;620.153.341.707;idbb: \"bpo_Father_0001\";externalIdbb: \"1604318754380\";productCharacteristic.name: \"serialNumber\";productCharacteristic.value: \"8939880845120947068\";productOrItem.action: add;productOrItem.id: 620153341707_306976464\n1-604305737940;620.153.341.707;idbb: \"bpo_Father_0001\";externalIdbb: \"1604318754380\";productCharacteristic.name: \"technology\";productCharacteristic.value: \"UMTS\";productOrItem.action: add;productOrItem.id: 620153341707_306976464\n1-604305737940;620.153.341.707;idbb: \"bpo_Father_0001\";externalIdbb: \"1604318754380\";productCharacteristic.name: \"ctype\";productCharacteristic.value: \"PREPAGATO\";productOrItem.action: add;productOrItem.id: 620153341707_306976464\n1-604305737940;620.153.341.707;idbb: \"bpo_Father_0001\";externalIdbb: \"1604318754380\";productCharacteristic.name: \"commercialOfferName\";productCharacteristic.value: \"PHX00033\";productOrItem.action: add;productOrItem.id: 620153341707_306976464\n1-604305737940;620.153.341.707;idbb: \"bpo_Father_0001\";externalIdbb: \"1604318754380\";productCharacteristic.name: \"simType\";productCharacteristic.value: \"voice\";productOrItem.action: add;productOrItem.id: 620153341707_306976464\n1-604305737940;620.153.341.707;idbb: \"bpo_Father_0001\";externalIdbb: \"1604318754380\";productCharacteristic.name: \"imsi\";productCharacteristic.value: \"222885452388196\";productOrItem.action: add;productOrItem.id: 620153341707_306976464"
      }
    ]
  },
  {
    "id": "5",
    "nomeCapitolo": "CAP 4 - Estrazioni provisioning GSI(DIN1717340190450)",
    "paragrafi": [
      {
        "id": "5.1",
        "nomeParagrafo": "PAR 4.1 - Estrae action GSI da dettagli dall'EMF (DIN1717340494447)",
        "codicePlSql": "SELECT a.* FROM ACTION a, action_msg b\nWHERE \na.message_id=b.id AND\nb.message_xml LIKE '%Reintegro per furto - Kasko Premium%'\nAND a.name='Send Logistic Order to GSI'\nAND a.status='SA'\nAND a.ts_created>current_date-80",
        "outPutSql": "id;name;direction;status;ts_requested;ts_created;ts_enqueued;ts_first_start;ts_start;ts_end;priority;ts_todo;queue;request_id;message_id;system;cfg_id;handler;response_id;adb_source;result\n620.153.950.220;Send Logistic Order to GSI;outbound;SA;2024-04-04 15:23:03.794 +0200;2024-04-04 15:23:03.798 +0200;;2024-04-04 15:23:04.000 +0200;2024-04-04 15:23:04.000 +0200;2024-04-04 15:23:05.000 +0200;;;gsi-publisher-out;611.096;438.973;gsi;84;com2gsi.module/com2gsi.processes.businessProcess.SendOrderOut;0;;\n620.154.140.532;Send Logistic Order to GSI;outbound;SA;2024-04-19 12:46:26.493 +0200;2024-04-19 12:46:26.500 +0200;;2024-04-19 12:46:26.000 +0200;2024-04-19 12:46:26.000 +0200;2024-04-19 12:46:28.000 +0200;;;gsi-publisher-out;628.013;568.457;gsi;84;com2gsi.module/com2gsi.processes.businessProcess.SendOrderOut;0"
      }
    ]
  },
  {
    "id": "6",
    "nomeCapitolo": "CAP 5 - Estrazioni provisioning BILLING(DIN1717341107452)",
    "paragrafi": [
      {
        "id": "6.1",
        "nomeParagrafo": "PAR 5.1 - Estrae action billing a partire dal tel_no\n            (DIN1717341162103)",
        "codicePlSql": "select --d.value,b.name,b.id,a.root_id,b.status,\n      distinct b.name,d.value,a.ts_created,a.name,a.status from request a, action  b,detail d\n      where \n      b.request_id=a.id  \n            and b.system='billing' and b.direction='outbound'\nand a.root_id=d.root_id  and  d.name = 'tel_no' and b.name in ('Deactivation Service Instance','Active Service Instance')\nand d.value IN (\n'3801225517'\n) order by 2",
        "outPutSql": "name;value;ts_created;name;status\nActive Service Instance;3801225517;2024-02-07 15:30:38.546 +0100;Network;SA\nActive Service Instance;3801225517;2024-02-08 22:41:12.884 +0100;Logistics;SA\nDeactivation Service Instance;3801225517;2024-04-03 17:21:02.667 +0200;Network;SA"
      }
    ]
  },
  {
    "id": "7",
    "nomeCapitolo": "CAP 6 - Estrazioni REPORT COM(DIN1717345081937)",
    "paragrafi": [
      {
        "id": "7.1",
        "nomeParagrafo": "PAR 6.1 - Estrazione ultimo report utile (DIN1717345154546)",
        "codicePlSql": "SELECT count(*),(select max(id) from report_com_new)idrun FROM report_com_new where id = (select max(id) from report_com_new)",
        "outPutSql": "count;idrun\n58.267;16.847"
      },
      {
        "id": "7.2",
        "nomeParagrafo": "PAR 6.2 - Estrazione campi di dettaglio del report\n            (DIN1717345292330)",
        "codicePlSql": "select request_id,id_ordine,status,tipo,sottotipo,canale,csv_text from (\n\t\tSELECT \n\t\tsplit_part(csv_text,';',1) request_id\n\t\t,split_part(csv_text,';',2) id_ordine\n\t\t,split_part(csv_text,';',8) tipo\n\t\t,split_part(csv_text,';',9) sottotipo\n\t\t,split_part(csv_text,';',10) canale\n\t\t,split_part(csv_text,';',51) status\n\t\t,csv_text\n\t\tFROM report_com_new where \n\t\tid =12172 and outcome='TO CLUSTERIZE'\n\t\t--id=(select max(id) from report_com_new)\n\t\t)zz --where \n--\t\tstatus<>'COMPLETED'\n--\t\tid_ordine='1-615870302022'\n\t\t\t\t\twhere\tzz.request_id::int in (638538)",
        "outPutSql": "request_id;id_ordine;status;tipo;sottotipo;canale;csv_text\n638538;N/A;TO CLUSTERIZE;N/A;N/A;N/A;638538;N/A;MnpDonor;WP;2024/04/24\n                  20:41:55;N/A;1;N/A;N/A;N/A;N/A;N/A;N/A;N/A;1;0;0;0;0;0;0;1;0;0;0;0;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;0;0;0;0;0;0;TO\n                  CLUSTERIZE;"
      },
      {
        "id": "7.3",
        "nomeParagrafo": "PAR 6.3 - Estrae csv di un report (DIN1717345416390)",
        "codicePlSql": "SELECT csv_text FROM report_com_new where id = (select max(id) from report_com_new)",
        "outPutSql": "csv_text\n720960;N/A;MnpDonor;WP;2024/05/30\n                  20:41:51;N/A;2;N/A;N/A;N/A;N/A;N/A;N/A;N/A;1;0;0;0;0;0;0;0;1;0;0;0;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;0;0;0;0;0;0;TO\n                  CLUSTERIZE;\n720959;N/A;MnpDonor;WP;2024/05/30\n                  20:41:51;N/A;2;N/A;N/A;N/A;N/A;N/A;N/A;N/A;1;0;0;0;0;0;0;0;1;0;0;0;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;0;0;0;0;0;0;TO\n                  CLUSTERIZE;"
      }
    ]
  },
  {
    "id": "8",
    "nomeCapitolo": "CAP 7 - Estrazioni gestione PREFERENTIAL LIST(DIN1717346077096)",
    "paragrafi": [
      {
        "id": "8.1",
        "nomeParagrafo": "PAR 7.1 - Estrazione numerazioni dall'EMF di PL (DIN1717346336964)",
        "codicePlSql": "select r.id,r.name,r.root_id,  myTab.*\nfrom request r, \nrequest_doc rd  ,\nxmltable(\n\tXMLNAMESPACES(\t\n\t\t\t\t\t'http://bssevo_com/commons/B2B-CMF-JobSharedVariable' AS \"tns3\",\n\t\t\t\t\t'http://www.example.org/listaLotti' AS \"tns2\",\n\t\t\t\t\t'http://phoenix.wind.it/common/ManagingPL' as \"tns4\"\n\t\t\t\t\t),\n\t\t\t\t'/tns3:root/tns3:managingPL/tns4:lotto/tns4:numerazione'\n\tpassing (rd.document_xml::xml)\n\tcolumns \n\t\tazione  text path '@azione',\n\t\tnum  text path 'text()'\t,\n\t\tCOMiD   text path '../../tns4:communityId'\n\t) myTab\nwhere name = 'Managing Preferential List Events' and status = 'WP' and \nrd.id =r.document_id --and r.root_id=583521\nlimit 4",
        "outPutSql": "id;name;root_id;azione;num;comid\n566.901;Managing Preferential List Events;566.679;Add;3890038127;463194\n8.320;Managing Preferential List Events;8.320;Add;3882404099;456002\n8.320;Managing Preferential List Events;8.320;Add;3895069587;456002\n564.289;Managing Preferential List Events;564.230;Add;3888324395;462756"
      },
      {
        "id": "8.2",
        "nomeParagrafo": "PAR 7.2 - Estrae request di PL ed il numero di telefono\n            (DIN1717346509167)",
        "codicePlSql": "Select distinct rr.id,d.* from \nrequest r,\nrequest rr  , \nitem2detail i2d, \ndetail d\nwhere \nr.name = 'Managing Preferential List Events' and \nr.status = 'WP' and \nr.root_id=rr.root_id and \nrr.name not in ('Managing Preferential List Events') and\ni2d.request_id =rr.id and\nd.id =i2d.detail_id and \nd.name='tel_no' limit 4",
        "outPutSql": "id;id;name;value;pos;cfg_id;root_id\n306.833;107.301;tel_no;3808923775;0;14;306.833\n306.833;107.308;tel_no;3275934948;0;14;306.833\n306.833;107.310;tel_no;3887309990;0;14;306.833\n323.418;107.301;tel_no;3808923775;0;14;306.833"
      }
    ]
  },
  {
    "id": "9",
    "nomeCapitolo": "CAP 8 - Query DISCARD(DIN1717354015894)",
    "paragrafi": [
      {
        "id": "9.1",
        "nomeParagrafo": "PAR 8.1 - Estrazione dalla discard dal id_ordine (DIN1717354317061)",
        "codicePlSql": "select *\nfrom detail de, discard2detail dd, discard di\nwhere di.id_discard = dd.id_discard\nand dd.id_detail = de.id\nand de.value = '1-617897653353'\norder by ts_discard desc;",
        "outPutSql": "id_discard;id_detail;id;name;value;pos;cfg_id;root_id\n5.162.513;2.857.057;2.857.057;id_odl_crm;1-625981894945;0;13;\n5.159.513;2.857.055;2.857.055;tracking_id;1-625981894945;0;12"
      },
      {
        "id": "9.2",
        "nomeParagrafo": "PAR 8.2 - Estrae eventi dalla discard entrando per sistema e in like\n            sul messaggio (DIN1717354434954)",
        "codicePlSql": "select count(*), date_trunc('Day',ts_discard)\nfrom discard a where system='Som' and error_msg like '%COM_SOM_403%' and ts_discard > current_date -20 \ngroup by  date_trunc('Day',ts_discard)",
        "outPutSql": "count;date_trunc\n1;2024-05-13 00:00:00.000 +0200\n4;2024-05-14 00:00:00.000 +0200\n1;2024-05-17 00:00:00.000 +0200\n1;2024-05-20 00:00:00.000 +0200\n1;2024-05-21 00:00:00.000 +0200\n3;2024-05-22 00:00:00.000 +0200\n20;2024-05-23 00:00:00.000 +0200\n13;2024-05-24 00:00:00.000 +0200\n14;2024-05-27 00:00:00.000 +0200\n6;2024-05-29 00:00:00.000 +0200\n2;2024-05-30 00:00:00.000 +0200\n2;2024-05-31 00:00:00.000 +0200"
      }
    ]
  },
  {
    "id": "10",
    "nomeCapitolo": "CAP 9 - Estrazione eventi con CRM(DIN1717408739474)",
    "paragrafi": [
      {
        "id": "10.1",
        "nomeParagrafo": "PAR 9.1 - Estrazione dettaglio esiti dall'EMF CRM outbound\n            (DIN1717408932196)",
        "codicePlSql": "select b.id,A.ID,A.ROOT_ID,b.ts_start,b.ts_end,b.name,c.message_xml,c.id from \nrequest a, action b,action_msg c  \nwhere 1=1\nand c.id=b.message_id\nand b.request_id=a.id \nAND b.status ='SA'\nand b.\"system\" ='crm'\nand b.direction='outbound'\nand root_id =579121 \n--and root_id in (select distinct root_id from detail where value='1-618011418916')\n--and b.id=620153514073\nand c.message_xml  like '%xsdLocal3:GestioneEsiti%'\nand b.name not in ('Notify Waiting IFX','Send start CVP to CRM','Send Welcome Call','Notify Start SOM to CRM','Notify Order')\n\nselect a.name,myTab.*,myTab.esito ||'-'||myTab.causale||'-'||a.id\nfrom action_msg b \n,action a,request d,\nxmltable(\n\tXMLNAMESPACES(\t\n\t\t\t\t\t'http://www.siebel.com/xml/BSS%20Gestione%20Esiti%20Order%20INT%20IO' AS \"xsdLocal3\"\n\t\t\t\t\t),\n\t--'/xsdLocal3:GestioneEsiti/xsdLocal3:OrderEntry-Order/xsdLocal3:OrderEntry-LineItems'\n\t\t\t\t\t'/xsdLocal3:GestioneEsiti/xsdLocal3:OrderEntry-Order/descendant::xsdLocal3:OrderEntry-LineItems'\n\tpassing (b.message_xml::xml)\n\tcolumns \n\t\tSottotipo  text path 'xsdLocal3:Sottotipo'\n\t\t,codice text path 'xsdLocal3:esitoItems/xsdLocal3:codice'\n\t\t,descrizione text path 'xsdLocal3:esitoItems/xsdLocal3:descrizione'\n\t\t,esito text path 'xsdLocal3:esitoItems/xsdLocal3:esito'\n\t\t,causale text path 'xsdLocal3:esitoItems/xsdLocal3:causale'\n\t\t,orderItemId text path 'xsdLocal3:OrderItemId'\n\t) myTab\nwhere a.message_id=b.id \n--and a.id=620153596705 \nand b.message_xml  like '%xsdLocal3:GestioneEsiti%'\nand \nd.root_id =616306\n--and a.id in (620153830538,620153796141)\n -- in (select distinct root_id from detail where value='1-619821002400')\nand a.request_id=d.id\nAND a.status ='SA'\nand a.\"system\" ='crm'\nand a.name  not in ('Notify Waiting IFX','Send start CVP to CRM','Send Welcome Call','Notify Start SOM to CRM','Notify Order')\nand a.direction='outbound' --LIMIT 30",
        "outPutSql": "name;sottotipo;codice;descrizione;esito;causale;orderitemid;?column?\nSend mobile provisioning result;OPZ;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPR0;Definitivo-OK-620154130962\nSend mobile provisioning result;OPZ;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPQZ;Definitivo-OK-620154130962\nSend mobile provisioning result;OPZ;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPQY;Definitivo-OK-620154130962\nSend mobile provisioning result;PNTF;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPQX;Definitivo-OK-620154130962\nSend mobile provisioning result;MNPIN;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPPY;Definitivo-OK-620154130962\nSend mobile provisioning result;5GPRE;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYP684D;Definitivo-OK-620154130962\nSend mobile provisioning result;RAS;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPPU;Definitivo-OK-620154130962\nSend mobile provisioning result;LTE;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYP683U;Definitivo-OK-620154130962\nSend mobile provisioning result;SCHMINT;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPPP;Definitivo-OK-620154130962\nSend mobile provisioning result;SROMINT;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPPO;Definitivo-OK-620154130962\nSend mobile provisioning result;INTWAPBIZ;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPQV;Definitivo-OK-620154130962\nSend mobile provisioning result;SSMSORG;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPPT;Definitivo-OK-620154130962\nSend mobile provisioning result;SSGRTEL;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPPQ;Definitivo-OK-620154130962\nSend mobile provisioning result;MMS;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPQW;Definitivo-OK-620154130962\nSend mobile provisioning result;OPZ;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPR2;Definitivo-OK-620154130962\nSend mobile provisioning result;SES;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPR1;Definitivo-OK-620154130962\nSend mobile provisioning result;SRVPREPMOB;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPPH;Definitivo-OK-620154130962\nSend mobile provisioning result;MATS;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPP9;Definitivo-OK-620154130962\nSend mobile provisioning result;ACCPREPMOB;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPOS;Definitivo-OK-620154130962\nSend mobile provisioning result;WLESSPREPAG;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPOQ;Definitivo-OK-620154130962\nSend GSI SITE result to CRM;OPZ;SAP_SEDE;Esito consegna sede SAP;Definitivo;OK;1-7WYODPOP;Definitivo-OK-620154080710\nSend GSI SITE result to CRM;TERMOB;SAP_SEDE;Esito consegna sede SAP;Definitivo;OK;1-7WYODPO0;Definitivo-OK-620154080710\nSend GSI SITE result to CRM;CPEM;SAP_SEDE;Esito consegna sede SAP;Definitivo;OK;1-7WYODPN9;Definitivo-OK-620154080710\nSend GSI SITE result to CRM;OPZ;SAP_SEDE;Esito consegna sede SAP;Definitivo;OK;1-7WYODPN8;Definitivo-OK-620154080710\nSend GSI SITE result to CRM;TERMOB;SAP_SEDE;Esito consegna sede SAP;Definitivo;OK;1-7WYODPMJ;Definitivo-OK-620154080710\nSend GSI SITE result to CRM;CPEM;SAP_SEDE;Esito consegna sede SAP;Definitivo;OK;1-7WYODPLS;Definitivo-OK-620154080710\nSend GSI SITE result to CRM;MATS;SAP_SEDE;Esito consegna sede GSI;Provvisionato;Consegnato seriale SIM;1-7WYODPRM;Provvisionato-Consegnato seriale SIM-620154080710\nSend GSI SITE result to CRM;ACCPREPMOB;SAP_SEDE;Esito consegna SAP;Provvisionato;ICCID;1-7WYODPR5;Provvisionato-ICCID-620154080710\nSend GSI SITE result to CRM;WLESSPREPAG;SAP_SEDE;Esito consegna SAP;Parziale;OK;1-7WYODPR3;Parziale-OK-620154080710\nSend GSI SITE result to CRM;MATS;SAP_SEDE;Esito consegna sede GSI;Provvisionato;Consegnato seriale SIM;1-7WYODPP9;Provvisionato-Consegnato seriale SIM-620154080710\nSend GSI SITE result to CRM;ACCPREPMOB;SAP_SEDE;Esito consegna SAP;Provvisionato;ICCID;1-7WYODPOS;Provvisionato-ICCID-620154080710\nSend GSI SITE result to CRM;WLESSPREPAG;SAP_SEDE;Esito consegna SAP;Parziale;OK;1-7WYODPOQ;Parziale-OK-620154080710\nSend mobile provisioning result;OPZ;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPR0;Definitivo-OK-620154080827\nSend mobile provisioning result;OPZ;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPQZ;Definitivo-OK-620154080827\nSend mobile provisioning result;OPZ;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPQY;Definitivo-OK-620154080827\nSend mobile provisioning result;PNTF;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPQX;Definitivo-OK-620154080827\nSend mobile provisioning result;5GPRE;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYP684D;Definitivo-OK-620154080827\nSend mobile provisioning result;RAS;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPPU;Definitivo-OK-620154080827\nSend mobile provisioning result;LTE;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYP683U;Definitivo-OK-620154080827\nSend mobile provisioning result;SCHMINT;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPPP;Definitivo-OK-620154080827\nSend mobile provisioning result;SROMINT;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPPO;Definitivo-OK-620154080827\nSend mobile provisioning result;INTWAPBIZ;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPQV;Definitivo-OK-620154080827\nSend mobile provisioning result;SSMSORG;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPPT;Definitivo-OK-620154080827\nSend mobile provisioning result;SSGRTEL;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPPQ;Definitivo-OK-620154080827\nSend mobile provisioning result;MMS;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPQW;Definitivo-OK-620154080827\nSend mobile provisioning result;OPZ;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPR2;Definitivo-OK-620154080827\nSend mobile provisioning result;SES;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPR1;Definitivo-OK-620154080827\nSend mobile provisioning result;SRVPREPMOB;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPPH;Definitivo-OK-620154080827\nSend mobile provisioning result;MATS;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPP9;Definitivo-OK-620154080827\nSend mobile provisioning result;ACCPREPMOB;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPOS;Definitivo-OK-620154080827\nSend mobile provisioning result;WLESSPREPAG;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPOQ;Definitivo-OK-620154080827\nSend MNP Result OK to CRM;MNPIN;MOG_CN_ACCEPT;Esito richiesta MNP;Provvisionato;OK;1-7WYODPSB;Provvisionato-OK-620154102557\nSend MNP Result OK to CRM;SRVPREPMOB;MOG_CN_ACCEPT;Esito richiesta MNP;Provvisionato;OK;1-7WYODPRU;Provvisionato-OK-620154102557\nSend MNP Result OK to CRM;WLESSPREPAG;MOG_CN_ACCEPT;Esito richiesta MNP;Parziale;OK;1-7WYODPR3;Parziale-OK-620154102557\nSend Espl MNP to CRM;MNPIN;MOG_CN_CMP;Esito Richiesta attivazione Espl MNP a MOG;Provvisionato;OK;1-7WYODPSB;Provvisionato-OK-620154129252\nSend Espl MNP to CRM;SRVPREPMOB;MOG_CN_CMP;Esito Richiesta attivazione Espl MNP a MOG;Provvisionato;OK;1-7WYODPRU;Provvisionato-OK-620154129252\nSend Espl MNP to CRM;ACCPREPMOB;MOG_CN_CMP;Esito Richiesta attivazione Espl MNP a MOG;Provvisionato;OK;1-7WYODPR5;Provvisionato-OK-620154129252\nSend Espl MNP to CRM;WLESSPREPAG;MOG_CN_CMP;Esito Richiesta attivazione Espl MNP a MOG;Provvisionato;OK;1-7WYODPR3;Provvisionato-OK-620154129252\nSend Espl MNP to CRM;MNPIN;MOG_CN_CMP;Esito Richiesta attivazione Espl MNP a MOG;Provvisionato;OK;1-7WYODPPY;Provvisionato-OK-620154130994\nSend Espl MNP to CRM;SRVPREPMOB;MOG_CN_CMP;Esito Richiesta attivazione Espl MNP a MOG;Provvisionato;OK;1-7WYODPPH;Provvisionato-OK-620154130994\nSend Espl MNP to CRM;ACCPREPMOB;MOG_CN_CMP;Esito Richiesta attivazione Espl MNP a MOG;Provvisionato;OK;1-7WYODPOS;Provvisionato-OK-620154130994\nSend Espl MNP to CRM;WLESSPREPAG;MOG_CN_CMP;Esito Richiesta attivazione Espl MNP a MOG;Provvisionato;OK;1-7WYODPOQ;Provvisionato-OK-620154130994\nSend start MNP to CRM;MNPIN;START_MOG;Invio richiesta MNP a MOG;Parziale;OK;1-7WYODPPY;Parziale-OK-620154081112\nSend start MNP to CRM;SRVPREPMOB;START_MOG;Invio richiesta MNP a MOG;Parziale;OK;1-7WYODPPH;Parziale-OK-620154081112\nSend start MNP to CRM;ACCPREPMOB;START_MOG;Invio richiesta MNP a MOG;Parziale;OK;1-7WYODPOS;Parziale-OK-620154081112\nSend start MNP to CRM;WLESSPREPAG;START_MOG;Invio richiesta MNP a MOG;Parziale;OK;1-7WYODPOQ;Parziale-OK-620154081112\nSend mobile provisioning result;OPZ;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPTD;Definitivo-OK-620154129229\nSend mobile provisioning result;OPZ;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPTC;Definitivo-OK-620154129229\nSend mobile provisioning result;OPZ;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPTB;Definitivo-OK-620154129229\nSend mobile provisioning result;PNTF;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPTA;Definitivo-OK-620154129229\nSend mobile provisioning result;MNPIN;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPSB;Definitivo-OK-620154129229\nSend mobile provisioning result;5GPRE;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYP684M;Definitivo-OK-620154129229\nSend mobile provisioning result;RAS;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPS7;Definitivo-OK-620154129229\nSend mobile provisioning result;LTE;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYP6843;Definitivo-OK-620154129229\nSend mobile provisioning result;SCHMINT;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPS2;Definitivo-OK-620154129229\nSend mobile provisioning result;SROMINT;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPS1;Definitivo-OK-620154129229\nSend mobile provisioning result;INTWAPBIZ;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPT8;Definitivo-OK-620154129229\nSend mobile provisioning result;SSMSORG;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPS6;Definitivo-OK-620154129229\nSend mobile provisioning result;SSGRTEL;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPS3;Definitivo-OK-620154129229\nSend mobile provisioning result;MMS;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPT9;Definitivo-OK-620154129229\nSend mobile provisioning result;OPZ;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPTF;Definitivo-OK-620154129229\nSend mobile provisioning result;SES;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPTE;Definitivo-OK-620154129229\nSend mobile provisioning result;SRVPREPMOB;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPRU;Definitivo-OK-620154129229\nSend mobile provisioning result;MATS;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPRM;Definitivo-OK-620154129229\nSend mobile provisioning result;ACCPREPMOB;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPR5;Definitivo-OK-620154129229\nSend mobile provisioning result;WLESSPREPAG;SDM_CHG;Esito change SDM;Definitivo;OK;1-7WYODPR3;Definitivo-OK-620154129229\nSend GSI ACQ result to CRM;MNPIN;SAP_ACQ_OK;Esito acquisizione SAP;Parziale;OK;1-7WYODPPY;Parziale-OK-620154034814\nSend GSI ACQ result to CRM;5GPRE;SAP_ACQ_OK;Esito acquisizione SAP;Parziale;OK;1-7WYP684D;Parziale-OK-620154034814\nSend GSI ACQ result to CRM;RAS;SAP_ACQ_OK;Esito acquisizione SAP;Parziale;OK;1-7WYODPPU;Parziale-OK-620154034814\nSend GSI ACQ result to CRM;LTE;SAP_ACQ_OK;Esito acquisizione SAP;Parziale;OK;1-7WYP683U;Parziale-OK-620154034814\nSend GSI ACQ result to CRM;SCHMINT;SAP_ACQ_OK;Esito acquisizione SAP;Parziale;OK;1-7WYODPPP;Parziale-OK-620154034814\nSend GSI ACQ result to CRM;SROMINT;SAP_ACQ_OK;Esito acquisizione SAP;Parziale;OK;1-7WYODPPO;Parziale-OK-620154034814\nSend GSI ACQ result to CRM;INTWAPBIZ;SAP_ACQ_OK;Esito acquisizione SAP;Parziale;OK;1-7WYODPQV;Parziale-OK-620154034814\nSend GSI ACQ result to CRM;SSMSORG;SAP_ACQ_OK;Esito acquisizione SAP;Parziale;OK;1-7WYODPPT;Parziale-OK-620154034814\nSend GSI ACQ result to CRM;SSGRTEL;SAP_ACQ_OK;Esito acquisizione SAP;Parziale;OK;1-7WYODPPQ;Parziale-OK-620154034814\nSend GSI ACQ result to CRM;MMS;SAP_ACQ_OK;Esito acquisizione SAP;Parziale;OK;1-7WYODPQW;Parziale-OK-620154034814\nSend GSI ACQ result to CRM;SES;SAP_ACQ_OK;Esito acquisizione SAP;Parziale;OK;1-7WYODPR1;Parziale-OK-620154034814\nSend GSI ACQ result to CRM;SRVPREPMOB;SAP_ACQ_OK;Esito acquisizione SAP;Parziale;OK;1-7WYODPPH;Parziale-OK-620154034814\nSend GSI ACQ result to CRM;WLESSPREPAG;SAP_ACQ_OK;Esito acquisizione SAP;Parziale;OK;1-7WYODPOQ;Parziale-OK-620154034814\nSend MNP Result OK to CRM;MNPIN;MOG_CN_ACCEPT;Esito richiesta MNP;Provvisionato;OK;1-7WYODPPY;Provvisionato-OK-620154102938\nSend MNP Result OK to CRM;SRVPREPMOB;MOG_CN_ACCEPT;Esito richiesta MNP;Provvisionato;OK;1-7WYODPPH;Provvisionato-OK-620154102938\nSend MNP Result OK to CRM;WLESSPREPAG;MOG_CN_ACCEPT;Esito richiesta MNP;Parziale;OK;1-7WYODPOQ;Parziale-OK-620154102938\nSend mobile provisioning result;OPZ;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPTD;Definitivo-OK-620154081090\nSend mobile provisioning result;OPZ;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPTC;Definitivo-OK-620154081090\nSend mobile provisioning result;OPZ;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPTB;Definitivo-OK-620154081090\nSend mobile provisioning result;PNTF;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPTA;Definitivo-OK-620154081090\nSend mobile provisioning result;5GPRE;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYP684M;Definitivo-OK-620154081090\nSend mobile provisioning result;RAS;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPS7;Definitivo-OK-620154081090\nSend mobile provisioning result;LTE;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYP6843;Definitivo-OK-620154081090\nSend mobile provisioning result;SCHMINT;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPS2;Definitivo-OK-620154081090\nSend mobile provisioning result;SROMINT;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPS1;Definitivo-OK-620154081090\nSend mobile provisioning result;INTWAPBIZ;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPT8;Definitivo-OK-620154081090\nSend mobile provisioning result;SSMSORG;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPS6;Definitivo-OK-620154081090\nSend mobile provisioning result;SSGRTEL;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPS3;Definitivo-OK-620154081090\nSend mobile provisioning result;MMS;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPT9;Definitivo-OK-620154081090\nSend mobile provisioning result;OPZ;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPTF;Definitivo-OK-620154081090\nSend mobile provisioning result;SES;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPTE;Definitivo-OK-620154081090\nSend mobile provisioning result;SRVPREPMOB;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPRU;Definitivo-OK-620154081090\nSend mobile provisioning result;MATS;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPRM;Definitivo-OK-620154081090\nSend mobile provisioning result;ACCPREPMOB;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPR5;Definitivo-OK-620154081090\nSend mobile provisioning result;WLESSPREPAG;SDM_ACT;Esito attivazione SDM;Definitivo;OK;1-7WYODPR3;Definitivo-OK-620154081090\nSend start MNP to CRM;MNPIN;START_MOG;Invio richiesta MNP a MOG;Parziale;OK;1-7WYODPSB;Parziale-OK-620154081441\nSend start MNP to CRM;SRVPREPMOB;START_MOG;Invio richiesta MNP a MOG;Parziale;OK;1-7WYODPRU;Parziale-OK-620154081441\nSend start MNP to CRM;ACCPREPMOB;START_MOG;Invio richiesta MNP a MOG;Parziale;OK;1-7WYODPR5;Parziale-OK-620154081441\nSend start MNP to CRM;WLESSPREPAG;START_MOG;Invio richiesta MNP a MOG;Parziale;OK;1-7WYODPR3;Parziale-OK-620154081441"
      },
      {
        "id": "10.2",
        "nomeParagrafo": "PAR 9.2 - Estrazione dettagli sede consegna su EMF CRM\n            (DIN1717413417324)",
        "codicePlSql": "select d.name,d.id,myTab.*\nfrom request_doc b ,\nrequest d,\nxmltable(\n\tXMLNAMESPACES(\t\n\t\t\t\t\t'http://bssevo_com/commons/B2B-CMF-CommercialOrder' AS \"tns28\",\n\t\t\t\t\t'http://bssevo_com/commons/B2B-CMF-JobSharedVariable' AS \"tns\",\n\t\t\t\t\t'http://bssevo_com/commons/B2B-CMF-CommercialOrder' AS \"tns17\",\n\t\t\t\t\t'http://bssevo_com/commons/B2B-CMF-CommercialOrder'AS \"tns2\"\n\t\t\t\t\t),\n\t\t\t\t\t'/tns:root/tns:commercialOrder/tns2:order/tns28:sedeConsegna'\n\tpassing (b.document_xml::xml)\n\tcolumns \n\t\ttipologiaSede  text path 'tns17:tipologiaSede',\n\t\tidSedeConsegna  text path 'tns17:idSedeConsegna',\n\t\trowIdSedeConsegna  text path 'tns17:rowIdSedeConsegna',\n\t\tcondizionePagamento text path 'tns17:condizionePagamento'\n\t) myTab\nwhere 1=1 \nand d.id =598149 \n--and d.id in (select distinct root_id from detail where value='1-619807037680')\nand d.document_id=b.id\n--and d.ts_created >current_date -10\nand exists (select 1 from request z where name='Logistics' and z.root_id=d.id)\n--limit 40\norder by 2",
        "outPutSql": "name;id;tipologiasede;idsedeconsegna;rowidsedeconsegna;condizionepagamento\nActivation Order;598.149;Noleggio;562636824;1-7WYP683D;\nActivation Order;598.149;Vendita Rateizzata;562636824;1-7WYP683G;ZRAT"
      },
      {
        "id": "10.3",
        "nomeParagrafo": "PAR 9.3 - Estrazione timing task di long aging da id_ordine o\n            root_id (DIN1717418490154)",
        "codicePlSql": "SELECT \n(select distinct value from detail where root_id = a.root_id and name='id_odl_crm') id_ordine,\na.root_id,a.name,a.id,a.status,a.ts_created,a.ts_end,\ncase when a.name='Logistics' then \n 'C'||(select value from item2detail zz,detail z where zz.request_id=a.id and z.id=zz.detail_id and z.name='transaction_id' and zz.action_id is null limit 1)\n end as aging_last_outcome_log,\ncase when a.name='Logistics' then \n (select max(z.ts_end) from action z where z.request_id=a.id and z.direction='inbound' and z.system='gsi')-\n (select min(z.ts_end) from action z where z.request_id=a.id and z.direction='outbound' and z.system='gsi'and z.name='Send Logistic Order to GSI')\n end as aging_last_outcome_log\n ,\n case when a.name='Logistics' then \n (select current_date)-\n (select min(z.ts_end) from action z where z.request_id=a.id and z.direction='outbound' and z.system='gsi'and z.name='Send Logistic Order to GSI')\n end as aging_absolute_logi\n ,\n case when a.name='Logistics' then \n (select count(*) from action z where z.request_id=a.id and status<>'SA')\n end as failure_logistic\n,\n case when a.name='Network' then \n (select count(*) from action z where z.request_id=a.id and status<>'SA')\n end as failure_network\n ,\n case when a.name='Network' then \n (select max(z.ts_end) from action z where z.request_id=a.id and z.direction='inbound' and z.system='som')-\n (select min(z.ts_end) from action z where z.request_id=a.id and z.direction='outbound' and z.system='som'and z.name='Send Service Order')\n end as aging_network\n ,\n case when a.name='MnpRecipient' then \n (select count(*) from action z where z.request_id=a.id and status<>'SA')\n end as failure_mog\n ,\n case when a.name='MnpRecipient' then \n (select max(z.ts_end) from action z where z.request_id=a.id and z.direction='inbound' and z.system='mog')-\n (select min(z.ts_end) from action z where z.request_id=a.id and z.direction='outbound' and z.system='mog'and z.name='Send Request Mnp')\n end as aging_mog\n ,\n( select count(*) from action z where z.request_id=a.root_id and status<>'SA') failure_root\n ,\n( select count(*) from action z where z.request_id=a.root_id and z.name='Notify Order') count_order_end\nFROM REquest a WHERE a.root_id in (\n620918,\n624971,\n627900,\n627970,\n634222,\n634285\n)\norder by 1,3,5",
        "outPutSql": "id_ordine;root_id;name;id;status;ts_created;ts_end;aging_last_outcome_log;aging_last_outcome_log;aging_absolute_logi;failure_logistic;failure_network;aging_network;failure_mog;aging_mog;failure_root;count_order_end\n1-622512594047;620.918;Activation Order;620.918;SA;2024-04-16 10:14:39.732 +0200;2024-05-06 04:03:36.806 +0200;;;;;;;;;0;1\n1-622512594047;620.918;MnpRecipient;620.976;SA;2024-04-16 11:01:01.333 +0200;2024-04-18 06:08:03.529 +0200;;;;;;;0;16:51:45;0;1\n1-622512594047;620.918;MnpRecipient;620.970;SA;2024-04-16 11:01:01.295 +0200;2024-04-18 06:06:57.409 +0200;;;;;;;0;16:47:11;0;1\n1-622512594047;620.918;MnpRecipient;620.975;SA;2024-04-16 11:01:01.413 +0200;2024-05-06 04:03:22.348 +0200;;;;;;;0;11:02:19;0;1\n1-622512594047;620.918;MnpRecipient;620.974;SA;2024-04-16 11:01:01.341 +0200;2024-04-18 04:03:57.544 +0200;;;;;;;0;16:58:26;0;1\n1-622512594047;620.918;Network;622.299;SA;2024-04-17 04:10:52.609 +0200;2024-04-18 06:07:53.005 +0200;;;;;0;1 day 01:56:26;;;0;1\n1-622512594047;620.918;Network;620.971;SA;2024-04-16 11:01:01.333 +0200;2024-04-18 06:08:07.333 +0200;;;;;0;00:01:36;;;0;1\n1-622512594047;620.918;Network;622.336;SA;2024-04-17 04:14:12.719 +0200;2024-04-18 04:03:50.524 +0200;;;;;0;23:49:17;;;0;1\n1-622512594047;620.918;Network;653.052;SA;2024-05-03 04:11:37.144 +0200;2024-05-06 04:03:10.041 +0200;;;;;0;2 days 23:50:56;;;0;1\n1-622512594047;620.918;Network;622.323;SA;2024-04-17 04:11:22.678 +0200;2024-04-18 06:06:49.513 +0200;;;;;0;1 day 01:55:07;;;0;1\n1-622512594047;620.918;Network;620.972;SA;2024-04-16 11:01:01.341 +0200;2024-04-18 04:03:59.340 +0200;;;;;0;00:01:24;;;0;1\n1-622512594047;620.918;Network;620.969;SA;2024-04-16 11:01:01.295 +0200;2024-04-18 06:07:01.807 +0200;;;;;0;00:01:29;;;0;1\n1-622512594047;620.918;Network;620.973;SA;2024-04-16 11:01:01.413 +0200;2024-05-06 04:03:28.833 +0200;;;;;0;00:01:32;;;0;1\n1-622723701408;624.971;Activation Order;624.971;SA;2024-04-18 12:22:03.844 +0200;2024-05-02 12:21:00.166 +0200;;;;;;;;;0;1\n1-622723701408;624.971;MnpRecipient;625.117;SA;2024-04-18 13:39:46.928 +0200;2024-04-22 04:06:42.457 +0200;;;;;;;0;14:23:19;0;1\n1-622723701408;624.971;MnpRecipient;625.118;SA;2024-04-18 13:39:46.979 +0200;2024-04-22 04:07:43.545 +0200;;;;;;;0;14:24:35;0;1\n1-622723701408;624.971;MnpRecipient;625.120;SA;2024-04-18 13:39:47.022 +0200;2024-05-02 06:19:31.471 +0200;;;;;;;0;11:47:34;0;1\n1-622723701408;624.971;Network;625.116;SA;2024-04-18 13:39:46.979 +0200;2024-04-22 04:07:46.292 +0200;;;;;0;00:02:26;;;0;1\n1-622723701408;624.971;Network;647.061;SA;2024-04-30 04:26:23.478 +0200;2024-05-02 06:19:20.946 +0200;;;;;0;2 days 01:52:29;;;0;1\n1-622723701408;624.971;Network;627.032;SA;2024-04-19 04:13:57.603 +0200;2024-04-22 04:07:33.959 +0200;;;;;0;2 days 23:53:01;;;0;1\n1-622723701408;624.971;Network;625.115;SA;2024-04-18 13:39:46.928 +0200;2024-04-22 04:06:44.788 +0200;;;;;0;00:01:43;;;0;1\n1-622723701408;624.971;Network;625.119;SA;2024-04-18 13:39:47.022 +0200;2024-05-02 06:19:35.797 +0200;;;;;0;00:01:31;;;0;1\n1-622723701408;624.971;Network;627.044;SA;2024-04-19 04:14:25.604 +0200;2024-04-22 04:06:35.967 +0200;;;;;0;2 days 23:51:49;;;0;1\n1-622828109187;627.900;Activation Order;627.900;SA;2024-04-19 11:37:29.372 +0200;2024-04-29 16:32:40.433 +0200;;;;;;;;;0;1\n1-622828109187;627.900;Network;627.996;SA;2024-04-19 12:37:27.767 +0200;2024-04-29 16:32:35.338 +0200;;;;;0;00:01:22;;;0;1\n1-622829857989;627.970;Extend Order;627.970;SA;2024-04-19 12:20:16.792 +0200;2024-04-29 16:39:20.238 +0200;;;;;;;;;0;1\n1-622829857989;627.970;Network;628.285;SA;2024-04-19 15:57:16.200 +0200;2024-04-29 16:39:08.363 +0200;;;;;0;00:01:42;;;0;1\n1-622851936592;634.285;Extend Order;634.285;SA;2024-04-23 11:32:16.421 +0200;2024-05-03 11:07:31.800 +0200;;;;;;;;;0;1\n1-622851936592;634.285;Network;634.755;SA;2024-04-23 15:14:43.736 +0200;2024-05-03 11:07:17.852 +0200;;;;;0;00:01:31;;;0;1\n1-623076960538;634.222;Activation Order;634.222;SA;2024-04-23 10:37:33.150 +0200;2024-05-03 11:22:16.042 +0200;;;;;;;;;0;1\n1-623076960538;634.222;Network;634.401;SA;2024-04-23 12:04:33.390 +0200;2024-05-03 11:09:22.228 +0200;;;;;0;00:03:58;;;0;1\n1-623076960538;634.222;Network;634.402;SA;2024-04-23 12:04:33.421 +0200;2024-05-03 11:22:07.491 +0200;;;;;0;00:16:46;;;0;1\n1-623076960538;634.222;Network;634.400;SA;2024-04-23 12:04:33.376 +0200;2024-05-03 11:07:29.328 +0200;;;;;0;00:01:45;;;0;1\n1-623076960538;634.222;Network;634.404;SA;2024-04-23 12:04:34.488 +0200;2024-05-03 11:14:35.730 +0200;;;;;0;00:08:56;;;0;1\n1-623076960538;634.222;Network;634.399;SA;2024-04-23 12:04:33.333 +0200;2024-05-03 11:19:24.792 +0200;;;;;0;00:13:52;;;0;1\n1-623076960538;634.222;Network;634.403;SA;2024-04-23 12:04:33.431 +0200;2024-05-03 11:07:36.171 +0200;;;;;0;00:01:58;;;0;1"
      },
      {
        "id": "10.4",
        "nomeParagrafo": "PAR 9.4 - Parsing ordine CRM json in forma non gerarchica su COM\n            (DIN1717428066319)",
        "codicePlSql": "-- query non strutturata \n\nselect * from (\nWITH RECURSIVE product_recursive AS (\n  SELECT \n  \tjson_array_elements(message_xml::json->'payload'->'productOrderItem') AS product_item,\n\t  message_xml as msg\n  FROM \n--  \t(select b.message_xml from action a,action_msg b where a.message_id=b.id and a.id=620155183956) -- 1-617808480689\n  (  select b.message_xml from action a,action_msg b where a.message_id=b.id and a.name='Receive Sim/Handset Change' and a.ts_created>current_date-20 \n  and b.message_xml like '%\"flagSospensione\":\"1\"%')\n  \tyour_table_name\n  UNION ALL\n  SELECT json_array_elements(product_item->'productOrderItem'),msg as msg\n  FROM product_recursive\n  WHERE product_item->'productOrderItem' IS NOT NULL\n)\nSELECT \n--product_item->'product'->>'id' AS product_id\nmsg::json->'payload'->'externalId',\nmsg::json->'payload'->'flagSospensione',\nmsg::json->'payload'->'causaleOrdine',\nmsg::json->'payload'->'tipo',\nmsg::json->'payload'->'sottotipo',\nmsg::json->'request_root_name'/*,\nproduct_item->>'componentRoot' as componentRoot\n,product_item->>'integrationId' as integrationId\n,product_item->>'componentPadre' as componentPadre\n,product_item->>'codicePs'as codicePs\n,product_item->>'action'as action_\n,product_item->>'sottotipo'as sottotipo\n,product_item->>'tipo'as tipo\n,product_item->>'idPrice'as idPrice\n,product_item->>'mdf'as mdf*/\nFROM product_recursive\nWHERE product_item->'product' IS NOT null\n) your_table_name",
        "outPutSql": "?column?;?column?;?column?;?column?;?column?;?column?\n\"1-625645759767\";\"1\";\"Smarrimento\";\"Modifica\";\"Cambio SIM/Terminale\";\"Sim/Handset Change\"\n\"1-625958290686\";\"1\";\"Furto\";\"Modifica\";\"Cambio SIM/Terminale\";\"Sim/Handset Change\"\n\"1-625446840694\";\"1\";\"Smarrimento\";\"Modifica\";\"Cambio SIM/Terminale\";\"Sim/Handset Change\"\n\"1-625446840694\";\"1\";\"Smarrimento\";\"Modifica\";\"Cambio SIM/Terminale\";\"Sim/Handset Change\"\n\"1-625446840694\";\"1\";\"Smarrimento\";\"Modifica\";\"Cambio SIM/Terminale\";\"Sim/Handset Change\"\n\"1-625446840694\";\"1\";\"Smarrimento\";\"Modifica\";\"Cambio SIM/Terminale\";\"Sim/Handset Change\"\n\"1-625446840694\";\"1\";\"Smarrimento\";\"Modifica\";\"Cambio SIM/Terminale\";\"Sim/Handset Change\"\n\"1-625446840694\";\"1\";\"Smarrimento\";\"Modifica\";\"Cambio SIM/Terminale\";\"Sim/Handset Change\"\n\"1-625148343039\";\"1\";\"Furto\";\"Modifica\";\"Cambio SIM/Terminale\";\"Sim/Handset Change\"\n\"1-625296533217\";\"1\";\"Smarrimento\";\"Modifica\";\"Cambio SIM/Terminale\";\"Sim/Handset Change\""
      },
      {
        "id": "10.5",
        "nomeParagrafo": "PAR 9.5 - Estrazione oggetti di pricing e override su cmf-root COM\n            (DIN1717430756354)",
        "codicePlSql": "SELECT rr.name,a.name,a.id,ext.* FROM \n(\n\t\tselect * from (\t\t\t\t\t\t\t\t-- evento change billing element - override cross contratto\n\t\tselect r.id,r.name,r.root_id, \n\t\tmyTab.rcOverridePrice, \n\t\tmyTab.idCommercialOrder, \n\t\tmyTab.integrationId, \n\t\tmyTab.idPrice, \n\t\tmyTab.CodiceCatalogo, \n\t\tmyTab.azione,\n\t\tmyTab.descrizione,\n\t\tmyTab.sottotipoPadre,\n\t\tmyTab.sottotipo,\n\t\tmyTab.tipo,\n\t\tmyTab.causaleOrdine\n\t\tfrom request r, \n\t\trequest_doc rd,\n\t\txmltable(\n\t\t\tXMLNAMESPACES(\t\n\t\t\t\t\t\t\t'http://bssevo_com/commons/B2B-CMF-CommercialOrder' as \"tns1\",\n\t\t\t\t\t\t\t'http://bssevo_com/commons/B2B-CMF-JobSharedVariable' as \"ns21\"\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t'/ns21:root/ns21:commercialOrder/tns1:order/descendant::tns1:pricingComponent'\n\t\t\t\t\t\tPASSING (rd.document_xml::xml) \n\t\t\tCOLUMNS\n\t\t\t\tidCommercialOrder varchar(100) path '/ns21:root/ns21:commercialOrder/tns1:order/tns1:idCommercialOrder' \n\t\t\t\t,sottotipo varchar(100) path '/ns21:root/ns21:commercialOrder/tns1:order/@sottotipo'\n\t\t\t\t,tipo varchar(100) path '/ns21:root/ns21:commercialOrder/tns1:order/@tipo'\n\t\t\t\t,causaleOrdine varchar(100) path '/ns21:root/ns21:commercialOrder/tns1:order/tns1:causaleOrdine'\t\t\t\t\n\t\t\t\t,rcOverridePrice varchar(100) path 'tns1:rcOverridePrice' \n\t\t\t\t,integrationId varchar(100) path '@integrationId'\n\t\t\t    ,idPrice varchar(100) path 'tns1:idPrice'\n\t\t\t\t,CodiceCatalogo varchar(100) path 'tns1:codiceCatalogo'\n\t\t\t\t,azione varchar(100) path 'tns1:azione'\n\t\t\t\t,sottotipoPadre varchar(100) path '../@sottoTipo'\n\t\t\t\t,descrizione varchar(100) path 'tns1:descrizione'\n\t\t\t)as myTab\n\t\twhere\n\t\tr.name = 'Change Order'\n\t\tand rd.id = r.document_id\n\t\tand rd.document_xml like '%pricingComponent%'\n\t\tand r.root_id in  (select distinct root_id from detail where \n\t\tvalue IN ('1-626039052881'\n                  ))\n\t\tand r.ts_created>current_date -280\n\t\t) zz where zz.rcOverridePrice is not null \n\t\tunion all\n\t\tselect * from (\t\t\t\t\t\t\t\t-- attivazioni\n\t\tselect r.id,r.name,r.root_id, \n\t\tmyTab.rcOverridePrice, \n\t\tmyTab.idCommercialOrder, \n\t\tmyTab.integrationId, \n\t\tmyTab.idPrice, \n\t\tmyTab.CodiceCatalogo, \n\t\tmyTab.azione,\n\t\tmyTab.descrizione,\n\t\tmyTab.sottotipoPadre,\n\t\tmyTab.sottotipo,\n\t\tmyTab.tipo,\n\t\tmyTab.causaleOrdine\n\t\tfrom request r, \n\t\trequest_doc rd,\n\t\txmltable(\n\t\t\tXMLNAMESPACES(\t\n\t\t\t\t\t\t\t'http://bssevo_com/commons/B2B-CMF-JobSharedVariable' as \"tns\",\n\t\t\t\t\t\t\t'http://bssevo_com/commons/B2B-CMF-CommercialOrder' as \"tns1\"\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t'/tns:root/tns:commercialOrder/tns1:order/descendant::tns1:pricingComponent'\n\t\t\t\t\t\tPASSING (rd.document_xml::xml) \n\t\t\tCOLUMNS\n\t\t\t\tidCommercialOrder varchar(100) path '/tns:root/tns:commercialOrder/tns1:order/tns1:idCommercialOrder' \n\t\t\t\t,sottotipo varchar(100) path '/tns:root/tns:commercialOrder/tns1:order/@sottotipo'\n\t\t\t\t,tipo varchar(100) path '/tns:root/tns:commercialOrder/tns1:order/@tipo'\n\t\t\t\t,causaleOrdine varchar(100) path '/tns:root/tns:commercialOrder/tns1:order/tns1:causaleOrdine'\t\t\t\t\n\t\t\t\t,rcOverridePrice varchar(100) path 'tns1:rcOverridePrice' \n\t\t\t\t,integrationId varchar(100) path '@integrationId'\n\t\t\t    ,idPrice varchar(100) path 'tns1:idPrice'\n\t\t\t\t,CodiceCatalogo varchar(100) path 'tns1:codiceCatalogo'\n\t\t\t\t,azione varchar(100) path 'tns1:azione'\n\t\t\t\t,sottotipoPadre varchar(100) path '../@sottoTipo'\n\t\t\t\t,descrizione varchar(100) path 'tns1:descrizione'\n\t\t\t)as myTab\n\t\twhere\n\t\tr.name = 'Activation Order'\n\t\tand rd.id = r.document_id\n\t\tand rd.document_xml like '%pricingComponent%'\n\t\tand r.root_id in (select distinct root_id from detail where \n\t\tvalue IN (\n\t\t'1-626039052881'\n\t\t--'1-619650892429', --INC7181401 roberti\n        --'1-616847928744' , --INC7181562\n        --'1-616847928746'--INC7181562\n                  ))\n--\t\tand r.ts_created>current_date -80\n\t\t) zz --where zz.rcOverridePrice is not null\n--\t\torder by 1\n\t\tunion all\nselect * from (\t\t\t\t\t\t\t\t-- ampliamento\n\t\tselect r.id,r.name,r.root_id, \n\t\tmyTab.rcOverridePrice, \n\t\tmyTab.idCommercialOrder, \n\t\tmyTab.integrationId, \n\t\tmyTab.idPrice, \n\t\tmyTab.CodiceCatalogo, \n\t\tmyTab.azione,\n\t\tmyTab.descrizione,\n\t\tmyTab.sottotipoPadre,\n\t\tmyTab.sottotipo,\n\t\tmyTab.tipo,\n\t\tmyTab.causaleOrdine\n\t\tfrom request r, \n\t\trequest_doc rd,\n\t\txmltable(\n\t\t\tXMLNAMESPACES(\t\n\t\t\t\t\t\t\t'http://bssevo_com/commons/B2B-CMF-JobSharedVariable' as \"tns1\",\n\t\t\t\t\t\t\t'http://bssevo_com/commons/B2B-CMF-CommercialOrder' as \"pfx11\",\n\t\t\t\t\t\t\t'http://bssevo_com/commons/B2B-CMF-CommercialOrder' as \"tns6\"\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t'/tns1:root/tns1:commercialOrder/pfx11:order/descendant::tns6:pricingComponent'\n\t\t\t\t\t\tPASSING (rd.document_xml::xml) \n\t\t\tCOLUMNS\n\t\t\t\tidCommercialOrder varchar(100) path '/tns1:root/tns1:commercialOrder/pfx11:order/pfx11:idCommercialOrder' \n\t\t\t\t,sottotipo varchar(100) path '/tns1:root/tns1:commercialOrder/pfx11:order/@sottotipo'\n\t\t\t\t,tipo varchar(100) path '/tns1:root/tns1:commercialOrder/pfx11:order/@tipo'\n\t\t\t\t,causaleOrdine varchar(100) path '/tns1:root/tns1:commercialOrder/pfx11:order/pfx11:causaleOrdine'\t\t\t\t\n\t\t\t\t,rcOverridePrice varchar(100) path 'tns6:rcOverridePrice' \n\t\t\t\t,integrationId varchar(100) path '@integrationId'\n\t\t\t    ,idPrice varchar(100) path 'tns6:idPrice'\n\t\t\t\t,CodiceCatalogo varchar(100) path 'tns6:codiceCatalogo'\n\t\t\t\t,azione varchar(100) path 'tns6:azione'\n\t\t\t\t,sottotipoPadre varchar(100) path '../@sottoTipo'\n\t\t\t\t,descrizione varchar(100) path 'tns6:descrizione'\n\t\t\t)as myTab\n\t\twhere\n\t\tr.name = 'Extend Order'\n\t\tand rd.id = r.document_id\n\t\tand rd.document_xml like '%pricingComponent%'\n\t\t--and r.root_id='586850' \n\t\tAND r.root_id in (select distinct root_id from detail where \n\t\tvalue IN ('1-618472067646'\n\t\t--'1-619650892429', --INC7181401 roberti\n        --'1-616847928744' , --INC7181562\n        --'1-616847928746'--INC7181562\n                  ))\n\t\tand r.ts_created>current_date -80\n\t\t) zz --where zz.rcOverridePrice is not null\n) ext, request rr,ACTION a WHERE \next.id=rr.root_id AND \na.request_id=rr.id AND \n   a.system='billing' and \n      a.direction='outbound'-- LIMIT 2",
        "outPutSql": "id;name;root_id;rcoverrideprice;idcommercialorder;integrationid;idprice;codicecatalogo;azione;descrizione;sottotipopadre;sottotipo;tipo;causaleordine\n704.711;Activation Order;704.711;;1-626039052881;1626041455709;ID_PRICE_4675;PHX80101;Add;PC Secure Web Mobile Pre;SES;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041455705;ID_PRICE_66;PHX70087;Add;SUPER Unlimited;SRVPREPMOB;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041455706;ID_PRICE_118;PHX70089;Add;Promozione 12% SUPER Unlimited;SRVPREPMOB;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041455707;ID_PRICE_119;PHX70090;Add;Promozione 20% SUPER Unlimited;SRVPREPMOB;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041455785;ID_PRICE_4675;PHX80101;Add;PC Secure Web Mobile Pre;SES;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041455781;ID_PRICE_66;PHX70087;Add;SUPER Unlimited;SRVPREPMOB;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041455782;ID_PRICE_118;PHX70089;Add;Promozione 12% SUPER Unlimited;SRVPREPMOB;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041455783;ID_PRICE_119;PHX70090;Add;Promozione 20% SUPER Unlimited;SRVPREPMOB;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041455861;ID_PRICE_4675;PHX80101;Add;PC Secure Web Mobile Pre;SES;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041455857;ID_PRICE_66;PHX70087;Add;SUPER Unlimited;SRVPREPMOB;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041455858;ID_PRICE_118;PHX70089;Add;Promozione 12% SUPER Unlimited;SRVPREPMOB;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041455859;ID_PRICE_119;PHX70090;Add;Promozione 20% SUPER Unlimited;SRVPREPMOB;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041455937;ID_PRICE_4675;PHX80101;Add;PC Secure Web Mobile Pre;SES;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041455933;ID_PRICE_66;PHX70087;Add;SUPER Unlimited;SRVPREPMOB;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041455934;ID_PRICE_118;PHX70089;Add;Promozione 12% SUPER Unlimited;SRVPREPMOB;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041455935;ID_PRICE_119;PHX70090;Add;Promozione 20% SUPER Unlimited;SRVPREPMOB;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041456013;ID_PRICE_4675;PHX80101;Add;PC Secure Web Mobile Pre;SES;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041456009;ID_PRICE_66;PHX70087;Add;SUPER Unlimited;SRVPREPMOB;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041456010;ID_PRICE_118;PHX70089;Add;Promozione 12% SUPER Unlimited;SRVPREPMOB;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041456011;ID_PRICE_119;PHX70090;Add;Promozione 20% SUPER Unlimited;SRVPREPMOB;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041456090;ID_PRICE_4675;PHX80101;Add;PC Secure Web Mobile Pre;SES;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041456085;ID_PRICE_66;PHX70087;Add;SUPER Unlimited;SRVPREPMOB;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041456086;ID_PRICE_118;PHX70089;Add;Promozione 12% SUPER Unlimited;SRVPREPMOB;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041456087;ID_PRICE_119;PHX70090;Add;Promozione 20% SUPER Unlimited;SRVPREPMOB;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041456088;ID_PRICE_67;PHX70098;Add;Roaming Pass;SRVPREPMOB;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041456167;ID_PRICE_4675;PHX80101;Add;PC Secure Web Mobile Pre;SES;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041456162;ID_PRICE_66;PHX70087;Add;SUPER Unlimited;SRVPREPMOB;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041456163;ID_PRICE_118;PHX70089;Add;Promozione 12% SUPER Unlimited;SRVPREPMOB;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041456164;ID_PRICE_119;PHX70090;Add;Promozione 20% SUPER Unlimited;SRVPREPMOB;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041456165;ID_PRICE_67;PHX70098;Add;Roaming Pass;SRVPREPMOB;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041456219;ID_PRICE_4674;PHX80100;Add;PC Secure Web Mobile;ESM;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041456225;ID_PRICE_3655;PHX70101;Add;SUPER Giga Unlimited;VDAT;Attivazione;Attivazione;Prima Attivazione\n704.711;Activation Order;704.711;;1-626039052881;1626041456226;ID_PRICE_783;PHX70105;Add;Promozione SUPER Giga Unlimited;VDAT;Attivazione;Attivazione;Prima Attivazione"
      },
      {
        "id": "10.6",
        "nomeParagrafo": "PAR 9.6 - Parsing ordine CRM json in forma gerarchica su COM\n            entrando per action_id EMF siebel (DIN1717432710041)",
        "codicePlSql": "WITH RECURSIVE hierarchy AS (\n--QUESTA QUERY DEFINISCE IL LEGAME TRA PADRE E FIGLIO DEI productOrderItem ED ESTRAE PADRE\n---------------------------------------------------------------------------------------  \nSELECT\n    componentroot,\n    integrationid,\n    componentpadre,\n    codiceps,\n    action_,\n    sottotipo,\n    tipo,\n    1 AS level\n  FROM\n  (\n  \t\t\t\t--QUESTA QUERY ESTRARE TUTTI I productOrderItem ANNIDATI NEL JSON DELL'ORDINE\n\t\t\t\t---------------------------------------------------------------------------------------\n\t\t\t\tWITH RECURSIVE product_recursive AS \n\t\t\t\t(\n\t\t\t\t  SELECT json_array_elements(message_xml::json->'payload'->'productOrderItem') AS product_item\n\t\t\t\t  FROM \n\t\t\t\t  (select b.message_xml from action a,action_msg b where a.message_id=b.id and a.id=620154930838)--EMF INBOUND ESB\n\t\t\t\t  your_table_name\n\t\t\t\t  UNION ALL\n\t\t\t\t  SELECT json_array_elements(product_item->'productOrderItem')\n\t\t\t\t  FROM product_recursive\n\t\t\t\t  WHERE product_item->'productOrderItem' IS NOT NULL\n\t\t\t\t)\n\t\t\t\tSELECT \n\t\t\t\t--product_item->'product'->>'id' AS product_id\n\t\t\t\tproduct_item->>'componentRoot' as componentRoot\n\t\t\t\t,product_item->>'integrationId' as integrationId\n\t\t\t\t,product_item->>'componentPadre' as componentPadre\n\t\t\t\t,product_item->>'codicePs'as codicePs\n\t\t\t\t,product_item->>'action'as action_\n\t\t\t\t,product_item->>'sottotipo'as sottotipo\n\t\t\t\t,product_item->>'tipo'as tipo\n\t\t\t\tFROM product_recursive\n\t\t\t\tWHERE product_item->'product' IS NOT null\n\t\t\t\t---------------------------------------------------------------------------------------\n  ) your_table_name\n  WHERE\n    componentpadre = componentRoot and componentPadre=integrationId -- definisce il padre da cui poi far partire la ricorsione\n  UNION all\n  --QUESTA QUERY DEFINISCE IL LEGAME TRA PADRE E FIGLIO DEI productOrderItem ED ESTRAE I FIGLI\n  ---------------------------------------------------------------------------------------  \n  SELECT\n    t.componentroot,\n    t.integrationid,\n    t.componentpadre,\n    t.codiceps,\n    t.action_,\n    t.sottotipo,\n    t.tipo,\n    h.level + 1\n  FROM\n    (   \t\t--QUESTA QUERY ESTRARE TUTTI I productOrderItem ANNIDATI NEL JSON DELL'ORDINE\n\t\t\t\t---------------------------------------------------------------------------------------\n\t\t\t\tWITH RECURSIVE product_recursive AS \n\t\t\t\t(\n\t\t\t\t  SELECT json_array_elements(message_xml::json->'payload'->'productOrderItem') AS product_item\n\t\t\t\t  FROM \n\t\t\t\t  (select b.message_xml from action a,action_msg b where a.message_id=b.id and a.id=620154930838)\n\t\t\t\t  your_table_name\n\t\t\t\t  UNION ALL\n\t\t\t\t  SELECT json_array_elements(product_item->'productOrderItem')\n\t\t\t\t  FROM product_recursive\n\t\t\t\t  WHERE product_item->'productOrderItem' IS NOT NULL\n\t\t\t\t)\n\t\t\t\tSELECT \n\t\t\t\t--product_item->'product'->>'id' AS product_id\n\t\t\t\tproduct_item->>'componentRoot' as componentRoot\n\t\t\t\t,product_item->>'integrationId' as integrationId\n\t\t\t\t,product_item->>'componentPadre' as componentPadre\n\t\t\t\t,product_item->>'codicePs'as codicePs\n\t\t\t\t,product_item->>'action'as action_\n\t\t\t\t,product_item->>'sottotipo'as sottotipo\n\t\t\t\t,product_item->>'tipo'as tipo\n\t\t\t\tFROM product_recursive\n\t\t\t\tWHERE product_item->'product' IS NOT null\n\t)  \n\t\tt,hierarchy h where h.integrationid=t.componentpadre and t.tipo <>'PRD'\n\t)\n---------------------------------------------------------------------------------------  \nselect\ncase level \nwhen 1 then tipo||'-'|| sottotipo\nwhen 2 then '  |_'||tipo||'-'|| sottotipo\nwhen 3 then '     |_'||tipo||'-'|| sottotipo \nwhen 4 then '        |_'||tipo||'-'|| sottotipo\nwhen 5 then '           |_'||tipo||'-'|| sottotipo\nwhen 6 then '              |_'||tipo||'-'|| sottotipo\nelse lpad('', level - 1, '    ')|| sottotipo\nend as sottotipo_dec,\nlevel,\n    componentroot,\n    integrationid,\n    componentpadre,\n    codiceps,\n    action_\nFROM\n  hierarchy \n  order by componentPadre,integrationId",
        "outPutSql": "sottotipo_dec;level;componentroot;integrationid;componentpadre;codiceps;action_\nPRD-WLESSPREPAG;1;1626041455634;1626041455634;1626041455634;PHX00032;Add\n|_TC-ACCPREPMOB;2;1626041455634;1626041455636;1626041455634;PHX00033;Add\n|_TC-SRVPREPMOB;2;1626041455634;1626041455653;1626041455634;PHX00034;Add\n|_TE-SROMINT;3;1626041455634;1626041455660;1626041455653;PHX00039;Add\n|_TE-SCHMINT;3;1626041455634;1626041455661;1626041455653;PHX00040;Add\n|_TE-SSGRTEL;3;1626041455634;1626041455662;1626041455653;PHX00041;Add\n|_TE-SSMSORG;3;1626041455634;1626041455665;1626041455653;PHX00042;Add\n|_TE-RAS;3;1626041455634;1626041455666;1626041455653;PHX00089;Add\n|_TE-MNPIN;3;1626041455634;1626041455670;1626041455653;PHX30009;Add\n|_TE-INTWAPBIZ;3;1626041455634;1626041455703;1626041455653;PHX30014;Add\n|_TE-MMS;3;1626041455634;1626041455704;1626041455653;PHX30017;Add\n|_PC-PNTF;3;1626041455634;1626041455705;1626041455653;PHX70087;Add\n|_PC-OPZ;3;1626041455634;1626041455706;1626041455653;PHX70089;Add\n|_PC-OPZ;3;1626041455634;1626041455707;1626041455653;PHX70090;Add\n|_TE-SES;3;1626041455634;1626041455708;1626041455653;PHX80093;Add\n|_TE-LTE;3;1626041455634;1626042303682;1626041455653;PHX50805;Add\n|_TE-5GPRE;3;1626041455634;1626042318365;1626041455653;PHX70278;Add\n|_PC-OPZ;4;1626041455634;1626041455709;1626041455708;PHX80101;Add\nPRD-WLESSPREPAG;1;1626041455710;1626041455710;1626041455710;PHX00032;Add\n|_TC-ACCPREPMOB;2;1626041455710;1626041455712;1626041455710;PHX00033;Add\n|_TC-SRVPREPMOB;2;1626041455710;1626041455729;1626041455710;PHX00034;Add\n|_TE-SROMINT;3;1626041455710;1626041455736;1626041455729;PHX00039;Add\n|_TE-SCHMINT;3;1626041455710;1626041455737;1626041455729;PHX00040;Add\n|_TE-SSGRTEL;3;1626041455710;1626041455738;1626041455729;PHX00041;Add\n|_TE-SSMSORG;3;1626041455710;1626041455741;1626041455729;PHX00042;Add\n|_TE-RAS;3;1626041455710;1626041455742;1626041455729;PHX00089;Add\n|_TE-MNPIN;3;1626041455710;1626041455746;1626041455729;PHX30009;Add\n|_TE-INTWAPBIZ;3;1626041455710;1626041455779;1626041455729;PHX30014;Add\n|_TE-MMS;3;1626041455710;1626041455780;1626041455729;PHX30017;Add\n|_PC-PNTF;3;1626041455710;1626041455781;1626041455729;PHX70087;Add\n|_PC-OPZ;3;1626041455710;1626041455782;1626041455729;PHX70089;Add\n|_PC-OPZ;3;1626041455710;1626041455783;1626041455729;PHX70090;Add\n|_TE-SES;3;1626041455710;1626041455784;1626041455729;PHX80093;Add\n|_TE-LTE;3;1626041455710;1626042303761;1626041455729;PHX50805;Add\n|_TE-5GPRE;3;1626041455710;1626042318494;1626041455729;PHX70278;Add\n|_PC-OPZ;4;1626041455710;1626041455785;1626041455784;PHX80101;Add\nPRD-WLESSPREPAG;1;1626041455786;1626041455786;1626041455786;PHX00032;Add\n|_TC-ACCPREPMOB;2;1626041455786;1626041455788;1626041455786;PHX00033;Add\n|_TC-SRVPREPMOB;2;1626041455786;1626041455805;1626041455786;PHX00034;Add\n|_TE-SROMINT;3;1626041455786;1626041455812;1626041455805;PHX00039;Add\n|_TE-SCHMINT;3;1626041455786;1626041455813;1626041455805;PHX00040;Add\n|_TE-SSGRTEL;3;1626041455786;1626041455814;1626041455805;PHX00041;Add\n|_TE-SSMSORG;3;1626041455786;1626041455817;1626041455805;PHX00042;Add\n|_TE-RAS;3;1626041455786;1626041455818;1626041455805;PHX00089;Add\n|_TE-MNPIN;3;1626041455786;1626041455822;1626041455805;PHX30009;Add\n|_TE-INTWAPBIZ;3;1626041455786;1626041455855;1626041455805;PHX30014;Add\n|_TE-MMS;3;1626041455786;1626041455856;1626041455805;PHX30017;Add\n|_PC-PNTF;3;1626041455786;1626041455857;1626041455805;PHX70087;Add\n|_PC-OPZ;3;1626041455786;1626041455858;1626041455805;PHX70089;Add\n|_PC-OPZ;3;1626041455786;1626041455859;1626041455805;PHX70090;Add\n|_TE-SES;3;1626041455786;1626041455860;1626041455805;PHX80093;Add\n|_TE-LTE;3;1626041455786;1626042303770;1626041455805;PHX50805;Add\n|_TE-5GPRE;3;1626041455786;1626042318643;1626041455805;PHX70278;Add\n|_PC-OPZ;4;1626041455786;1626041455861;1626041455860;PHX80101;Add\nPRD-WLESSPREPAG;1;1626041455862;1626041455862;1626041455862;PHX00032;Add\n|_TC-ACCPREPMOB;2;1626041455862;1626041455864;1626041455862;PHX00033;Add\n|_TC-SRVPREPMOB;2;1626041455862;1626041455881;1626041455862;PHX00034;Add\n|_TE-SROMINT;3;1626041455862;1626041455888;1626041455881;PHX00039;Add\n|_TE-SCHMINT;3;1626041455862;1626041455889;1626041455881;PHX00040;Add\n|_TE-SSGRTEL;3;1626041455862;1626041455890;1626041455881;PHX00041;Add\n|_TE-SSMSORG;3;1626041455862;1626041455893;1626041455881;PHX00042;Add\n|_TE-RAS;3;1626041455862;1626041455894;1626041455881;PHX00089;Add\n|_TE-MNPIN;3;1626041455862;1626041455898;1626041455881;PHX30009;Add\n|_TE-INTWAPBIZ;3;1626041455862;1626041455931;1626041455881;PHX30014;Add\n|_TE-MMS;3;1626041455862;1626041455932;1626041455881;PHX30017;Add\n|_PC-PNTF;3;1626041455862;1626041455933;1626041455881;PHX70087;Add\n|_PC-OPZ;3;1626041455862;1626041455934;1626041455881;PHX70089;Add\n|_PC-OPZ;3;1626041455862;1626041455935;1626041455881;PHX70090;Add\n|_TE-SES;3;1626041455862;1626041455936;1626041455881;PHX80093;Add\n|_TE-LTE;3;1626041455862;1626042303909;1626041455881;PHX50805;Add\n|_TE-5GPRE;3;1626041455862;1626042318732;1626041455881;PHX70278;Add\n|_PC-OPZ;4;1626041455862;1626041455937;1626041455936;PHX80101;Add\nPRD-WLESSPREPAG;1;1626041455938;1626041455938;1626041455938;PHX00032;Add\n|_TC-ACCPREPMOB;2;1626041455938;1626041455940;1626041455938;PHX00033;Add\n|_TC-SRVPREPMOB;2;1626041455938;1626041455957;1626041455938;PHX00034;Add\n|_TE-SROMINT;3;1626041455938;1626041455964;1626041455957;PHX00039;Add\n|_TE-SCHMINT;3;1626041455938;1626041455965;1626041455957;PHX00040;Add\n|_TE-SSGRTEL;3;1626041455938;1626041455966;1626041455957;PHX00041;Add\n|_TE-SSMSORG;3;1626041455938;1626041455969;1626041455957;PHX00042;Add\n|_TE-RAS;3;1626041455938;1626041455970;1626041455957;PHX00089;Add\n|_TE-MNPIN;3;1626041455938;1626041455974;1626041455957;PHX30009;Add\n|_TE-INTWAPBIZ;3;1626041455938;1626041456007;1626041455957;PHX30014;Add\n|_TE-MMS;3;1626041455938;1626041456008;1626041455957;PHX30017;Add\n|_PC-PNTF;3;1626041455938;1626041456009;1626041455957;PHX70087;Add\n|_PC-OPZ;3;1626041455938;1626041456010;1626041455957;PHX70089;Add\n|_PC-OPZ;3;1626041455938;1626041456011;1626041455957;PHX70090;Add\n|_TE-SES;3;1626041455938;1626041456012;1626041455957;PHX80093;Add\n|_TE-LTE;3;1626041455938;1626042303988;1626041455957;PHX50805;Add\n|_TE-5GPRE;3;1626041455938;1626042318861;1626041455957;PHX70278;Add\n|_PC-OPZ;4;1626041455938;1626041456013;1626041456012;PHX80101;Add\nPRD-WLESSPREPAG;1;1626041456014;1626041456014;1626041456014;PHX00032;Add\n|_TC-ACCPREPMOB;2;1626041456014;1626041456016;1626041456014;PHX00033;Add\n|_TC-SRVPREPMOB;2;1626041456014;1626041456033;1626041456014;PHX00034;Add\n|_TE-SROMINT;3;1626041456014;1626041456040;1626041456033;PHX00039;Add\n|_TE-SCHMINT;3;1626041456014;1626041456041;1626041456033;PHX00040;Add\n|_TE-SSGRTEL;3;1626041456014;1626041456042;1626041456033;PHX00041;Add\n|_TE-SSMSORG;3;1626041456014;1626041456045;1626041456033;PHX00042;Add\n|_TE-RAS;3;1626041456014;1626041456046;1626041456033;PHX00089;Add\n|_TE-MNPIN;3;1626041456014;1626041456050;1626041456033;PHX30009;Add\n|_TE-INTWAPBIZ;3;1626041456014;1626041456083;1626041456033;PHX30014;Add\n|_TE-MMS;3;1626041456014;1626041456084;1626041456033;PHX30017;Add\n|_PC-PNTF;3;1626041456014;1626041456085;1626041456033;PHX70087;Add\n|_PC-OPZ;3;1626041456014;1626041456086;1626041456033;PHX70089;Add\n|_PC-OPZ;3;1626041456014;1626041456087;1626041456033;PHX70090;Add\n|_PC-OPZ;3;1626041456014;1626041456088;1626041456033;PHX70098;Add\n|_TE-SES;3;1626041456014;1626041456089;1626041456033;PHX80093;Add\n|_TE-LTE;3;1626041456014;1626042304097;1626041456033;PHX50805;Add\n|_TE-5GPRE;3;1626041456014;1626042318870;1626041456033;PHX70278;Add\n|_PC-OPZ;4;1626041456014;1626041456090;1626041456089;PHX80101;Add\nPRD-WLESSPREPAG;1;1626041456091;1626041456091;1626041456091;PHX00032;Add\n|_TC-ACCPREPMOB;2;1626041456091;1626041456093;1626041456091;PHX00033;Add\n|_TC-SRVPREPMOB;2;1626041456091;1626041456110;1626041456091;PHX00034;Add\n|_TE-SROMINT;3;1626041456091;1626041456117;1626041456110;PHX00039;Add\n|_TE-SCHMINT;3;1626041456091;1626041456118;1626041456110;PHX00040;Add\n|_TE-SSGRTEL;3;1626041456091;1626041456119;1626041456110;PHX00041;Add\n|_TE-SSMSORG;3;1626041456091;1626041456122;1626041456110;PHX00042;Add\n|_TE-RAS;3;1626041456091;1626041456123;1626041456110;PHX00089;Add\n|_TE-MNPIN;3;1626041456091;1626041456127;1626041456110;PHX30009;Add\n|_TE-INTWAPBIZ;3;1626041456091;1626041456160;1626041456110;PHX30014;Add\n|_TE-MMS;3;1626041456091;1626041456161;1626041456110;PHX30017;Add\n|_PC-PNTF;3;1626041456091;1626041456162;1626041456110;PHX70087;Add\n|_PC-OPZ;3;1626041456091;1626041456163;1626041456110;PHX70089;Add\n|_PC-OPZ;3;1626041456091;1626041456164;1626041456110;PHX70090;Add\n|_PC-OPZ;3;1626041456091;1626041456165;1626041456110;PHX70098;Add\n|_TE-SES;3;1626041456091;1626041456166;1626041456110;PHX80093;Add\n|_TE-LTE;3;1626041456091;1626042304166;1626041456110;PHX50805;Add\n|_TE-5GPRE;3;1626041456091;1626042318959;1626041456110;PHX70278;Add\n|_PC-OPZ;4;1626041456091;1626041456167;1626041456166;PHX80101;Add\nPRD-WLESS;1;1626041456168;1626041456168;1626041456168;PHX00001;Add\n|_TC-ACCM;2;1626041456168;1626041456173;1626041456168;PHX20001;Add\n|_TC-VDAT;2;1626041456168;1626041456192;1626041456168;PHX20007;Add\n|_TE-ESM;3;1626041456168;1626041456218;1626041456192;PHX80094;Add\n|_TE-SMSD;3;1626041456168;1626041456220;1626041456192;PHX10642;Add\n|_TE-INTWAPBIZ;3;1626041456168;1626041456221;1626041456192;PHX30014;Add\n|_TE-MMS;3;1626041456168;1626041456222;1626041456192;PHX30017;Add\n|_TE-SMS;3;1626041456168;1626041456223;1626041456192;PHX30033;Add\n|_PC-PNTF;3;1626041456168;1626041456225;1626041456192;PHX70101;Add\n|_PC-DIS;3;1626041456168;1626041456226;1626041456192;PHX70105;Add\n|_TE-SGU;3;1626041456168;1626041456227;1626041456192;PHX70262;Add\n|_TE-LTE;3;1626041456168;1626042304285;1626041456192;PHX50805;Add\n|_TE-5GPOST;3;1626041456168;1626042319088;1626041456192;PHX70279;Add\n|_PC-OPZ;4;1626041456168;1626041456219;1626041456218;PHX80100;Add"
      },
      {
        "id": "10.7",
        "nomeParagrafo": "PAR 9.7 - Parsing ordine CRM json in forma gerarchica su COM\n            entrando per action_id EMF siebel (ottimizzata) (DIN1717432776047)",
        "codicePlSql": "WITH RECURSIVE product_recursive AS \n\t\t\t\t(\n\t\t\t\t  SELECT json_array_elements(message_xml::json->'payload'->'productOrderItem') AS product_item\n\t\t\t\t  FROM \n\t\t\t\t  (select b.message_xml from action a,action_msg b where a.message_id=b.id and a.id=620154930838)--EMF INBOUND ESB\n\t\t\t\t  your_table_name\n\t\t\t\t  UNION ALL\n\t\t\t\t  SELECT json_array_elements(product_item->'productOrderItem')\n\t\t\t\t  FROM product_recursive\n\t\t\t\t  WHERE product_item->'productOrderItem' IS NOT NULL\n\t\t\t\t),\n\t\t\t\tsecond_recursive as \n\t\t\t\t( -- estrae il prodotto \n\t\t\t\t\t\tSELECT \n\t\t\t\t\t\tproduct_item->>'componentRoot' as componentRoot\n\t\t\t\t\t\t,product_item->>'integrationId' as integrationId\n\t\t\t\t\t\t,product_item->>'componentPadre' as componentPadre\n\t\t\t\t\t\t,product_item->>'codicePs'as codicePs\n\t\t\t\t\t\t,product_item->>'action'as action_\n\t\t\t\t\t\t,product_item->>'sottotipo'as sottotipo\n\t\t\t\t\t\t,product_item->>'tipo'as tipo\n\t\t\t\t\t\t,1 as level\n\t\t\t\t\t\tFROM product_recursive h\n\t\t\t\t\t\tWHERE product_item->'product' IS NOT null and\n\t\t\t\t\t    product_item->>'componentPadre' = product_item->>'componentRoot' and \n\t\t\t\t\t    product_item->>'componentPadre'=product_item->>'integrationId'\n\t\t\t\tunion all\n\t\t\t\t-- estrae i figli del prodotto \n\t\t\t\t\t    SELECT \n\t\t\t\t\t\tproduct_item->>'componentRoot' as componentRoot\n\t\t\t\t\t\t,product_item->>'integrationId' as integrationId\n\t\t\t\t\t\t,product_item->>'componentPadre' as componentPadre\n\t\t\t\t\t\t,product_item->>'codicePs'as codicePs\n\t\t\t\t\t\t,product_item->>'action'as action_\n\t\t\t\t\t\t,product_item->>'sottotipo'as sottotipo\n\t\t\t\t\t\t,product_item->>'tipo'as tipo\n\t\t\t\t\t\t,z.level+1\n\t\t\t\t\t\tFROM product_recursive t,second_recursive z -- per creare il livello devo mettere in join la tabella stessa del CTE\n\t\t\t\t\t\tWHERE t.product_item->'product' IS NOT null and t.product_item->>'tipo' <>'PRD'\n\t\t\t\t\t\tand  t.product_item->>'componentPadre'=z.integrationid -- relazione padre figlio\n\t\t\t\t\t)\nselect\ncase level \nwhen 1 then tipo||'-'|| sottotipo\nwhen 2 then '  |_'||tipo||'-'|| sottotipo\nwhen 3 then '     |_'||tipo||'-'|| sottotipo \nwhen 4 then '        |_'||tipo||'-'|| sottotipo\nwhen 5 then '           |_'||tipo||'-'|| sottotipo\nwhen 6 then '              |_'||tipo||'-'|| sottotipo\nelse lpad('', level - 1, '    ')|| sottotipo\nend as sottotipo_dec,\nlevel,\n    componentroot,\n    integrationid,\n    componentpadre,\n    codiceps,\n    action_\nFROM\n  second_recursive \n  order by componentPadre,integrationId",
        "outPutSql": "sottotipo_dec;level;componentroot;integrationid;componentpadre;codiceps;action_\nPRD-WLESSPREPAG;1;1626041455634;1626041455634;1626041455634;PHX00032;Add\n|_TC-ACCPREPMOB;2;1626041455634;1626041455636;1626041455634;PHX00033;Add\n|_TC-SRVPREPMOB;2;1626041455634;1626041455653;1626041455634;PHX00034;Add\n|_TE-SROMINT;3;1626041455634;1626041455660;1626041455653;PHX00039;Add\n|_TE-SCHMINT;3;1626041455634;1626041455661;1626041455653;PHX00040;Add\n|_TE-SSGRTEL;3;1626041455634;1626041455662;1626041455653;PHX00041;Add\n|_TE-SSMSORG;3;1626041455634;1626041455665;1626041455653;PHX00042;Add\n|_TE-RAS;3;1626041455634;1626041455666;1626041455653;PHX00089;Add\n|_TE-MNPIN;3;1626041455634;1626041455670;1626041455653;PHX30009;Add\n|_TE-INTWAPBIZ;3;1626041455634;1626041455703;1626041455653;PHX30014;Add"
      },
      {
        "id": "10.8",
        "nomeParagrafo": "PAR 9.8 - Parsing ordine CRM json in forma gerarchica su COM\n            entrando per id_ordine EMF siebel (DIN1717432901025)",
        "codicePlSql": "WITH RECURSIVE first_recursive AS \n\t\t\t\t-- ESTRAE L'EMF ESB (ORDINE SIEBEL)\n  \t\t\t\t(  \n\t\t\t\t--select b.message_xml from action a,action_msg b where a.message_id=b.id and a.id=620153351594 --action \n  \t\t\t\tselect b.message_xml,a.* from action a,action_msg b,request c,detail d \n\t\t\t\twhere \n\t\t\t\ta.message_id=b.id and \n\t\t\t\td.value='1-626039052881' and \n\t\t\t\td.name='id_odl_crm' and \n\t\t\t\td.root_id=c.id and \n\t\t\t\tc.id=a.request_id and \n\t\t\t\ta.system='crm' and \n\t\t\t\ta.direction='inbound'and \n\t\t\t\tb.message_xml like '{%1-626039052881%'\n\t\t\t\t),\n\t\t\t\t-- ESTRAE I LINEITEM SIEBEL (PRODUCTORDERITEM)\n\t\t\t\tproduct_recursive as  \n\t\t\t\t(\n\t\t\t\t\t  SELECT --estrae la prima istanza del productOrderItem\n\t\t\t\t\t  \tjson_array_elements(first_recursive.message_xml::json->'payload'->'productOrderItem') AS product_item\n\t\t\t\t\t  FROM first_recursive\n\t\t\t\t  UNION ALL\n\t\t\t\t\t  select  --estrae in maniera ricorsiva tutte le strutture productOrderItem non vuote\n\t\t\t\t\t  \tjson_array_elements(product_item->'productOrderItem')\n\t\t\t\t\t  FROM product_recursive\t\t\t\t  \n\t\t\t\t\t  WHERE product_item->'productOrderItem' IS NOT NULL\n\t\t\t\t),\n\t\t\t\tsecond_recursive as \n\t\t\t\t( \n\t\t\t\t-- estrae il prodotto a partire dalla tabella product_recursive che contiene tutti i productOrderItem (lineitem siebel)\n\t\t\t\t\t\tSELECT \n\t\t\t\t\t\tproduct_item->>'componentRoot' as componentRoot\n\t\t\t\t\t\t,product_item->>'integrationId' as integrationId\n\t\t\t\t\t\t,product_item->>'componentPadre' as componentPadre\n\t\t\t\t\t\t,product_item->>'codicePs'as codicePs\n\t\t\t\t\t\t,product_item->>'action'as action_\n\t\t\t\t\t\t,product_item->>'sottotipo'as sottotipo\n\t\t\t\t\t\t,product_item->>'tipo'as tipo\n\t\t\t\t\t\t,product_item->>'idPrice'as idPrice\n\t\t\t\t\t\t,product_item->>'mdf'as mdf\n\t\t\t\t\t\t,1 as level\n\t\t\t\t\t\tFROM product_recursive h\n\t\t\t\t\t\tWHERE product_item->'product' IS NOT null and\n\t\t\t\t\t    product_item->>'componentPadre' = product_item->>'componentRoot' and \n\t\t\t\t\t    product_item->>'componentPadre'=product_item->>'integrationId'\n\t\t\t\tunion all\n\t\t\t\t-- estrae i figli del prodotto \n\t\t\t\t\t    SELECT \n\t\t\t\t\t\tproduct_item->>'componentRoot' as componentRoot\n\t\t\t\t\t\t,product_item->>'integrationId' as integrationId\n\t\t\t\t\t\t,product_item->>'componentPadre' as componentPadre\n\t\t\t\t\t\t,product_item->>'codicePs'as codicePs\n\t\t\t\t\t\t,product_item->>'action'as action_\n\t\t\t\t\t\t,product_item->>'sottotipo'as sottotipo\n\t\t\t\t\t\t,product_item->>'tipo'as tipo\n\t\t\t\t\t\t,product_item->>'idPrice'as idPrice\n\t\t\t\t\t\t,product_item->>'mdf'as mdf\n\t\t\t\t\t\t,z.level+1\n\t\t\t\t\t\tFROM product_recursive t,\n\t\t\t\t\t\tsecond_recursive z -- per creare il livello devo mettere in join la tabella stessa del CTE\n\t\t\t\t\t\tWHERE t.product_item->'product' IS NOT null \n\t\t\t\t\t\tand t.product_item->>'tipo' <>'PRD'\n\t\t\t\t\t\tand  t.product_item->>'componentPadre'=z.integrationid -- relazione padre figlio\n\t\t\t\t\t)\nSELECT -- FORMATTA L'OUTPUT\n    CASE \n        WHEN level = 1 THEN tipo||'-'|| sottotipo\n        ELSE lpad('', level, '    ') || '|_' || tipo || '-' || sottotipo\n    END AS sottotipo_dec,\n    level,\n    componentroot,\n    idPrice,mdf,\n    integrationid,\n    componentpadre,\n    codiceps,\n    action_\nFROM\n  second_recursive \n  order by componentPadre,integrationId",
        "outPutSql": "sottotipo_dec;level;componentroot;integrationid;componentpadre;codiceps;action_\nPRD-WLESSPREPAG;1;1626041455634;1626041455634;1626041455634;PHX00032;Add\n|_TC-ACCPREPMOB;2;1626041455634;1626041455636;1626041455634;PHX00033;Add\n|_TC-SRVPREPMOB;2;1626041455634;1626041455653;1626041455634;PHX00034;Add\n|_TE-SROMINT;3;1626041455634;1626041455660;1626041455653;PHX00039;Add\n|_TE-SCHMINT;3;1626041455634;1626041455661;1626041455653;PHX00040;Add\n|_TE-SSGRTEL;3;1626041455634;1626041455662;1626041455653;PHX00041;Add\n|_TE-SSMSORG;3;1626041455634;1626041455665;1626041455653;PHX00042;Add\n|_TE-RAS;3;1626041455634;1626041455666;1626041455653;PHX00089;Add\n|_TE-MNPIN;3;1626041455634;1626041455670;1626041455653;PHX30009;Add\n|_TE-INTWAPBIZ;3;1626041455634;1626041455703;1626041455653;PHX30014;Add"
      },
      {
        "id": "10.9",
        "nomeParagrafo": "PAR 9.9 - Estrazione dettaglio ordini per ordini sospensione CRM\n            (DIN1717487792380)",
        "codicePlSql": "select * from (\nWITH RECURSIVE product_recursive AS (\nSELECT\njson_array_elements(message_xml::json->'payload'->'productOrderItem') AS product_item,\nmessage_xml as msg,\nreqIdRoot\nFROM\n-- (select b.message_xml from action a,action_msg b where a.message_id=b.id and a.id=620155183956) -- 1-617808480689\n( select b.message_xml,a.request_id reqIdRoot from action a,action_msg b where a.message_id=b.id and a.name='Receive Sim/Handset Change'\nand a.ts_created>current_date-80\nand b.message_xml like '%\"flagSospensione\":\"1%' )\nyour_table_name\nUNION ALL\nSELECT json_array_elements(product_item->'productOrderItem'),msg as msg,reqIdRoot\nFROM product_recursive\nWHERE product_item->'productOrderItem' IS NOT NULL\n)\nSELECT\nreqIdRoot,b.ts_created,\nb.id,\nmsg::json->'payload'->'externalId',\nmsg::json->'payload'->'flagSospensione',\nmsg::json->'payload'->'causaleOrdine',\nmsg::json->'payload'->'tipo',\nmsg::json->'payload'->'sottotipo',\nmsg::json->'request_root_name'\nFROM product_recursive a,request b\nWHERE product_item->'product' IS NOT null\nand root_id=reqIdRoot\nand b.name='Network'\n) your_table_name",
        "outPutSql": "reqidroot;ts_created;id;?column?;?column?;?column?;?column?;?column?;?column?\n712.436;2024-05-30 12:30:17.015 +0200;719.715;\"1-626348371642\";\"1\";\"Furto\";\"Modifica\";\"Cambio SIM/Terminale\";\"Sim/Handset Change\"\n609.122;2024-04-04 23:26:51.674 +0200;611.386;\"1-621379130297\";\"1\";\"Smarrimento\";\"Modifica\";\"Cambio SIM/Terminale\";\"Sim/Handset Change\"\n617.831;2024-04-12 11:48:24.803 +0200;617.832;\"1-622219974841\";\"1\";\"Smarrimento\";\"Modifica\";\"Cambio SIM/Terminale\";\"Sim/Handset Change\"\n617.062;2024-04-16 23:30:26.628 +0200;621.764;\"1-622138726687\";\"1\";\"Furto\";\"Modifica\";\"Cambio SIM/Terminale\";\"Sim/Handset Change\"\n641.148;2024-04-26 09:49:09.768 +0200;641.150;\"1-623281149439\";\"1\";\"Smarrimento\";\"Modifica\";\"Cambio SIM/Terminale\";\"Sim/Handset Change\"\n625.229;2024-04-23 01:30:24.490 +0200;632.778;\"1-622727598457\";\"1\";\"Smarrimento\";\"Modifica\";\"Cambio SIM/Terminale\";\"Sim/Handset Change\"\n641.368;2024-04-30 23:20:34.720 +0200;648.820;\"1-623413943423\";\"1\";\"Furto\";\"Modifica\";\"Cambio SIM/Terminale\";\"Sim/Handset Change\"\n654.648;2024-05-05 19:59:05.138 +0200;654.649;\"1-624111963267\";\"1\";\"Smarrimento\";\"Modifica\";\"Cambio SIM/Terminale\";\"Sim/Handset Change\"\n688.179;2024-05-23 22:30:54.262 +0200;701.297;\"1-625645759767\";\"1\";\"Smarrimento\";\"Modifica\";\"Cambio SIM/Terminale\";\"Sim/Handset Change\"\n653.918;2024-05-03 16:56:28.592 +0200;653.920;\"1-623977080039\";\"1\";\"Furto\";\"Modifica\";\"Cambio SIM/Terminale\";\"Sim/Handset Change\""
      },
      {
        "id": "10.10",
        "nomeParagrafo": "PAR 9.10 - Estrazione dettagli esito MOG verso CRM\n            (DIN1717674484075)",
        "codicePlSql": "select a.name\n,myTab.esito ||'-'||myTab.causale||'-'||a.id esito_tranId\n,myTab.sottotipo\n,myTab.codice\n,myTab.descrizione\n,myTab.causale\n,myTab.note\n,myTab.orderItemId\n,a.\"handler\" \n,d.root_id\n,d.ts_created \n,(select distinct value from detail where root_id=d.root_id and name='id_odl_crm')idordine\nfrom action_msg b \n,action a,request d,\nxmltable(\n\tXMLNAMESPACES(\t\n\t\t\t\t\t'http://www.siebel.com/xml/BSS%20Gestione%20Esiti%20Order%20INT%20IO' AS \"xsdLocal3\"\n\t\t\t\t\t),\n\t--'/xsdLocal3:GestioneEsiti/xsdLocal3:OrderEntry-Order/xsdLocal3:OrderEntry-LineItems'\n\t\t\t\t\t'/xsdLocal3:GestioneEsiti/xsdLocal3:OrderEntry-Order/descendant::xsdLocal3:OrderEntry-LineItems'\n\tpassing (b.message_xml::xml)\n\tcolumns \n\t\tSottotipo  text path 'xsdLocal3:Sottotipo'\n\t\t,codice text path 'xsdLocal3:esitoItems/xsdLocal3:codice'\n\t\t,descrizione text path 'xsdLocal3:esitoItems/xsdLocal3:descrizione'\n\t\t,esito text path 'xsdLocal3:esitoItems/xsdLocal3:esito'\n\t\t,causale text path 'xsdLocal3:esitoItems/xsdLocal3:causale'\n\t\t,note text path 'xsdLocal3:esitoItems/xsdLocal3:note'\n\t\t,orderItemId text path 'xsdLocal3:OrderItemId'\n\t) myTab\nwhere a.message_id=b.id \n--and a.id=620153596705 \nand b.message_xml  like '%xsdLocal3:GestioneEsiti%'\n--and d.root_id in (SELECT root_id FROM detail WHERE value in ('1-620131773173','1-618218683689'))\n--and a.id in (620153830538,620153796141)\n -- in (select distinct root_id from detail where value='1-619821002400')\nand a.request_id=d.id\nAND a.status ='SA'\nAND a.name='Send MNP Result KO to CRM' --esito ko mog\nand a.\"system\" ='crm'\nand a.name  not in ('Notify Waiting IFX','Send start CVP to CRM','Send Welcome Call','Notify Start SOM to CRM','Notify Order')\nand a.direction='outbound' --LIMIT 30\nand d.ts_created  > current_date-50\nand myTab.sottotipo='SRVPREPMOB'\nand myTab.causale is null",
        "outPutSql": "name;esito_tranid;sottotipo;codice;descrizione;causale;note;orderitemid;handler\nSend MNP Result KO to CRM;Definitivo-30-620153619125;MNPIN;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36EECQ;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153619125;SRVPREPMOB;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36EEC9;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153619125;ACCPREPMOB;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36EEBS;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153619125;WLESSPREPAG;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36EEBQ;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;;MNPIN;MOG_CN_KO;Esito richiesta MNP;;;1-7WVVGDLI;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;;SRVPREPMOB;MOG_CN_KO;Esito richiesta MNP;;;1-7WVVGDFK;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;;ACCPREPMOB;MOG_CN_KO;Esito richiesta MNP;;;1-7WVVGDG6;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;;WLESSPREPAG;MOG_CN_KO;Esito richiesta MNP;;;1-7WVVGDFI;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;;MNPIN;MOG_CN_KO;Esito richiesta MNP;;;1-7WVVGDKL;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;;SRVPREPMOB;MOG_CN_KO;Esito richiesta MNP;;;1-7WVVGDDJ;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;;ACCPREPMOB;MOG_CN_KO;Esito richiesta MNP;;;1-7WVVGDE4;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;;WLESSPREPAG;MOG_CN_KO;Esito richiesta MNP;;;1-7WVVGDDH;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153618006;MNPIN;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36DTNQ;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153618006;SRVPREPMOB;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36DTN9;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153618006;ACCPREPMOB;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36DTMS;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153618006;WLESSPREPAG;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36DTMQ;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153619092;MNPIN;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36EEET;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153619092;SRVPREPMOB;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36EEEC;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153619092;ACCPREPMOB;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36EEDV;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153619092;WLESSPREPAG;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36EEDT;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153618061;MNPIN;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36EEGW;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153618061;SRVPREPMOB;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36EEGF;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153618061;ACCPREPMOB;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36EEFY;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153618061;WLESSPREPAG;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36EEFW;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;;MNPIN;MOG_CN_KO;Esito richiesta MNP;;;1-7WVX56NZ;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;;SRVPREPMOB;MOG_CN_KO;Esito richiesta MNP;;;1-7WVVGDI1;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;;ACCPREPMOB;MOG_CN_KO;Esito richiesta MNP;;;1-7WVVGDHK;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;;WLESSPREPAG;MOG_CN_KO;Esito richiesta MNP;;;1-7WVVGDHI;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153618296;MNPIN;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36E7D2;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153618296;SRVPREPMOB;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36E7CL;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153618296;ACCPREPMOB;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36E7C4;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153618296;WLESSPREPAG;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36E7C2;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153618502;MNPIN;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36E7Y6;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153618502;SRVPREPMOB;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36E7XP;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153618502;ACCPREPMOB;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36E7X8;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153618502;WLESSPREPAG;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36E7X6;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153619047;MNPIN;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36EV01;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153619047;SRVPREPMOB;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36EUZK;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153619047;ACCPREPMOB;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36EUZ3;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153619047;WLESSPREPAG;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36EUZ1;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;;MNPIN;MOG_CN_KO;Esito richiesta MNP;;;1-7WVX56OW;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;;SRVPREPMOB;MOG_CN_KO;Esito richiesta MNP;;;1-7WVVGDJJ;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;;ACCPREPMOB;MOG_CN_KO;Esito richiesta MNP;;;1-7WVVGDK4;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;;WLESSPREPAG;MOG_CN_KO;Esito richiesta MNP;;;1-7WVVGDJH;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153618969;MNPIN;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36E7F6;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153618969;SRVPREPMOB;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36E7EP;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153618969;ACCPREPMOB;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36E7E8;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153618969;WLESSPREPAG;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36E7E6;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153619014;MNPIN;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36DTYA;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153619014;SRVPREPMOB;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36DTXT;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153619014;ACCPREPMOB;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36DTXC;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm\nSend MNP Result KO to CRM;Definitivo-30-620153619014;WLESSPREPAG;MOG_CN_KO;Esito richiesta MNP;30;30;1-7W36DTXA;com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm"
      },
      {
        "id": "10.11",
        "nomeParagrafo": "PAR 9.11 - Parsing ordine CRM json in forma gerarchica su COM\n            entrando per action_id EMF siebel (ver2) (DIN1719836766060)",
        "codicePlSql": "WITH RECURSIVE hierarchy AS (\n--QUESTA QUERY DEFINISCE IL LEGAME TRA PADRE E FIGLIO DEI productOrderItem ED ESTRAE PADRE\n---------------------------------------------------------------------------------------  \nSELECT\n    componentroot,\n    integrationid,\n    componentpadre,\n    mdf,\n    serviceId,\n    idPrice,\n    pricebookId,\n    codiceps,\n    action_,\n    sottotipo,\n    tipo,\n    id_ordine,\n    causale_ordine,\n    tipo_ordine,\n    sottotipo_ordine,\n    transactionIdAsset,\n        1 AS level\n  FROM\n  (\n  \t\t\t\t--QUESTA QUERY ESTRARE TUTTI I productOrderItem ANNIDATI NEL JSON DELL'ORDINE\n\t\t\t\t---------------------------------------------------------------------------------------\n\t\t\t\tWITH RECURSIVE product_recursive AS \n\t\t\t\t(\n\t\t\t\t  SELECT json_array_elements(message_xml::json->'payload'->'productOrderItem') AS product_item,\n\t\t\t\t  \t\t\t\t  message_xml::json->'payload'->'idMasterCommercialOrder' as id_ordine,\n  \t\t\t\t  message_xml::json->'payload'->'causaleOrdine' as causale_ordine,\n  \t\t\t\t  message_xml::json->'payload'->'tipo' as tipo_ordine,\n  \t\t\t\t  message_xml::json->'payload'->'sottotipo' as sottotipo_ordine\n\t\t\t\t  FROM \n\t\t\t\t  (select b.message_xml from action a,action_msg b where a.message_id=b.id and a.id=620155595417)--EMF INBOUND ESB\n\t\t\t\t  your_table_name\n\t\t\t\t  UNION ALL\n\t\t\t\t  SELECT json_array_elements(product_item->'productOrderItem'),id_ordine,causale_ordine,tipo_ordine,sottotipo_ordine\n\t\t\t\t  FROM product_recursive\n\t\t\t\t  WHERE product_item->'productOrderItem' IS NOT NULL\n\t\t\t\t)\n\t\t\t\tSELECT \n\t\t\t\tid_ordine,causale_ordine,tipo_ordine,sottotipo_ordine,\n\t\t\t\tproduct_item->>'componentRoot' as componentRoot\n\t\t\t\t,product_item->>'integrationId' as integrationId\n\t\t\t\t,product_item->>'componentPadre' as componentPadre\n\t\t\t\t,product_item->>'mdf' as mdf\n\t\t\t\t,product_item->>'serviceId' as serviceId\n\t\t\t\t,product_item->>'idPrice' as idPrice\n\t\t\t\t,product_item->>'pricebookId' as pricebookId\n\t\t\t\t,product_item->>'codicePs'as codicePs\n\t\t\t\t,product_item->>'action'as action_\n\t\t\t\t,product_item->>'sottotipo'as sottotipo\n\t\t\t\t,product_item->>'tipo'as tipo\n\t\t\t\t,product_item->>'transactionIdAsset'as transactionIdAsset\n\t\t\t\tFROM product_recursive\n\t\t\t\tWHERE product_item->'product' IS NOT null\n\t\t\t\t---------------------------------------------------------------------------------------\n  ) your_table_name\n  WHERE\n    componentpadre = componentRoot and componentPadre=integrationId -- definisce il padre da cui poi far partire la ricorsione\n  UNION all\n  --QUESTA QUERY DEFINISCE IL LEGAME TRA PADRE E FIGLIO DEI productOrderItem ED ESTRAE I FIGLI\n  ---------------------------------------------------------------------------------------  \n  SELECT\n    t.componentroot,\n    t.integrationid,\n    t.componentpadre,\n    t.mdf,\n    t.serviceId,    \n    t.idPrice,\n    t.pricebookId,\n    t.codiceps,\n    t.action_,\n    t.sottotipo,\n    t.tipo,\n    t.id_ordine,\n    t.causale_ordine,\n    t.tipo_ordine,\n    t.sottotipo_ordine,   \n    t.transactionIdAsset,\n    h.level + 1\n  FROM\n    (   \t\t--QUESTA QUERY ESTRARE TUTTI I productOrderItem ANNIDATI NEL JSON DELL'ORDINE\n\t\t\t\t---------------------------------------------------------------------------------------\n\t\t\t\tWITH RECURSIVE product_recursive AS \n\t\t\t\t(\n\t\t\t\t  SELECT json_array_elements(message_xml::json->'payload'->'productOrderItem') AS product_item,\n\t\t\t\t  message_xml::json->'payload'->'idMasterCommercialOrder' as id_ordine,\n  \t\t\t\t  message_xml::json->'payload'->'causaleOrdine' as causale_ordine,\n  \t\t\t\t  message_xml::json->'payload'->'tipo' as tipo_ordine,\n  \t\t\t\t  message_xml::json->'payload'->'sottotipo' as sottotipo_ordine\n\t\t\t\t  FROM \n\t\t\t\t  (select b.message_xml from action a,action_msg b where a.message_id=b.id and a.id=620155595417)\n\t\t\t\t  your_table_name\n\t\t\t\t  UNION ALL\n\t\t\t\t  SELECT json_array_elements(product_item->'productOrderItem'),id_ordine,causale_ordine,tipo_ordine,sottotipo_ordine\n\t\t\t\t  FROM product_recursive\n\t\t\t\t  WHERE product_item->'productOrderItem' IS NOT NULL\n\t\t\t\t)\n\t\t\t\tSELECT \n\t\t\t\tid_ordine,causale_ordine,tipo_ordine,sottotipo_ordine\n\t\t\t\t,product_item->>'componentRoot' as componentRoot\n\t\t\t\t,product_item->>'integrationId' as integrationId\n\t\t\t\t,product_item->>'componentPadre' as componentPadre\n\t\t\t\t,product_item->>'mdf' as mdf\n\t\t\t\t,product_item->>'serviceId' as serviceId\n\t\t\t\t,product_item->>'idPrice' as idPrice\n\t\t\t\t,product_item->>'pricebookId' as pricebookId\n\t\t\t\t,product_item->>'codicePs'as codicePs\n\t\t\t\t,product_item->>'action'as action_\n\t\t\t\t,product_item->>'sottotipo'as sottotipo\n\t\t\t\t,product_item->>'tipo'as tipo\n\t\t\t\t,product_item->>'transactionIdAsset'as transactionIdAsset\n\t\t\t\tFROM product_recursive\n\t\t\t\tWHERE product_item->'product' IS NOT null\n\t)  \n\t\tt,hierarchy h where h.integrationid=t.componentpadre and t.tipo <>'PRD'\n\t)\n---------------------------------------------------------------------------------------  \nselect\ncase level \nwhen 1 then tipo||'-'|| sottotipo\nwhen 2 then '  |_'||tipo||'-'|| sottotipo\nwhen 3 then '     |_'||tipo||'-'|| sottotipo \nwhen 4 then '        |_'||tipo||'-'|| sottotipo\nwhen 5 then '           |_'||tipo||'-'|| sottotipo\nwhen 6 then '              |_'||tipo||'-'|| sottotipo\nelse lpad('', level - 1, '    ')|| sottotipo\nend as sottotipo_dec,\nlevel,\n    componentroot,\n    integrationid,\n    componentpadre,\n    mdf,\n    serviceId,\n    idPrice,\n    pricebookId,\n    codiceps,\n    action_,\n    replace(id_ordine::text,'\"','') id_ordine,\n    replace(causale_ordine::text,'\"','') causale_ordine,\n    replace(tipo_ordine::text,'\"','') tipo_ordine,\n    replace(sottotipo_ordine::text,'\"','') sottotipo_ordine,\n    transactionIdAsset\nFROM\n  hierarchy \n  order by componentPadre,integrationId",
        "outPutSql": "sottotipo_dec;level;componentroot;integrationid;componentpadre;mdf;serviceid;idprice;pricebookid;codiceps;action_;id_ordine;causale_ordine;tipo_ordine;sottotipo_ordine\nPRD-WLESSPREPAG;1;1237123689689;1237123689689;1237123689689;;3890243269;;;PHX00032;Remove;1-626228430464;Cambio Classe;Modifica;Cambio Classe\n|_TC-SRVPREPMOB;2;1237123689689;1237123785147;1237123689689;;3890243269;;;PHX00034;Remove;1-626228430464;Cambio Classe;Modifica;Cambio Classe\n|_TC-ACCPREPMOB;2;1237123689689;1237123785202;1237123689689;;;;;PHX00033;Remove;1-626228430464;Cambio Classe;Modifica;Cambio Classe\n|_PC-PNTF;3;1237123689689;1237123785154;1237123785147;PRENOTAX;;;;PHX00151;Remove;1-626228430464;Cambio Classe;Modifica;Cambio Classe\n|_TE-SSGRTEL;3;1237123689689;1237123785194;1237123785147;;;;;PHX00041;Remove;1-626228430464;Cambio Classe;Modifica;Cambio Classe\n|_TE-MMS;3;1237123689689;1237123785197;1237123785147;;;;;PHX30017;Remove;1-626228430464;Cambio Classe;Modifica;Cambio Classe\n|_TE-SSMSORG;3;1237123689689;1237123785198;1237123785147;;;;;PHX00042;Remove;1-626228430464;Cambio Classe;Modifica;Cambio Classe\n|_TE-INTWAPBIZ;3;1237123689689;1237123785199;1237123785147;;;;;PHX30014;Remove;1-626228430464;Cambio Classe;Modifica;Cambio Classe\n|_TE-SCHMINT;3;1237123689689;1237123785200;1237123785147;;;;;PHX00040;Remove;1-626228430464;Cambio Classe;Modifica;Cambio Classe\n|_TE-SROMINT;3;1237123689689;1237123785201;1237123785147;;;;;PHX00039;Remove;1-626228430464;Cambio Classe;Modifica;Cambio Classe\n|_TE-BARRV;3;1237123689689;1237123785997;1237123785147;;;;;PHX00161;Remove;1-626228430464;Cambio Classe;Modifica;Cambio Classe\n|_TE-GSS;3;1237123689689;1237123785998;1237123785147;;;;;PHX00162;Remove;1-626228430464;Cambio Classe;Modifica;Cambio Classe\n|_TE-LTE;3;1237123689689;1237129562830;1237123785147;;;;;PHX50805;Remove;1-626228430464;Cambio Classe;Modifica;Cambio Classe\n|_PC-OPZ;4;1237123689689;1237123786002;1237123785998;PRENOTAX;;;;PHX00160;Remove;1-626228430464;Cambio Classe;Modifica;Cambio Classe\nPRD-WLESS;1;1626229870231;1626229870231;1626229870231;;3890243269;;3_PB_MP;PHX00001;Add;1-626228430464;Cambio Classe;Modifica;Cambio Classe\n|_TC-ACCM;2;1626229870231;1626229870237;1626229870231;;;;3_PB_MP;PHX20001;Add;1-626228430464;Cambio Classe;Modifica;Cambio Classe\n|_TC-VDAT;2;1626229870231;1626229870263;1626229870231;;3890243269;;3_PB_MP;PHX20007;Add;1-626228430464;Cambio Classe;Modifica;Cambio Classe\n|_TE-MATS;3;1626229870231;1626229870256;1626229870237;;;;3_PB_MP;PHX20003;Add;1-626228430464;Cambio Classe;Modifica;Cambio Classe\n|_TE-ESM;3;1626229870231;1626229870289;1626229870263;;;;3_PB_MP;PHX80094;Add;1-626228430464;Cambio Classe;Modifica;Cambio Classe\n|_TE-INTWAPBIZ;3;1626229870231;1626229870291;1626229870263;;;;3_PB_MP;PHX30014;Add;1-626228430464;Cambio Classe;Modifica;Cambio Classe\n|_TE-SMS;3;1626229870231;1626229870292;1626229870263;;;;3_PB_MP;PHX30033;Add;1-626228430464;Cambio Classe;Modifica;Cambio Classe\n|_PC-PNTF;3;1626229870231;1626229870294;1626229870263;POSTPAGATA;;ID_PRICE_3710;3_PB_MP;PHX70101;Add;1-626228430464;Cambio Classe;Modifica;Cambio Classe\n|_PC-OPZ;3;1626229870231;1626229870295;1626229870263;;;;3_PB_MP;PHX70032;Add;1-626228430464;Cambio Classe;Modifica;Cambio Classe\n|_PC-DIS;3;1626229870231;1626229870297;1626229870263;POSTPAGATA;;ID_PRICE_783;3_PB_MP;PHX70105;Add;1-626228430464;Cambio Classe;Modifica;Cambio Classe\n|_TE-SGU;3;1626229870231;1626229870298;1626229870263;;;;3_PB_MP;PHX70262;Add;1-626228430464;Cambio Classe;Modifica;Cambio Classe\n|_PC-OPZ;4;1626229870231;1626229870290;1626229870289;POSTPAGATA;;ID_PRICE_4674;3_PB_MP;PHX80100;Add;1-626228430464;Cambio Classe;Modifica;Cambio Classe"
      }
    ]
  },
  {
    "id": "11",
    "nomeCapitolo": "CAP 10 - Estrazione dettaglio eventi verso COMBILLING(DIN1717421225849)",
    "paragrafi": [
      {
        "id": "11.1",
        "nomeParagrafo": "PAR 10.1 - Estrae dettaglio dei Billing Element su eventi di\n            attivazione a partire da id_ordine (DIN1717429267359)",
        "codicePlSql": "select a.id,a.name,c.name, \n      b.message_xml::json->'serviceIstance'->'extIdSI' extIdSI,\n      b.message_xml::json->'serviceIstance'->'idCliente' idCliente,\n      b.message_xml::json->'serviceIstance'->'DescLine' DescLine,\n      b.message_xml::json->'serviceIstance'->'CRMsottotipoSI' CRMsottotipoSI,\n      b.message_xml::json->'serviceIstance'->'extIdSI' extIdSI,\n      prdSI::json->'CRMsottotipo' CRMsottotipo,\n      prdSI::json->'dtAttivazione' dtAttivazione,\n      prdSI::json->'dtCessazione' dtCessazione,\n      prdSI::json->'extIdBE' extIdBE,\n      prdSI::json->'idBE' idBe,\n      prdSI::json->'idOrdine' idOrdine,\n      prdSI::json->'idPrice' idPrice,\n      prdSI::json->'mdf' mdf,\n      prdSI::json->'typeOpBE' typeOpBE,\n      prdSI::json->'overrideRC' overrideRC\n      from action  a ,action_msg b ,request c,request d\n,json_array_elements(b.message_xml::json->'serviceIstance'->'billingElement') prdSI\n--,json_array_elements(b.message_xml::json->'actionBillingElement'->'billingElement') prdACTBE\nwhere \n1=1 and\nb.id=a.message_id and\nc.id=a.request_id and \nd.id=c.root_id and \na.status='SA' AND \na.id in (select a.id from action a , request c , detail d\nwhere \na.direction='outbound' and\na.system='billing' and \nc.id=a.request_id and\nd.root_id=c.root_id and \nd.name='id_odl_crm' and \nd.value in ('1-618472067646'))\nand b.message_xml  like '%serviceIstance%'",
        "outPutSql": "id;name;name;extidsi;idcliente;descline;crmsottotiposi;extidsi;crmsottotipo;dtattivazione;dtcessazione;extidbe;idbe;idordine;idprice;mdf;typeopbe;overriderc\n620.153.653.841;Active Service Instance;Logistics;\"1618481264555\";\"565145193\";\"CPE Fonia\";\"TERMOB\";\"1618481264555\";\"TERMOB\";\"2024-02-28T13:14:15+01:00\";\"\";\"1618481264583\";\"PHX61554\";\"1-618472067646\";\"PRICE_MAN_08\";\"POSTPAGATA\";\"ADD\";\"\""
      },
      {
        "id": "11.2",
        "nomeParagrafo": "PAR 10.2 - Estrae dettaglio dei Billing Element su eventi di change\n            be a partire da id_ordine (DIN1717429433200)",
        "codicePlSql": "--change be\n\nselect a.id,a.name,c.name, \n      b.message_xml::json->'actionBillingElement'->'extIdSI' extIdSI,\n      b.message_xml::json->'actionBillingElement'->'idCliente' idCliente,\n      b.message_xml::json->'actionBillingElement'->'DescLine' DescLine,\n      b.message_xml::json->'actionBillingElement'->'CRMsottotipoSI' CRMsottotipoSI,\n      b.message_xml::json->'actionBillingElement'->'extIdSI' extIdSI,\n      prdSI::json->'CRMsottotipo' CRMsottotipo,\n      prdSI::json->'dtAttivazione' dtAttivazione,\n      prdSI::json->'dtCessazione' dtCessazione,\n      prdSI::json->'extIdBE' extIdBE,\n      prdSI::json->'idOrdine' idOrdine,\n      prdSI::json->'idPrice' idPrice,\n      prdSI::json->'mdf' mdf,\n      prdSI::json->'typeOpBE' typeOpBE\n      from action  a ,action_msg b ,request c,request d\n,json_array_elements(b.message_xml::json->'actionBillingElement'->'billingElement') prdSI\nwhere \n1=1 and\nb.id=a.message_id and\nc.id=a.request_id and \nd.id=c.root_id and \na.status='SA' AND \na.id in --('620153328190')\n(select a.id from action a , request c , detail d\nwhere \na.direction='outbound' and\na.system='billing' and \nc.id=a.request_id and\nd.root_id=c.root_id and \nd.name='id_odl_crm' and \nd.value in ('1-618472067646'))\nand b.message_xml  like '%actionBillingElement%'",
        "outPutSql": "id;name;name;extidsi;idcliente;descline;crmsottotiposi;extidsi;crmsottotipo;dtattivazione;dtcessazione;extidbe;idordine;idprice;mdf;typeopbe\n620.153.328.190;Change Billing Element Service Instance;Network;\"1594036147444\";\"609180505\";;;\"1594036147444\";\"OPZ\";\"2023-06-09T11:25:42Z\";\"\";\"1596019572069\";\"1-596001964637\";\"ID_PRICE_26\";\"PRENOTAX\";\"ADD\"\n620.153.328.190;Change Billing Element Service Instance;Network;\"1594036147444\";\"609180505\";;;\"1594036147444\";\"PNTF\";\"2023-06-09T11:25:42Z\";\"\";\"1596019572068\";\"1-596001964637\";\"ID_PRICE_3571\";\"PRENOTAX\";\"ADD\""
      },
      {
        "id": "11.3",
        "nomeParagrafo": "PAR 10.3 - Estrae dettaglio dei Billing Element su eventi di\n            subentro a partire da id_ordine (DIN1717429607738)",
        "codicePlSql": "-- subentro \n\nselect a.id,a.name,c.name, \n      b.message_xml::json->'actionSubentroSI'->'serviceIstance'->0->'extIdSI' extIdSI,\n      b.message_xml::json->'actionSubentroSI'->'serviceIstance'->0->'idCliente' idCliente,\n      b.message_xml::json->'actionSubentroSI'->'serviceIstance'->0->'DescLine' DescLine,\n      b.message_xml::json->'actionSubentroSI'->'serviceIstance'->0->'CRMsottotipoSI' CRMsottotipoSI,\n      b.message_xml::json->'actionSubentroSI'->'serviceIstance'->0->'extIdSI' extIdSI,\n      --b.message_xml::json->'actionSubentroSI'->'serviceIstance'->0->'dataAttivazione' dataAttivazione,\n      --b.message_xml::json->'actionSubentroSI'->'serviceIstance'->0->'dataCessazione' dataCessazione,\n      json_array_elements(prdSI::json->'billingElement')::json->'CRMsottotipo'CRMsottotipo\n      ,json_array_elements(prdSI::json->'billingElement')::json->'dtAttivazione'dtAttivazione\n      ,json_array_elements(prdSI::json->'billingElement')::json->'dtCessazione'dtCessazione\n      ,json_array_elements(prdSI::json->'billingElement')::json->'extIdBE'extIdBE\n      ,json_array_elements(prdSI::json->'billingElement')::json->'idOrdine'idOrdine\n      ,json_array_elements(prdSI::json->'billingElement')::json->'idPrice'idPrice\n      ,json_array_elements(prdSI::json->'billingElement')::json->'mdf'mdf\n      ,json_array_elements(prdSI::json->'billingElement')::json->'typeOpBE'typeOpBE\n      from action  a ,action_msg b ,request c,request d\n,json_array_elements(b.message_xml::json->'actionSubentroSI'->'serviceIstance') prdSI\nwhere \n1=1 and\nb.id=a.message_id and\nc.id=a.request_id and \nd.id=c.root_id and \na.status='SA' AND \na.id in ('620153814160') \n/*(select a.id from action a , request c , detail d\nwhere \na.direction='outbound' and\na.system='billing' and \nc.id=a.request_id and\nd.root_id=c.root_id and \nd.name='id_odl_crm' and \nd.value in ('1-618472067646'))*/\nand b.message_xml  like '%actionSubentroSI%'  --limit 1",
        "outPutSql": "id;name;name;extidsi;idcliente;descline;crmsottotiposi;extidsi;crmsottotipo;dtattivazione;dtcessazione;extidbe;idordine;idprice;mdf;typeopbe\n620.153.814.160;Change-over Service Instance;Change-over;\"1546960952369\";\"619868063\";\"Servizio Mobile Ricaricabile\";\"SRVPREPMOB\";\"1546960952369\";\"OPZ\";\"2024-03-21T09:39:25+01:00\";\"\";\"1595048566206\";\"1-620301946607\";\"ID_PRICE_246\";\"PRENOTAX\";\"ADD\"\n620.153.814.160;Change-over Service Instance;Change-over;\"1546960952369\";\"619868063\";\"Servizio Mobile Ricaricabile\";\"SRVPREPMOB\";\"1546960952369\";\"PNTF\";\"2024-03-21T09:39:25+01:00\";\"\";\"1546960952382\";\"1-620301946607\";\"ID_PRICE_66\";\"PRENOTAX\";\"ADD\"\n620.153.814.160;Change-over Service Instance;Change-over;\"1546960952369\";\"619868063\";\"Servizio Mobile Ricaricabile\";\"SRVPREPMOB\";\"1546960952369\";\"OPZ\";\"2024-03-21T09:39:25+01:00\";\"\";\"1547014512494\";\"1-620301946607\";\"ID_PRICE_119\";\"PRENOTAX\";\"ADD\""
      },
      {
        "id": "11.4",
        "nomeParagrafo": "PAR 10.4 - Estrae dettaglio linea su eventi di attivazione da\n            id_ordine (DIN1717429903512)",
        "codicePlSql": "select * from ( -- attivazione\n      select a.id,a.name,c.name,\n      b.message_xml::json->'serviceIstance'->'extIdSI' extIdSI,\n      b.message_xml::json->'serviceIstance'->'idCliente' idCliente,\n      b.message_xml::json->'serviceIstance'->'DescLine' DescLine,\n      b.message_xml::json->'serviceIstance'->'numeroTelefono' numeroTelefono,\n      b.message_xml::json->'serviceIstance'->'dataAttivazione' dataAttivazione,\n      b.message_xml::json->'serviceIstance'->'dataCessazione' dataCessazione\n      from action  a ,action_msg b ,request c,request d\n--,json_array_elements(b.message_xml::json->'actionBillingElement'->'billingElement') prdACTBE\nwhere \n1=1 and\nb.id=a.message_id and\nc.id=a.request_id and \nd.id=c.root_id and \na.status='SA' AND \na.id in (select a.id from action a , request c , detail d\nwhere \na.direction='outbound' and\na.system='billing' and \nc.id=a.request_id and\nd.root_id=c.root_id and \nd.name='id_odl_crm' and \nd.value = ('1-621322387760'))\nand b.message_xml  like '%serviceIstance%'",
        "outPutSql": "id;name;name;extidsi;idcliente;descline;numerotelefono;dataattivazione;datacessazione\n620.153.938.852;Active Service Instance;Activation Order;\"1621479393975\";\"619985335\";\"Componente generico 1\";\"A21621479393975\";\"2024-04-03T00:00:00+02:00\""
      },
      {
        "id": "11.5",
        "nomeParagrafo": "PAR 10.5 - Estrae dettaglio linea su evento di cessazione a partire\n            da id_ordine (DIN1717430086778)",
        "codicePlSql": "select a.id,a.name,c.name, -- cessazione\n      b.message_xml::json->'serviceIstanceDaCessare'->'extIdSI' extIdSI ,\n      b.message_xml::json->'serviceIstanceDaCessare'->'idCliente' idCliente,\n      b.message_xml::json->'serviceIstanceDaCessare'->'DescLine' DescLine,\n      b.message_xml::json->'serviceIstanceDaCessare'->'numeroTelefono' numeroTelefono,\n      b.message_xml::json->'serviceIstanceDaCessare'->'dataAttivazioneSI' dataAttivazione,\n      b.message_xml::json->'serviceIstanceDaCessare'->'dataCessazione' dataCessazione\n      from action  a ,action_msg b ,request c,request d\nwhere \n1=1 and\nb.id=a.message_id and\nc.id=a.request_id and \nd.id=c.root_id and \na.status='SA' AND \nb.message_xml  like '%serviceIstanceDaCessare%' and\na.id in (\n620153331608,\n-123)\n/*(select a.id from action a , request c , detail d\nwhere \na.direction='outbound' and\na.system='billing' and \nc.id=a.request_id and\nd.root_id=c.root_id and \nd.name='id_odl_crm' and \nd.value = ('1-621322387760'))*/",
        "outPutSql": "id;name;name;extidsi;idcliente;descline;numerotelefono;dataattivazione;datacessazione\n620.153.331.608;Deactivation Service Instance;Network;\"1599612397263\";\"612758701\";;\"A21599612397263\";\"2023-07-17T00:00:00+02:00\";\"2023-07-24T12:00:42+02:00\""
      }
    ]
  },
  {
    "id": "12",
    "nomeCapitolo": "CAP 11 - Estrazione caistiche con CVP(DIN1717431168285)",
    "paragrafi": [
      {
        "id": "12.1",
        "nomeParagrafo": "PAR 11.1 - Estrazione subentri con KO di CVP andati avanti\n            (DIN1717431275021)",
        "codicePlSql": "SELECT c.value ,b.root_id,b.name,a.ts_created  FROM \nACTION a,\nrequest b,detail c\nWHERE b.name='Change-over' AND \na.request_id=b.id AND \na.name in ('Response async CVP KO','Ko Verify MdP')\nAND \n\t(\n\t\tEXISTS (SELECT 1 FROM ACTION z WHERE z.request_id=b.id AND z.SYSTEM='billing') or -- root\n\t\tEXISTS (SELECT 1 FROM ACTION z,request zz  WHERE z.request_id=zz.id and zz.root_id=b.id AND z.SYSTEM='billing')  --network\n\t)\nand c.root_id=b.root_id \nand c.name='id_odl_crm'\norder by ts_created\n--AND b.id in (612764 , 602740)",
        "outPutSql": "value;root_id;name;ts_created\n1-616942296927;589.755;Change-over;2024-03-11 14:29:04.637 +0100\n1-619859097260;594.900;Change-over;2024-03-18 13:16:45.343 +0100\n1-619922670466;594.975;Change-over;2024-03-18 14:12:10.128 +0100\n1-620094596748;595.593;Change-over;2024-03-18 18:15:07.015 +0100\n1-620707152788;602.800;Change-over;2024-03-25 17:32:44.949 +0100\n1-620707152788;602.800;Change-over;2024-03-25 17:34:04.844 +0100\n1-620707152849;602.856;Change-over;2024-03-25 17:42:18.256 +0100\n1-620701347992;602.740;Change-over;2024-03-26 10:21:40.597 +0100\n1-621861098331;612.726;Change-over;2024-04-09 09:46:56.272 +0200\n1-621861098420;612.797;Change-over;2024-04-09 09:47:30.992 +0200\n1-621861098410;612.764;Change-over;2024-04-09 09:47:45.428 +0200\n1-621861098400;612.751;Change-over;2024-04-09 09:47:59.931 +0200\n1-621861098358;612.744;Change-over;2024-04-09 09:48:14.711 +0200"
      },
      {
        "id": "12.2",
        "nomeParagrafo": "PAR 11.2 - Estrazione subentri con KO di CVP bloccati\n            (DIN1717431489004)",
        "codicePlSql": "SELECT c.value ,b.root_id,b.name,a.ts_created   FROM \nACTION a,\nrequest b,detail c\nWHERE b.name='Change-over' AND \na.request_id=b.id AND \na.name='Response async CVP KO'\nAND \n\t(\n\t\tnot EXISTS (SELECT 1 FROM ACTION z WHERE z.request_id=b.id AND z.SYSTEM='billing') and -- root\n\t\tnot EXISTS (SELECT 1 FROM ACTION z,request zz  WHERE z.request_id=zz.id and zz.root_id=b.id AND z.SYSTEM='billing')  \n\t)\nand c.root_id=b.root_id \nand c.name='id_odl_crm' order by ts_created\nlimit 10\n--AND b.id in (612764 , 602740)",
        "outPutSql": "value;root_id;name;ts_created\n1-620115865675;602.871;Change-over;2024-03-27 12:35:26.099 +0100\n1-620737820982;602.991;Change-over;2024-03-27 13:28:02.897 +0100\n1-622443244016;619.696;Change-over;2024-04-15 16:20:30.538 +0200\n1-622443244028;619.698;Change-over;2024-04-15 16:21:24.955 +0200\n1-622443244058;619.704;Change-over;2024-04-15 16:22:22.316 +0200\n1-622443244038;619.700;Change-over;2024-04-15 16:23:16.601 +0200\n1-623501653813;642.732;Change-over;2024-04-27 13:32:40.202 +0200\n1-623514241767;642.800;Change-over;2024-04-27 14:26:10.905 +0200\n1-623739737739;647.702;Change-over;2024-04-30 18:33:11.737 +0200\n1-623753645570;648.164;Change-over;2024-04-30 22:26:02.724 +0200"
      },
      {
        "id": "12.3",
        "nomeParagrafo": "PAR 11.3 - Estrazione esito di CVP (DIN1717431562684)",
        "codicePlSql": "SELECT c.value ,b.root_id,b.name,a.ts_created ,--d.message_xml,\nregexp_match(d.message_xml, '<impl:note>(.*?)</impl:note>')\nFROM \nACTION a,action_msg d,\nrequest b,detail c\nWHERE b.name='Change-over' AND \na.request_id=b.id AND \na.name in ('Response async CVP KO')\nand c.root_id=b.root_id \nand c.name='id_odl_crm'\nand d.id=a.message_id\norder by ts_created",
        "outPutSql": "value;root_id;name;ts_created;regexp_match\n1-619859097260;594.900;Change-over;2024-03-18 13:16:45.343 +0100;{\"CVP: Per la consistenza economico-finanziaria e per\n                  l'attività svolta si richiede pagamento tramite domiciliazione\n                  bancaria o carta di credito (RID/RIA).\"}\n1-619922670466;594.975;Change-over;2024-03-18 14:12:10.128 +0100;{\"CVP: Reiterare ordine dopo il pagamento degli importi\n                  scaduti e non pagati per un totale di euro 97,56 su cc attivo\n                  575749228\"}\n1-620094596748;595.593;Change-over;2024-03-18 18:15:07.015 +0100;{\"CVP: Reiterare ordine allegando modulo di subentro firmato\n                  da i referenti con rispettivi documenti, visura del\n                  subentrante e del subentrato. \"}\n1-620707152788;602.800;Change-over;2024-03-25 17:32:44.949 +0100;{\"CVP: Reiterare ordine dopo il pagamento degli importi\n                  scaduti e non pagati per un totale di euro 62,87 su codice\n                  Cliente 614551286 ATTIVO.\n\"}\n1-620707152849;602.856;Change-over;2024-03-25 17:42:18.256 +0100;{\"CVP: Reiterare ordine dopo il pagamento degli importi\n                  scaduti e non pagati per un totale di euro 97,56 su codice\n                  Cliente attivo 575749228-W\"}\n1-620701347992;602.740;Change-over;2024-03-26 10:21:40.597 +0100;{\"CVP: Per la consistenza economico-finanziaria e per\n                  l'attività svolta si richiede pagamento tramite domiciliazione\n                  bancaria o carta di credito (RID/RIA).Normalizzare cdf:\n                  619863188 attualmente in bollettino postale.\"}\n1-620115865675;602.871;Change-over;2024-03-27 12:35:26.099 +0100;{\"CVP: L'ordine non deve essere reiterato: lazienda risulta in\n                  liquidazione.\"}\n1-620737820982;602.991;Change-over;2024-03-27 13:28:02.897 +0100;{\"CVP: Per la consistenza economico-finanziaria e per\n                  l'attività svolta si richiede pagamento tramite domiciliazione\n                  bancaria o carta di credito (RID/RIA) su CDF 620248437\n                  (attualmente in Bollettino Postale)\"}\n1-621861098331;612.726;Change-over;2024-04-09 09:46:56.272 +0200;{\"CVP: Per la consistenza economico-finanziaria e per\n                  l'attività svolta si richiede pagamento tramite domiciliazione\n                  bancaria o carta di credito (RID/RIA).\"}\n1-621861098420;612.797;Change-over;2024-04-09 09:47:30.992 +0200;{\"CVP: Per la consistenza economico-finanziaria e per\n                  l'attività svolta si richiede pagamento tramite domiciliazione\n                  bancaria o carta di credito (RID/RIA).\"}\n1-621861098410;612.764;Change-over;2024-04-09 09:47:45.428 +0200;{\"CVP: Per la consistenza economico-finanziaria e per\n                  l'attività svolta si richiede pagamento tramite domiciliazione\n                  bancaria o carta di credito (RID/RIA).\"}\n1-621861098400;612.751;Change-over;2024-04-09 09:47:59.931 +0200;{\"CVP: Per la consistenza economico-finanziaria e per\n                  l'attività svolta si richiede pagamento tramite domiciliazione\n                  bancaria o carta di credito (RID/RIA).\"}\n1-621861098358;612.744;Change-over;2024-04-09 09:48:14.711 +0200;{\"CVP: Per la consistenza economico-finanziaria e per\n                  l'attività svolta si richiede pagamento tramite domiciliazione\n                  bancaria o carta di credito (RID/RIA).\"}\n1-622443244016;619.696;Change-over;2024-04-15 16:20:30.538 +0200;{\"CVP: Reiterare ordine dopo il pagamento degli importi\n                  scaduti e non pagati per un totale di euro 1.936,04 cod clt\n                  H3G att 2254901 \"}\n1-622443244028;619.698;Change-over;2024-04-15 16:21:24.955 +0200;{\"CVP: Reiterare ordine dopo il pagamento degli importi\n                  scaduti e non pagati per un totale di euro 1.936,04 cod clt\n                  H3G att 2254901 \"}\n1-622443244058;619.704;Change-over;2024-04-15 16:22:22.316 +0200;{\"CVP: Reiterare ordine dopo il pagamento degli importi\n                  scaduti e non pagati per un totale di euro 1.936,04 cod clt\n                  H3G att 2254901 \"}\n1-622443244038;619.700;Change-over;2024-04-15 16:23:16.601 +0200;{\"CVP: Reiterare ordine dopo il pagamento degli importi\n                  scaduti e non pagati per un totale di euro 1.936,04 cod clt\n                  H3G att 2254901 \"}\n1-623501653813;642.732;Change-over;2024-04-27 13:32:40.202 +0200;{\"CVP: Reiterare ordine con PdC firmata.\"}\n1-623514241767;642.800;Change-over;2024-04-27 14:26:10.905 +0200;{\"CVP: Reiterare ordine dopo il pagamento degli importi\n                  scaduti e non pagati per un totale di euro 246,40 su codice\n                  Cliente attivo cc 534795183 \"}\n1-623739737739;647.702;Change-over;2024-04-30 18:33:11.737 +0200;{\"CVP: Reiterare ordine dopo il pagamento degli importi\n                  scaduti pari a 36,58 su cc W3 503793386 Attivo\n\"}\n1-623753645570;648.164;Change-over;2024-04-30 22:26:02.724 +0200;{\"CVP: Reiterare ordine dopo il pagamento degli importi\n                  scaduti e non pagati per un totale di euro 105,72 relativi al\n                  cc P1131124752-W Attivo\"}\n1-624036014583;654.358;Change-over;2024-05-06 14:07:35.295 +0200;{\"CVP: Reiterare ordine dopo verifica correttezza dati.\"}\n1-624036014581;654.357;Change-over;2024-05-06 14:09:17.470 +0200;{\"CVP: Reiterare ordine dopo verifica correttezza dati.\"}\n1-624180264514;656.989;Change-over;2024-05-07 11:57:23.121 +0200;{\"CVP: Reiterare ordine dopo verifica correttezza dati: p.iva\n                  1557601588457 inserita non corretta. Inserire p.iva corretta\"}\n1-624180264516;656.992;Change-over;2024-05-07 11:59:09.224 +0200;{\"CVP: Reiterare ordine dopo verifica correttezza dati: p.iva\n                  1557601588457 inserita non corretta. Inserire p.iva corretta;\"}\n1-624431540236;662.842;Change-over;2024-05-09 11:47:43.638 +0200;{\"CVP: Reiterare ordine dopo il pagamento degli importi\n                  scaduti e non pagati per un totale di euro 1.011,78 su codice\n                  Cliente 539191386 wind \"}\n1-624442280009;663.011;Change-over;2024-05-09 12:03:12.057 +0200;{\"CVP: Reiterare ordine dopo il pagamento degli importi\n                  Passati a Perdita di euro 244,09 su Codice Cliente\n                  521205394-W.\nReiterare ordine dopo il pagamento degli importi scaduti e non\n                  pagati per un totale di euro 54,16 su codice Cliente attivo cc\n                  552438031-W.\"}\n1-624418982397;663.022;Change-over;2024-05-09 12:24:43.654 +0200;{\"CVP: Reiterare ordine dopo il pagamento degli importi\n                  Passati a Perdita di euro 818,1 su Codice Cliente 425678444-W\n                  Disattivo\"}\n1-625041461376;677.379;Change-over;2024-05-15 14:39:35.149 +0200;{\"CVP: Reiterare ordine dopo il pagamento degli importi\n                  scaduti e non pagati per un totale di euro 139,00 su codice\n                  Cliente 598189593-W\"}\n1-625041461366;677.368;Change-over;2024-05-15 14:41:23.720 +0200;{\"CVP: Reiterare ordine dopo il pagamento degli importi\n                  scaduti e non pagati per un totale di euro 139,00 su codice\n                  Cliente 598189593-W\"}\n1-625186375060;678.268;Change-over;2024-05-16 13:12:13.591 +0200;{\"CVP: Per la consistenza economico-finanziaria e per\n                  l'attività svolta si richiede pagamento tramite domiciliazione\n                  bancaria o carta di credito (RID/RIA).\"}\n1-625186375052;678.291;Change-over;2024-05-16 13:12:41.716 +0200;{\"CVP: Per la consistenza economico-finanziaria e per\n                  l'attività svolta si richiede pagamento tramite domiciliazione\n                  bancaria o carta di credito (RID/RIA).\"}\n1-625825236774;694.367;Change-over;2024-05-22 16:53:40.128 +0200;{\"CVP: Reiterare ordine dopo il pagamento degli importi\n                  scaduti e non pagati per un totale (PAP) di euro 499,20 su\n                  codice Cliente 20660200 disattivo.\n\n\"}\n1-625817770332;694.377;Change-over;2024-05-22 16:54:50.203 +0200;{\"CVP: Reiterare ordine dopo il pagamento degli importi\n                  scaduti e non pagati per un totale (PAP) di euro 499,20 su\n                  codice Cliente 20660200 disattivo.\n\n\"}\n1-625825737290;696.446;Change-over;2024-05-23 11:36:58.728 +0200;{\"CVP: Reiterare ordine dopo il pagamento degli importi\n                  scaduti e non pagati per un totale di euro 214,64 su cc\n                  568618413 attivo.\"}\n1-625825331449;694.879;Change-over;2024-05-23 14:37:44.448 +0200;{\"CVP: Reiterare ordine dopo il pagamento degli importi\n                  scaduti e non pagati per un totale di euro 146,30 su codice\n                  Cliente 561137237 wind attivo \"}\n1-626028010615;703.699;Change-over;2024-05-27 09:40:46.202 +0200;{\"CVP: Reiterare ordine dopo il pagamento degli importi\n                  Passati a Perdita di euro 244,09 su Codice Cliente\n                  521205394-W.\"}\n1-626271070750;710.443;Change-over;2024-05-28 12:56:32.768 +0200;{\"CVP: Reiterare ordine con PdC firmata.\"}\n1-626329698851;711.994;Change-over;2024-05-28 16:24:34.861 +0200;{\"CVP: Per la consistenza economico-finanziaria e per\n                  l'attività svolta si richiede pagamento tramite domiciliazione\n                  bancaria o carta di credito (RID/RIA).\"}\n1-626868013534;726.965;Change-over;2024-06-03 15:14:21.703 +0200;{\"CVP: Reiterare ordine con PdC firmata.\"}"
      },
      {
        "id": "12.4",
        "nomeParagrafo": "PAR 11.4 - Estrazione dei CDF associati ai subentri con KO di CVP\n            (DIN1717431655251)",
        "codicePlSql": "SELECT --d.document_xml ,\nc.value ,b.root_id,b.name,a.ts_created  ,mytab.code\nFROM \nACTION a,\nrequest b,detail c,request_doc d,\nxmltable(\n\t\t\tXMLNAMESPACES(\t\n\t\t\t\t\t\t\t'http://bssevo_com/commons/B2B-CMF-JobSharedVariable' as \"tns3\",\n\t\t\t\t\t\t\t'http://bssevo_com/commons/B2B-CMF-CommercialOrder' as \"tns4\",\n\t\t\t\t\t\t\t'http://bssevo_com/commons/B2B-CMF-CommercialOrder' as \"tns1\",\n\t\t\t\t\t\t\t'http://bssevo_com/commons/B2B-CMF-CommercialOrder' as \"tns30\",\n\t\t\t\t\t\t\t'http://bssevo_com/commons/B2B-CMF-CommercialOrder' as \"tns17\"\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t'/tns3:root/tns3:commercialOrder/tns1:order/descendant::tns30:billingAccount'\n\t\t\t\t\t\tPASSING (d.document_xml::xml) \n\t\t\tCOLUMNS\n\t\t\t\tcode varchar(100) path 'tns17:code' \n\t\t\t)as myTab\nWHERE b.name='Change-over' AND \na.request_id=b.id AND \na.name in ('Response async CVP KO','Ko Verify MdP')\nand c.root_id=b.root_id \nand c.name='id_odl_crm'\nand d.id=b.document_id\n--and b.id=589755\norder by ts_created",
        "outPutSql": "value;root_id;name;ts_created;code\n1-616942296927;589.755;Change-over;2024-03-11 14:29:04.637 +0100;612873894\n1-616942296927;589.755;Change-over;2024-03-11 14:29:04.637 +0100;608820827\n1-619859097260;594.900;Change-over;2024-03-18 13:16:45.343 +0100;606981857\n1-619859097260;594.900;Change-over;2024-03-18 13:16:45.343 +0100;619864491\n1-619922670466;594.975;Change-over;2024-03-18 14:12:10.128 +0100;619866991\n1-619922670466;594.975;Change-over;2024-03-18 14:12:10.128 +0100;575749489\n1-620094596748;595.593;Change-over;2024-03-18 18:15:07.015 +0100;619867457\n1-620094596748;595.593;Change-over;2024-03-18 18:15:07.015 +0100;6700319606\n1-620707152788;602.800;Change-over;2024-03-25 17:32:44.949 +0100;614552453\n1-620707152788;602.800;Change-over;2024-03-25 17:32:44.949 +0100;613628686\n1-620707152788;602.800;Change-over;2024-03-25 17:34:04.844 +0100;614552453\n1-620707152788;602.800;Change-over;2024-03-25 17:34:04.844 +0100;613628686\n1-620707152849;602.856;Change-over;2024-03-25 17:42:18.256 +0100;619866991\n1-620701347992;602.740;Change-over;2024-03-26 10:21:40.597 +0100;562835019\n1-620701347992;602.740;Change-over;2024-03-26 10:21:40.597 +0100;619863188\n1-620115865675;602.871;Change-over;2024-03-27 12:35:26.099 +0100;619870457\n1-620737820982;602.991;Change-over;2024-03-27 13:28:02.897 +0100;620248437\n1-621861098331;612.726;Change-over;2024-04-09 09:46:56.272 +0200;6800309453\n1-621861098331;612.726;Change-over;2024-04-09 09:46:56.272 +0200;620423222\n1-621861098420;612.797;Change-over;2024-04-09 09:47:30.992 +0200;620423222\n1-621861098420;612.797;Change-over;2024-04-09 09:47:30.992 +0200;6800309453\n1-621861098410;612.764;Change-over;2024-04-09 09:47:45.428 +0200;620423222\n1-621861098400;612.751;Change-over;2024-04-09 09:47:59.931 +0200;620423222\n1-621861098358;612.744;Change-over;2024-04-09 09:48:14.711 +0200;620423222\n1-621861098358;612.744;Change-over;2024-04-09 09:48:14.711 +0200;6800309453\n1-622443244016;619.696;Change-over;2024-04-15 16:20:30.538 +0200;592199495\n1-622443244016;619.696;Change-over;2024-04-15 16:20:30.538 +0200;6700200690\n1-622443244028;619.698;Change-over;2024-04-15 16:21:24.955 +0200;6700200690\n1-622443244028;619.698;Change-over;2024-04-15 16:21:24.955 +0200;592199495\n1-622443244058;619.704;Change-over;2024-04-15 16:22:22.316 +0200;6700200690\n1-622443244058;619.704;Change-over;2024-04-15 16:22:22.316 +0200;592199495\n1-622443244038;619.700;Change-over;2024-04-15 16:23:16.601 +0200;592199495\n1-622443244038;619.700;Change-over;2024-04-15 16:23:16.601 +0200;6700200690\n1-623501653813;642.732;Change-over;2024-04-27 13:32:40.202 +0200;621098740\n1-623501653813;642.732;Change-over;2024-04-27 13:32:40.202 +0200;553079995\n1-623514241767;642.800;Change-over;2024-04-27 14:26:10.905 +0200;621104838\n1-623739737739;647.702;Change-over;2024-04-30 18:33:11.737 +0200;621173516\n1-623753645570;648.164;Change-over;2024-04-30 22:26:02.724 +0200;621184543\n1-624036014583;654.358;Change-over;2024-05-06 14:07:35.295 +0200;6800177319\n1-624036014583;654.358;Change-over;2024-05-06 14:07:35.295 +0200;621277696\n1-624036014581;654.357;Change-over;2024-05-06 14:09:17.470 +0200;621277696\n1-624036014581;654.357;Change-over;2024-05-06 14:09:17.470 +0200;6800177319\n1-624180264514;656.989;Change-over;2024-05-07 11:57:23.121 +0200;621277696\n1-624180264514;656.989;Change-over;2024-05-07 11:57:23.121 +0200;6800177319\n1-624180264516;656.992;Change-over;2024-05-07 11:59:09.224 +0200;621277696\n1-624180264516;656.992;Change-over;2024-05-07 11:59:09.224 +0200;6800177319\n1-624431540236;662.842;Change-over;2024-05-09 11:47:43.638 +0200;621376008\n1-624431540236;662.842;Change-over;2024-05-09 11:47:43.638 +0200;571084596\n1-624442280009;663.011;Change-over;2024-05-09 12:03:12.057 +0200;621381335\n1-624418982397;663.022;Change-over;2024-05-09 12:24:43.654 +0200;570211394\n1-624418982397;663.022;Change-over;2024-05-09 12:24:43.654 +0200;621382010\n1-625041461376;677.379;Change-over;2024-05-15 14:39:35.149 +0200;621222460\n1-625041461366;677.368;Change-over;2024-05-15 14:41:23.720 +0200;621222460\n1-625186375060;678.268;Change-over;2024-05-16 13:12:13.591 +0200;621568136\n1-625186375052;678.291;Change-over;2024-05-16 13:12:41.716 +0200;621568136\n1-625825236774;694.367;Change-over;2024-05-22 16:53:40.128 +0200;572237973\n1-625817770332;694.377;Change-over;2024-05-22 16:54:50.203 +0200;572237973\n1-625825737290;696.446;Change-over;2024-05-23 11:36:58.728 +0200;568619229\n1-625825331449;694.879;Change-over;2024-05-23 14:37:44.448 +0200;621523050\n1-626028010615;703.699;Change-over;2024-05-27 09:40:46.202 +0200;621381335\n1-626271070750;710.443;Change-over;2024-05-28 12:56:32.768 +0200;621524506\n1-626329698851;711.994;Change-over;2024-05-28 16:24:34.861 +0200;621889840\n1-626868013534;726.965;Change-over;2024-06-03 15:14:21.703 +0200;617135760\n1-626868013534;726.965;Change-over;2024-06-03 15:14:21.703 +0200;601883895"
      }
    ]
  },
  {
    "id": "13",
    "nomeCapitolo": "Inserisci il nome del Capitolo",
    "paragrafi": [
      {
        "id": "13.1",
        "nomeParagrafo": "Inserisci il nome del Paragrafo",
        "codicePlSql": "Scrivi qui il codice PLSQL",
        "outPutSql": "Incolla qui la tua tabella"
      }
    ]
  }
]