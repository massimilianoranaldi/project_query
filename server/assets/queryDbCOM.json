[
  {
    "id": "1",
    "nomeCapitolo": "REPORT BONFANTI",
    "paragrafi": [
      {
        "id": "1.1",
        "nomeParagrafo": "Estrazione Dati",
        "codicePlSql": "-- fine del report (tot circa 50k)\nSELECT count(*) FROM report_com_new where id = (select max(id) from report_com_new);\n\n-- Estrazione dettaglio\nSELECT csv_text FROM report_com_new where id = (select max(id) from report_com_new);",
        "outPutSql": "REQUEST ID\tORDER ID CRM\tNAME\tSTATUS\tTS START\tTS END\tAGING (DAYS)\tTIPO\tSOTTOTIPO\tCHANNEL\tSTATO ORDINE CRM\tCOUNTER ITEMS CRM INVIATO\tFLAG CVP\tFLAG WCALL\tWIRELESS\tCPE FONIA\tBUNDLE\tBASKET\tOFFICE SMART\tCTRB\tMICROSOFT\tGREENWICH MNP\tGREENWICH NO MNP\tNO GREENWICH MNP\tNO GREENWICH NO MNP\tCPE LOGISTIC\tOUTCOME\tAGING (DAYS)\tOUTCOME\tAGING (DAYS)\tOUTCOME\tAGING (DAYS)\tLOGISTIC OUTCOME\tLOGISTIC AGING (DAYS)\tSERVICE ORDER SOM OUTCOME\tSERVICE ORDER SOM AGING (DAYS)\tMNP OUTCOME\tMNP AGING (DAYS)\tMNP DCO CRM\tMNP DCO MOG\tMNP RICHIESTE ACCETTATE\tMNP RICHIESTE SCARTATE\tCHANGE NUMBER MNP OUTCOME\tCHANGE NUMBER MNP MAX AGING FAILED\tFAILS COM CRM\tFAILS COM IGP\t FAILS COM BILLING\tFAILS COM OTHERS\tFAILS ON BILLING\tMISSING ON BILLING\tBATCH CLUSTERIZATION\n929410\tN/A\tMnpDonor\tWP\t01/08/2024 20:46\tN/A\t20\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\t1\t0\t0\t0\t0\t0\t0\t0\t1\t0\t0\t0\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\t0\t0\t0\t0\t0\t0\tTO CLUSTERIZE\n929409\tN/A\tMnpDonor\tWP\t01/08/2024 20:46\tN/A\t20\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\t1\t0\t0\t0\t0\t0\t0\t0\t1\t0\t0\t0\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\tN/A\t0\t0\t0\t0\t0\t0\tTO CLUSTERIZE"
      }
    ]
  },
  {
    "id": "2",
    "nomeCapitolo": "ANALISI SCARTI",
    "paragrafi": [
      {
        "id": "2.1",
        "nomeParagrafo": "Estrazione KO sui Trasferimenti Credito : forsce la descrizione scarto siebel",
        "codicePlSql": "select a.request_id,--b.*,fd.* ,\n--regexp_match(fd.document_xml, '{\"code\":(.*?)}') codice_errore,--recupera i ko som\nregexp_match(fd.document_xml, '<ns:ErrorDescription>(.*?)</ns:ErrorDescription>') codice_errore--recupera i ko som\nfrom action a, fault b,fault_doc fd  where \nb.action_id=a.id and \n--a.name='Receive Unlock Order' and \na.status='FA' and\nfd.id=b.document_id and \nb.ts_resolution is null and\n--fd.document_xml like '%Asset non trovato%'and\na.id in (\nselect id from action where status='FA' and request_id in \n(971809,\n970585,\n970582,\n970393,\n970585,\n970582,\n970393,\n968323,\n968219,\n968118,\n966299,\n965991,\n965936,\n965934,\n964131,\n963961,\n963956,\n955029,\n942666,\n942654,\n942652,\n942651,\n942625,\n942624,\n942616,\n942613,\n942605,\n942593,\n942591,\n942585,\n942564,\n942558,\n942552,\n942540,\n942534,\n942533,\n942532,\n942530,\n942529,\n942527,\n942525,\n942210,\n942201,\n942193,\n942191,\n942174,\n942167,\n942165,\n942162,\n942155,\n942144,\n942143,\n942142,\n942129,\n939026,\n939014,\n938948,\n932042,\n932037,\n926817,\n926417,\n926413,\n926405,\n926402,\n926396,\n926394,\n926385,\n926381,\n926369,\n926368,\n926353,\n926352,\n926335,\n926333,\n926323,\n926321,\n926318,\n926303,\n926302,\n926300,\n926299,\n926296,\n926284,\n926275,\n926261,\n919848,\n919847,\n919845,\n919844,\n919843,\n919842,\n919840,\n919837,\n919835,\n919833,\n919461,\n919445,\n919374,\n919307,\n919287,\n893685,\n893674,\n893654,\n893633,\n893632,\n893631,\n875114,\n833444,\n827164,\n817972,\n817966,\n817964,\n817957,\n817943,\n817971,\n817959,\n817954,\n817946,\n817944,\n817942,\n814051,\n813696\n))",
        "outPutSql": "\"request_id\"\t\"codice_errore\"\n970393\t\"{\"\"Errore nella creazione del SubCase\"\"}\"\n970582\t\"{\"\"Richiesta non trovata\"\"}\"\n970585\t\"{\"\"Richiesta non trovata\"\"}\"\n971809\t\"{\"\"Asset non trovato\"\"}\""
      },
      {
        "id": "2.2",
        "nomeParagrafo": "Estrazione cut-over mog per MnpDonor",
        "codicePlSql": "\nselect a.request_id,\nregexp_match(b.message_xml, '<tns:DATA__CUT__OVER>(.*?)</tns:DATA__CUT__OVER>') cut_off_mog--recupera i ko som\nfrom action a,action_msg b  where \na.status='SA' and \nb.id=a.message_id and \na.name='Receive Request Mnp Donor' and \na.request_id in (929410,929409,\n929408,\n929407,\n929406,\n929405,\n929404,\n929403,\n929402,\n929401,\n929400,\n929399,\n929398,\n929397,\n929396,\n929395,\n929394,\n929393,\n929392,\n929391,\n929390,\n929389,\n929388,\n929387,\n929386,\n929385,\n929384,\n929383,\n929382,\n929381,\n929380,\n929379,\n929378,\n929377,\n929376,\n929375,\n929374,\n929373,\n929372,\n929371,\n929370,\n929369,\n929368,\n929367,\n929366,\n929365,\n929364,\n929363,\n929362,\n929361,\n929360,\n929359,\n929358,\n929357,\n929356,\n902255,\n902254,\n902253,\n902252,\n902251,\n902250,\n902249,\n902248,\n902247,\n902246,\n902245,\n902244,\n902243,\n902242,\n902241,\n902240,\n902239,\n902238,\n902237,\n902236,\n902235,\n902234,\n902233,\n902232,\n902231,\n902230,\n902229,\n902228,\n902227,\n902226,\n902225,\n902224,\n902223,\n902222,\n902221,\n902220,\n902219,\n902218,\n902217,\n902216,\n902215,\n957204,\n957178,\n957159,\n957157,\n957143,\n957135,\n957128,\n957122,\n957111,\n902214,\n902213,\n902212,\n902211,\n929413,\n929412,\n929411,\n929425,\n929424,\n929423,\n929422,\n929421,\n929420,\n929419,\n929418,\n929417,\n929416,\n929415,\n929414,\n902257,\n902256) order by 1",
        "outPutSql": "\"request_id\"\t\"cut_off_mog\"\n902211\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902212\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902213\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902214\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902215\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902216\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902217\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902218\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902219\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902220\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902221\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902222\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902223\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902224\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902225\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902226\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902227\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902228\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902229\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902230\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902231\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902232\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902233\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902234\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902235\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902236\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902237\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902238\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902239\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902240\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902241\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902242\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902243\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902244\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902245\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902246\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902247\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902248\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902249\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902250\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902251\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902252\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902253\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902254\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902255\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902256\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n902257\t\"{\"\"2024-08-26 00:00:00.0\"\"}\"\n929356\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929357\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929358\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929359\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929360\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929361\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929362\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929363\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929364\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929365\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929366\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929367\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929368\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929369\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929370\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929371\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929372\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929373\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929374\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929375\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929376\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929377\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929378\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929379\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929380\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929381\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929382\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929383\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929384\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929385\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929386\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929387\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929388\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929389\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929390\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929391\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929392\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929393\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929394\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929395\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929396\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929397\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929398\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929399\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929400\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929401\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929402\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929403\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929404\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929405\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929406\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929407\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929408\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929409\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929410\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929411\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929412\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929413\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929414\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929415\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929416\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929417\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929418\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929419\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929420\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929421\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929422\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929423\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929424\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n929425\t\"{\"\"2024-08-31 00:00:00.0\"\"}\"\n957111\t\"{\"\"2024-08-13 00:00:00.0\"\"}\"\n957122\t\"{\"\"2024-08-13 00:00:00.0\"\"}\"\n957128\t\"{\"\"2024-08-13 00:00:00.0\"\"}\"\n957135\t\"{\"\"2024-08-13 00:00:00.0\"\"}\"\n957143\t\"{\"\"2024-08-13 00:00:00.0\"\"}\"\n957157\t\"{\"\"2024-08-13 00:00:00.0\"\"}\"\n957159\t\"{\"\"2024-08-13 00:00:00.0\"\"}\"\n957178\t\"{\"\"2024-08-13 00:00:00.0\"\"}\"\n957204\t\"{\"\"2024-08-13 00:00:00.0\"\"}\""
      },
      {
        "id": "2.3",
        "nomeParagrafo": "Estrazione KO SOM su Mixed Order",
        "codicePlSql": "\n--mixed order\nselect a.request_id,--b.*,fd.* ,\n--regexp_match(fd.document_xml, '{\"code\":(.*?)}') codice_errore,--recupera i ko som\nregexp_match(fd.document_xml, '{\"code\":\"(.*?)}') codice_errore--recupera i ko som\nfrom action a, fault b,fault_doc fd  where \nb.action_id=a.id and \n--a.name='Receive Unlock Order' and \na.status='FA' and\nfd.id=b.document_id and \nb.ts_resolution is null and\n--fd.document_xml like '%Asset non trovato%'and\na.id in (\nselect id from action where status='FA' and request_id in \n(970015,\n966042,\n939489,\n922181,\n915601,\n898864\n))",
        "outPutSql": "\"request_id\"\t\"codice_errore\"\n898864\t\"{\"\"EOC_ERROR_1014\\\"\",\\\"\"reason\\\"\":\\\"\"Request cannot be processed reason: Product id=1588140343725 specified in order not found in SR for customer.\\\"\",\\\"\"status\\\"\":\\\"\"404\\\"\"\"\"}\"\n915601\t\"{\"\"EOC_W3_ORDER_0002\\\"\",\\\"\"reason\\\"\":\\\"\"MSISDN Already Active!\\\"\",\\\"\"message\\\"\":\\\"\"CustomerId/ MSISDN already exits in service registry, Onboarding order cannot be submitted\\\"\",\\\"\"status\\\"\":\\\"\"400\\\"\"\"\"}\"\n939489\t\"{\"\"EOC_W3_ORDER_0002\\\"\",\\\"\"reason\\\"\":\\\"\"MSISDN Already Active!\\\"\",\\\"\"message\\\"\":\\\"\"CustomerId/ MSISDN already exits in service registry, Onboarding order cannot be submitted\\\"\",\\\"\"status\\\"\":\\\"\"400\\\"\"\"\"}\"\n970015\t\"{\"\"EOC_W3_ORDER_0002\\\"\",\\\"\"reason\\\"\":\\\"\"MSISDN Already Active!\\\"\",\\\"\"message\\\"\":\\\"\"CustomerId/ MSISDN already exits in service registry, Onboarding order cannot be submitted\\\"\",\\\"\"status\\\"\":\\\"\"400\\\"\"\"\"}\""
      }
    ]
  }
]
